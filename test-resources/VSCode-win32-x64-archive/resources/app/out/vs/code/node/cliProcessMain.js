/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
(function(){
var e=["require","exports","vs/base/common/path","vs/base/common/lifecycle","vs/platform/instantiation/common/instantiation","vs/nls!vs/code/node/cliProcessMain","vs/base/common/types","vs/nls","vs/base/node/pfs","vs/base/common/event","vs/platform/log/common/log","vs/base/common/objects","vs/base/common/async","vs/base/common/strings","vs/base/common/uri","vs/base/common/platform","vs/base/common/buffer","vs/base/common/arrays","vs/base/common/resources","vs/platform/environment/common/environment","vs/platform/files/common/files","vs/platform/registry/common/platform","vs/base/common/network","vs/base/common/amd","fs","vs/base/common/errors","vs/platform/configuration/common/configuration","vs/base/common/map","vs/base/common/cancellation","vs/platform/extensionManagement/common/extensionManagementUtil","vs/platform/extensionManagement/common/extensionManagement","vs/platform/configuration/common/configurationRegistry","vs/base/common/stream","vs/base/common/extpath","vs/base/parts/ipc/common/ipc","vs/base/common/errorMessage","child_process","vs/platform/extensions/common/extensions","os","vs/base/common/uuid","vs/platform/product/common/product","vs/platform/telemetry/common/telemetry","vs/base/common/glob","vs/base/common/labels","vs/base/node/decoder","util","vs/base/parts/ipc/node/ipc.cp","vs/platform/extensions/common/extensionValidator","vs/platform/instantiation/common/descriptors","vs/platform/files/common/io","vs/platform/files/node/watcher/watcher","vs/platform/instantiation/common/serviceCollection","semver-umd","vs/platform/product/common/productService","vs/platform/request/common/request","vs/platform/telemetry/common/telemetryUtils","vs/base/node/zip","vs/platform/extensionManagement/node/extensionManagementUtil","vs/base/common/assert","vs/base/common/collections","vs/base/common/decorators","vs/base/common/json","vs/base/common/console","vs/base/node/paths","vs/base/node/extpath","vs/base/node/watcher","vs/nls!vs/base/common/date","vs/base/common/date","vs/nls!vs/base/common/errorMessage","vs/nls!vs/base/node/processes","vs/base/node/processes","vs/nls!vs/base/node/zip","vs/nls!vs/platform/configuration/common/configurationRegistry","vs/nls!vs/platform/extensionManagement/common/extensionManagement","vs/nls!vs/platform/extensionManagement/node/extensionManagementService","vs/nls!vs/platform/extensionManagement/node/extensionManagementUtil","vs/nls!vs/platform/extensions/common/extensionValidator","vs/nls!vs/platform/files/common/fileService","vs/nls!vs/platform/files/common/files","vs/nls!vs/platform/files/common/io","vs/nls!vs/platform/files/node/diskFileSystemProvider","vs/nls!vs/platform/request/common/request","vs/nls!vs/platform/telemetry/common/telemetryService","vs/platform/extensionManagement/common/extensionNls","vs/platform/extensionManagement/node/extensionLifecycle","vs/platform/extensionManagement/node/extensionsManifestCache","vs/platform/files/node/watcher/nsfw/watcherIpc","vs/platform/files/node/watcher/nsfw/watcherService","vs/platform/files/node/watcher/unix/watcherIpc","vs/platform/files/node/watcher/unix/watcherService","vs/platform/files/node/watcher/win32/csharpWatcherService","vs/platform/files/node/watcher/win32/watcherService","vs/platform/instantiation/common/graph","vs/platform/download/common/download","vs/platform/files/node/watcher/nodejs/watcherService","vs/platform/instantiation/common/instantiationService","vs/platform/localizations/common/localizations","vs/platform/extensionManagement/node/extensionDownloader","vs/platform/files/common/fileService","vs/platform/files/node/diskFileSystemProvider","vs/platform/log/node/spdlogService","vs/platform/environment/node/environmentService","crypto","vs/platform/localizations/node/localizations","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/platform/configuration/common/configurationModels","vs/platform/configuration/common/configurationService","vs/platform/request/node/proxy","url","vs/platform/serviceMachineId/common/serviceMachineId","vs/platform/state/node/state","vs/platform/state/node/stateService","vs/platform/storage/common/storage","vs/platform/extensionManagement/common/extensionGalleryService","vs/platform/telemetry/common/telemetryService","vs/platform/telemetry/node/appInsightsAppender","vs/platform/telemetry/node/commonProperties","vs/platform/telemetry/node/telemetry","vs/platform/extensionManagement/node/extensionManagementService","vs/platform/request/node/requestService","string_decoder","vs/base/common/normalization","applicationinsights","yauzl","yazl","zlib","vs/code/node/cliProcessMain"],t=function(t){
for(var i=[],r=0,n=t.length;r<n;r++)i[r]=e[t[r]];return i};define(e[58],t([0,1]),(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ok=void 0,t.ok=function(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}})),define(e[59],t([0,1]),(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetMap=t.fromMap=t.groupBy=t.forEach=t.first=t.size=t.values=void 0;const i=Object.prototype.hasOwnProperty;t.values=function(e){const t=[];for(let r in e)i.call(e,r)&&t.push(e[r]);return t},t.size=function(e){let t=0;for(let r in e)i.call(e,r)&&(t+=1);return t},t.first=function(e){for(const t in e)if(i.call(e,t))return e[t]},t.forEach=function(e,t){for(let r in e)if(i.call(e,r)){if(!1===t({key:r,value:e[r]},(function(){delete e[r]})))return}},t.groupBy=function(e,t){const i=Object.create(null);for(const r of e){const e=t(r);let n=i[e];n||(n=i[e]=[]),n.push(r)}return i},t.fromMap=function(e){const t=Object.create(null);return e&&e.forEach((e,i)=>{
t[i]=e}),t};t.SetMap=class{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),0===i.size&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}}})),define(e[60],t([0,1]),(function(e,t){"use strict";function i(e){return(t,i,r)=>{let n=null,s=null;if("function"==typeof r.value?(n="value",s=r.value):"function"==typeof r.get&&(n="get",s=r.get),!s)throw new Error("not supported");r[n]=e(s,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=t.debounce=t.memoize=t.createMemoizer=t.createDecorator=void 0,t.createDecorator=i;let r=0;function n(){const e=`$memoize${r++}`;let t=void 0;const i=function(i,r,n){let s=null,o=null;if("function"==typeof n.value?(s="value",0!==(o=n.value).length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof n.get&&(s="get",o=n.get),!o)throw new Error("not supported");const a=`${e}:${r}`;n[s]=function(...e){
return t=this,this.hasOwnProperty(a)||Object.defineProperty(this,a,{configurable:!0,enumerable:!1,writable:!0,value:o.apply(this,e)}),this[a]}};return i.clear=()=>{void 0!==t&&Object.getOwnPropertyNames(t).forEach(i=>{0===i.indexOf(e)&&delete t[i]})},i}t.createMemoizer=n,t.memoize=function(e,t,i){return n()(e,t,i)},t.debounce=function(e,t,r){return i((i,n)=>{const s=`$debounce$${n}`,o=`$debounce$result$${n}`;return function(...n){this[o]||(this[o]=r?r():void 0),clearTimeout(this[s]),t&&(this[o]=t(this[o],...n),n=[this[o]]),this[s]=setTimeout(()=>{i.apply(this,n),this[o]=r?r():void 0},e)}})},t.throttle=function(e,t,r){return i((i,n)=>{const s=`$throttle$timer$${n}`,o=`$throttle$result$${n}`,a=`$throttle$lastRun$${n}`,l=`$throttle$pending$${n}`;return function(...n){if(this[o]||(this[o]=r?r():void 0),null!==this[a]&&void 0!==this[a]||(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...n)),this[l])return;const c=this[a]+e;c<=Date.now()?(this[a]=Date.now(),i.apply(this,[this[o]]),
this[o]=r?r():void 0):(this[l]=!0,this[s]=setTimeout(()=>{this[l]=!1,this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0},c-Date.now()))}})}})),define(e[61],t([0,1]),(function(e,t){"use strict";var i,r;function n(e,t=!1){let i=0,r=e.length,n="",l=0,c=16,u=0;function h(t){let r=0,n=0;for(;r<t;){const t=e.charCodeAt(i);if(t>=48&&t<=57)n=16*n+t-48;else if(t>=65&&t<=70)n=16*n+t-65+10;else{if(!(t>=97&&t<=102))break;n=16*n+t-97+10}i++,r++}return r<t&&(n=-1),n}function d(){if(n="",u=0,l=i,i>=r)return l=r,c=17;let t=e.charCodeAt(i);if(s(t)){do{i++,n+=String.fromCharCode(t),t=e.charCodeAt(i)}while(s(t));return c=15}if(o(t))return i++,n+=String.fromCharCode(t),13===t&&10===e.charCodeAt(i)&&(i++,n+="\n"),c=14;switch(t){case 123:return i++,c=1;case 125:return i++,c=2;case 91:return i++,c=3;case 93:return i++,c=4;case 58:return i++,c=6;case 44:return i++,c=5;case 34:return i++,n=function(){let t="",n=i;for(;;){if(i>=r){t+=e.substring(n,i),u=2;break}const s=e.charCodeAt(i);if(34===s){t+=e.substring(n,i),i++
;break}if(92!==s){if(s>=0&&s<=31){if(o(s)){t+=e.substring(n,i),u=2;break}u=6}i++}else{if(t+=e.substring(n,i),++i>=r){u=2;break}switch(e.charCodeAt(i++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:const e=h(4);e>=0?t+=String.fromCharCode(e):u=4;break;default:u=5}n=i}}return t}(),c=10;case 47:const s=i-1;if(47===e.charCodeAt(i+1)){for(i+=2;i<r&&!o(e.charCodeAt(i));)i++;return n=e.substring(s,i),c=12}if(42===e.charCodeAt(i+1)){i+=2;const t=r-1;let o=!1;for(;i<t;){if(42===e.charCodeAt(i)&&47===e.charCodeAt(i+1)){i+=2,o=!0;break}i++}return o||(i++,u=1),n=e.substring(s,i),c=13}return n+=String.fromCharCode(t),i++,c=16;case 45:if(n+=String.fromCharCode(t),++i===r||!a(e.charCodeAt(i)))return c=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return n+=function(){const t=i
;if(48===e.charCodeAt(i))i++;else for(i++;i<e.length&&a(e.charCodeAt(i));)i++;if(i<e.length&&46===e.charCodeAt(i)){if(!(++i<e.length&&a(e.charCodeAt(i))))return u=3,e.substring(t,i);for(i++;i<e.length&&a(e.charCodeAt(i));)i++}let r=i;if(i<e.length&&(69===e.charCodeAt(i)||101===e.charCodeAt(i)))if((++i<e.length&&43===e.charCodeAt(i)||45===e.charCodeAt(i))&&i++,i<e.length&&a(e.charCodeAt(i))){for(i++;i<e.length&&a(e.charCodeAt(i));)i++;r=i}else u=3;return e.substring(t,r)}(),c=11;default:for(;i<r&&f(t);)i++,t=e.charCodeAt(i);if(l!==i){switch(n=e.substring(l,i)){case"true":return c=8;case"false":return c=9;case"null":return c=7}return c=16}return n+=String.fromCharCode(t),i++,c=16}}function f(e){if(s(e)||o(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){i=e,n="",l=0,c=16,u=0},getPosition:()=>i,scan:t?function(){let e;do{e=d()}while(e>=12&&e<=15);return e}:d,getToken:()=>c,getTokenValue:()=>n,getTokenOffset:()=>l,
getTokenLength:()=>i-l,getTokenError:()=>u}}function s(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function o(e){return 10===e||13===e||8232===e||8233===e}function a(e){return e>=48&&e<=57}function l(e,t,i=!1){return t>=e.offset&&t<e.offset+e.length||i&&t===e.offset+e.length}function c(e,t,r=i.DEFAULT){const s=n(e,!1);function o(e){return e?()=>e(s.getTokenOffset(),s.getTokenLength()):()=>!0}function a(e){return e?t=>e(t,s.getTokenOffset(),s.getTokenLength()):()=>!0}const l=o(t.onObjectBegin),c=a(t.onObjectProperty),u=o(t.onObjectEnd),h=o(t.onArrayBegin),d=o(t.onArrayEnd),f=a(t.onLiteralValue),g=a(t.onSeparator),p=o(t.onComment),m=a(t.onError),v=r&&r.disallowComments,y=r&&r.allowTrailingComma;function E(){for(;;){const e=s.scan();switch(s.getTokenError()){case 4:S(14);break;case 5:S(15);break;case 3:S(13);break;case 1:v||S(11);break;case 2:S(12);break;case 6:S(16)}switch(e){case 12:case 13:v?S(10):p();break;case 16:S(1);break;case 15:
case 14:break;default:return e}}}function S(e,t=[],i=[]){if(m(e),t.length+i.length>0){let e=s.getToken();for(;17!==e;){if(-1!==t.indexOf(e)){E();break}if(-1!==i.indexOf(e))break;e=E()}}}function w(e){const t=s.getTokenValue();return e?f(t):c(t),E(),!0}function b(){switch(s.getToken()){case 3:return function(){h(),E();let e=!1;for(;4!==s.getToken()&&17!==s.getToken();){if(5===s.getToken()){if(e||S(4,[],[]),g(","),E(),4===s.getToken()&&y)break}else e&&S(6,[],[]);b()||S(4,[],[4,5]),e=!0}return d(),4!==s.getToken()?S(8,[4],[]):E(),!0}();case 1:return function(){l(),E();let e=!1;for(;2!==s.getToken()&&17!==s.getToken();){if(5===s.getToken()){if(e||S(4,[],[]),g(","),E(),2===s.getToken()&&y)break}else e&&S(6,[],[]);(10!==s.getToken()?(S(3,[],[2,5]),0):(w(!1),6===s.getToken()?(g(":"),E(),b()||S(4,[],[2,5])):S(5,[],[2,5]),1))||S(4,[],[2,5]),e=!0}return u(),2!==s.getToken()?S(7,[2],[]):E(),!0}();case 10:return w(!0);default:return function(){switch(s.getToken()){case 11:let e=0;try{
"number"!=typeof(e=JSON.parse(s.getTokenValue()))&&(S(2),e=0)}catch(e){S(2)}f(e);break;case 7:f(null);break;case 8:f(!0);break;case 9:f(!1);break;default:return!1}return E(),!0}()}}return E(),17===s.getToken()?!!r.allowEmptyContent||(S(4,[],[]),!1):b()?(17!==s.getToken()&&S(9,[],[]),!0):(S(4,[],[]),!1)}function u(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":return e?Array.isArray(e)?"array":"object":"null";default:return"null"}}Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeType=t.stripComments=t.visit=t.findNodeAtOffset=t.contains=t.getNodeValue=t.getNodePath=t.findNodeAtLocation=t.parseTree=t.parse=t.getLocation=t.createScanner=t.ParseOptions=t.ParseErrorCode=t.SyntaxKind=t.ScanError=void 0,function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",
e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"}(t.ScanError||(t.ScanError={})),function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"}(t.SyntaxKind||(t.SyntaxKind={})),function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",
e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"}(t.ParseErrorCode||(t.ParseErrorCode={})),function(e){e.DEFAULT={allowTrailingComma:!0}}(i=t.ParseOptions||(t.ParseOptions={})),t.createScanner=n,function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",
e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",
e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",
e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"}(r||(r={})),t.getLocation=function(e,t){const i=[],r=new Object;let n=void 0;const s={value:{},offset:0,length:0,type:"object",parent:void 0};let o=!1;function a(e,t,i,r){s.value=e,s.offset=t,s.length=i,s.type=r,s.colonOffset=void 0,n=s}try{c(e,{onObjectBegin:(e,s)=>{if(t<=e)throw r;n=void 0,o=t>e,i.push("")},onObjectProperty:(e,n,s)=>{if(t<n)throw r;if(a(e,n,s,"property"),i[i.length-1]=e,t<=n+s)throw r},onObjectEnd:(e,s)=>{if(t<=e)throw r;n=void 0,i.pop()},onArrayBegin:(e,s)=>{if(t<=e)throw r;n=void 0,i.push(0)},onArrayEnd:(e,s)=>{if(t<=e)throw r;n=void 0,i.pop()},
onLiteralValue:(e,i,n)=>{if(t<i)throw r;if(a(e,i,n,u(e)),t<=i+n)throw r},onSeparator:(e,s,a)=>{if(t<=s)throw r;if(":"===e&&n&&"property"===n.type)n.colonOffset=s,o=!1,n=void 0;else if(","===e){const e=i[i.length-1];"number"==typeof e?i[i.length-1]=e+1:(o=!0,i[i.length-1]=""),n=void 0}}})}catch(e){if(e!==r)throw e}return{path:i,previousNode:n,isAtPropertyKey:o,matches:e=>{let t=0;for(let r=0;t<e.length&&r<i.length;r++)if(e[t]===i[r]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},t.parse=function(e,t=[],r=i.DEFAULT){let n=null,s=[];const o=[];function a(e){Array.isArray(s)?s.push(e):null!==n&&(s[n]=e)}return c(e,{onObjectBegin:()=>{const e={};a(e),o.push(s),s=e,n=null},onObjectProperty:e=>{n=e},onObjectEnd:()=>{s=o.pop()},onArrayBegin:()=>{const e=[];a(e),o.push(s),s=e,n=null},onArrayEnd:()=>{s=o.pop()},onLiteralValue:a,onError:(e,i,r)=>{t.push({error:e,offset:i,length:r})}},r),s[0]},t.parseTree=function(e,t=[],r=i.DEFAULT){let n={type:"array",offset:-1,length:-1,children:[],parent:void 0}
;function s(e){"property"===n.type&&(n.length=e-n.offset,n=n.parent)}function o(e){return n.children.push(e),e}c(e,{onObjectBegin:e=>{n=o({type:"object",offset:e,length:-1,parent:n,children:[]})},onObjectProperty:(e,t,i)=>{(n=o({type:"property",offset:t,length:-1,parent:n,children:[]})).children.push({type:"string",value:e,offset:t,length:i,parent:n})},onObjectEnd:(e,t)=>{n.length=e+t-n.offset,n=n.parent,s(e+t)},onArrayBegin:(e,t)=>{n=o({type:"array",offset:e,length:-1,parent:n,children:[]})},onArrayEnd:(e,t)=>{n.length=e+t-n.offset,n=n.parent,s(e+t)},onLiteralValue:(e,t,i)=>{o({type:u(e),offset:t,length:i,parent:n,value:e}),s(t+i)},onSeparator:(e,t,i)=>{"property"===n.type&&(":"===e?n.colonOffset=t:","===e&&s(t))},onError:(e,i,r)=>{t.push({error:e,offset:i,length:r})}},r);const a=n.children[0];return a&&delete a.parent,a},t.findNodeAtLocation=function(e,t){if(!e)return;let i=e;for(let e of t)if("string"==typeof e){if("object"!==i.type||!Array.isArray(i.children))return;let t=!1
;for(const r of i.children)if(Array.isArray(r.children)&&r.children[0].value===e){i=r.children[1],t=!0;break}if(!t)return}else{const t=e;if("array"!==i.type||t<0||!Array.isArray(i.children)||t>=i.children.length)return;i=i.children[t]}return i},t.getNodePath=function e(t){if(!t.parent||!t.parent.children)return[];const i=e(t.parent);if("property"===t.parent.type){const e=t.parent.children[0].value;i.push(e)}else if("array"===t.parent.type){const e=t.parent.children.indexOf(t);-1!==e&&i.push(e)}return i},t.getNodeValue=function e(t){switch(t.type){case"array":return t.children.map(e);case"object":const i=Object.create(null);for(let r of t.children){const t=r.children[1];t&&(i[r.children[0].value]=e(t))}return i;case"null":case"string":case"number":case"boolean":return t.value;default:return}},t.contains=l,t.findNodeAtOffset=function e(t,i,r=!1){if(l(t,i,r)){const n=t.children;if(Array.isArray(n))for(let t=0;t<n.length&&n[t].offset<=i;t++){const s=e(n[t],i,r);if(s)return s}return t}},t.visit=c,
t.stripComments=function(e,t){let i,r,s=n(e),o=[],a=0;do{switch(r=s.getPosition(),i=s.scan()){case 12:case 13:case 17:a!==r&&o.push(e.substring(a,r)),void 0!==t&&o.push(s.getTokenValue().replace(/[^\r\n]/g,t)),a=s.getPosition()}}while(17!==i);return o.join("")},t.getNodeType=u})),define(e[32],t([0,1]),(function(e,t){"use strict";function i(e){return new r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.transform=t.toReadable=t.toStream=t.consumeStreamWithLimit=t.consumeStream=t.consumeReadableWithLimit=t.consumeReadable=t.newWriteableStream=t.isReadableStream=void 0,t.isReadableStream=function(e){const t=e;return t&&[t.on,t.pause,t.resume,t.destroy].every(e=>"function"==typeof e)},t.newWriteableStream=i;class r{constructor(e){this.reducer=e,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]}}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),
this.flowErrors(),this.flowEnd())}write(e){this.state.destroyed||(this.state.flowing?this.listeners.data.forEach(t=>t(e)):this.buffer.data.push(e))}error(e){this.state.destroyed||(this.state.flowing?this.listeners.error.forEach(t=>t(e)):this.buffer.error.push(e))}end(e){this.state.destroyed||(e instanceof Error?this.error(e):e&&this.write(e),this.state.flowing?(this.listeners.end.forEach(e=>e()),this.destroy()):this.state.ended=!0)}on(e,t){if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(t),this.resume();break;case"end":this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(t),this.state.flowing&&this.flowErrors()}}flowData(){if(this.buffer.data.length>0){const e=this.reducer(this.buffer.data);this.listeners.data.forEach(t=>t(e)),this.buffer.data.length=0}}flowErrors(){if(this.listeners.error.length>0){for(const e of this.buffer.error)this.listeners.error.forEach(t=>t(e));this.buffer.error.length=0}}flowEnd(){
return!!this.state.ended&&(this.listeners.end.forEach(e=>e()),this.listeners.end.length>0)}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0)}}t.consumeReadable=function(e,t){const i=[];let r;for(;null!==(r=e.read());)i.push(r);return t(i)},t.consumeReadableWithLimit=function(e,t,i){const r=[];let n=void 0;for(;null!==(n=e.read())&&r.length<i;)r.push(n);return null===n&&r.length>0?t(r):{read:()=>{if(r.length>0)return r.shift();if(void 0!==n){const e=n;return n=void 0,e}return e.read()}}},t.consumeStream=function(e,t){return new Promise((i,r)=>{const n=[];e.on("data",e=>n.push(e)),e.on("error",e=>r(e)),e.on("end",()=>i(t(n)))})},t.consumeStreamWithLimit=function(e,t,r){return new Promise((n,s)=>{const o=[];let a=void 0;e.on("data",e=>{if(!a&&o.length===r){for(a=i(t);o.length;)a.write(o.shift());return a.write(e),n(a)}a?a.write(e):o.push(e)}),
e.on("error",e=>{if(!a)return s(e);a.error(e)}),e.on("end",()=>{if(!a)return n(t(o));for(;o.length;)a.write(o.shift());a.end()})})},t.toStream=function(e,t){const r=i(t);return r.end(e),r},t.toReadable=function(e){let t=!1;return{read:()=>t?null:(t=!0,e)}},t.transform=function(e,t,r){const n=i(r);return e.on("data",e=>n.write(t.data(e))),e.on("end",()=>n.end()),e.on("error",e=>n.error(t.error?t.error(e):e)),n}})),define(e[16],t([0,1,13,32]),(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newWriteableBufferStream=t.streamToBufferReadableStream=t.bufferToStream=t.streamToBuffer=t.bufferToReadable=t.readableToBuffer=t.writeUInt8=t.readUInt8=t.writeUInt32LE=t.readUInt32LE=t.writeUInt32BE=t.readUInt32BE=t.writeUInt16LE=t.readUInt16LE=t.VSBuffer=void 0;const n="undefined"!=typeof Buffer,s="undefined"!=typeof TextEncoder,o="undefined"!=typeof TextDecoder;let a,l;class c{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static alloc(e){
return new c(n?Buffer.allocUnsafe(e):new Uint8Array(e))}static wrap(e){return n&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new c(e)}static fromString(e){return n?new c(Buffer.from(e)):s?(a||(a=new TextEncoder),new c(a.encode(e))):new c(i.encodeUTF8(e))}static concat(e,t){if(void 0===t){t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].byteLength}const i=c.alloc(t);let r=0;for(let t=0,n=e.length;t<n;t++){const n=e[t];i.set(n,r),r+=n.byteLength}return i}toString(){return n?this.buffer.toString():o?(l||(l=new TextDecoder),l.decode(this.buffer)):i.decodeUTF8(this.buffer)}slice(e,t){return new c(this.buffer.subarray(e,t))}set(e,t){e instanceof c?this.buffer.set(e.buffer,t):this.buffer.set(e,t)}readUInt32BE(e){return u(this.buffer,e)}writeUInt32BE(e,t){h(this.buffer,e,t)}readUInt32LE(e){return d(this.buffer,e)}writeUInt32LE(e,t){f(this.buffer,e,t)}readUInt8(e){return g(this.buffer,e)}writeUInt8(e,t){p(this.buffer,e,t)}}function u(e,t){return e[t]*2**24+65536*e[t+1]+256*e[t+2]+e[t+3]}
function h(e,t,i){e[i+3]=t,t>>>=8,e[i+2]=t,t>>>=8,e[i+1]=t,t>>>=8,e[i]=t}function d(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function f(e,t,i){e[i+0]=255&t,t>>>=8,e[i+1]=255&t,t>>>=8,e[i+2]=255&t,t>>>=8,e[i+3]=255&t}function g(e,t){return e[t]}function p(e,t,i){e[i]=t}t.VSBuffer=c,t.readUInt16LE=function(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0},t.writeUInt16LE=function(e,t,i){e[i+0]=255&t,t>>>=8,e[i+1]=255&t},t.readUInt32BE=u,t.writeUInt32BE=h,t.readUInt32LE=d,t.writeUInt32LE=f,t.readUInt8=g,t.writeUInt8=p,t.readableToBuffer=function(e){return r.consumeReadable(e,e=>c.concat(e))},t.bufferToReadable=function(e){return r.toReadable(e)},t.streamToBuffer=function(e){return r.consumeStream(e,e=>c.concat(e))},t.bufferToStream=function(e){return r.toStream(e,e=>c.concat(e))},t.streamToBufferReadableStream=function(e){return r.transform(e,{data:e=>"string"==typeof e?c.fromString(e):c.wrap(e)},e=>c.concat(e))},t.newWriteableBufferStream=function(){
return r.newWriteableStream(e=>c.concat(e))}})),define(e[11],t([0,1,6]),(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinct=t.getOrDefault=t.safeStringify=t.equals=t.assign=t.mixin=t.cloneAndChange=t.deepFreeze=t.deepClone=void 0,t.deepClone=function e(t){if(!t||"object"!=typeof t)return t;if(t instanceof RegExp)return t;const i=Array.isArray(t)?[]:{};return Object.keys(t).forEach(r=>{t[r]&&"object"==typeof t[r]?i[r]=e(t[r]):i[r]=t[r]}),i},t.deepFreeze=function(e){if(!e||"object"!=typeof e)return e;const t=[e];for(;t.length>0;){const e=t.shift();Object.freeze(e);for(const i in e)if(r.call(e,i)){const r=e[i];"object"!=typeof r||Object.isFrozen(r)||t.push(r)}}return e};const r=Object.prototype.hasOwnProperty;function n(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let i,r;if(Array.isArray(e)){if(e.length!==t.length)return!1
;for(i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}else{const s=[];for(r in e)s.push(r);s.sort();const o=[];for(r in t)o.push(r);if(o.sort(),!n(s,o))return!1;for(i=0;i<s.length;i++)if(!n(e[s[i]],t[s[i]]))return!1}return!0}t.cloneAndChange=function(e,t){return function e(t,n,s){if(i.isUndefinedOrNull(t))return t;const o=n(t);if(void 0!==o)return o;if(i.isArray(t)){const i=[];for(const r of t)i.push(e(r,n,s));return i}if(i.isObject(t)){if(s.has(t))throw new Error("Cannot clone recursive data-structure");s.add(t);const i={};for(let o in t)r.call(t,o)&&(i[o]=e(t[o],n,s));return s.delete(t),i}return t}(e,t,new Set)},t.mixin=function e(t,r,n=!0){return i.isObject(t)?(i.isObject(r)&&Object.keys(r).forEach(s=>{s in t?n&&(i.isObject(t[s])&&i.isObject(r[s])?e(t[s],r[s],n):t[s]=r[s]):t[s]=r[s]}),t):r},t.assign=function(e,...t){return t.forEach(t=>Object.keys(t).forEach(i=>e[i]=t[i])),e},t.equals=n,t.safeStringify=function(e){const t=[];return JSON.stringify(e,(e,r)=>{if(i.isObject(r)||Array.isArray(r)){
if(-1!==t.indexOf(r))return"[Circular]";t.push(r)}return r})},t.getOrDefault=function(e,t,i){const r=t(e);return void 0===r?i:r},t.distinct=function(e,t){const i=Object.create(null);return e&&t?(Object.keys(t).forEach(r=>{const s=e[r],o=t[r];n(s,o)||(i[r]=o)}),i):i}})),define(e[62],t([0,1,14]),(function(e,t,i){"use strict";function r(e){const t=[];let i;try{const r=JSON.parse(e.arguments),n=r[r.length-1];n&&n.__$stack&&(r.pop(),i=n.__$stack),t.push(...r)}catch(i){t.push("Unable to log remote console arguments",e.arguments)}return{args:t,stack:i}}function n(e){if(!e)return e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function s(e){return`color: ${e}`}Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.getFirstFrame=t.parse=t.isRemoteConsoleLog=void 0,t.isRemoteConsoleLog=function(e){const t=e;return t&&"string"==typeof t.type&&"string"==typeof t.severity},t.parse=r,t.getFirstFrame=function e(t){if("string"!=typeof t)return e(r(t).stack);if(t){
const e=n(t),r=/at [^\/]*((?:(?:[a-zA-Z]+:)|(?:[\/])|(?:\\\\))(?:.+)):(\d+):(\d+)/.exec(e||"");if(r&&4===r.length)return{uri:i.URI.file(r[1]),line:Number(r[2]),column:Number(r[3])}}},t.log=function(e,t){const{args:i,stack:o}=r(e),a="string"==typeof i[0]&&1===i.length;let l=n(o);l&&(l=`(${l.trim()})`);let c=[];if(c="string"==typeof i[0]?l&&a?[`%c[${t}] %c${i[0]} %c${l}`,s("blue"),s(""),s("grey")]:[`%c[${t}] %c${i[0]}`,s("blue"),s(""),...i.slice(1)]:[`%c[${t}]%`,s("blue"),...i],l&&!a&&c.push(l),"function"!=typeof console[e.severity])throw new Error("Unknown console method");console[e.severity].apply(console,c)}})),define(e[42],t([0,1,17,13,33,2,27,12]),(function(e,t,i,r,n,s,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathTerms=t.getBasenameTerms=t.isRelativePattern=t.hasSiblingFn=t.hasSiblingPromiseFn=t.parse=t.match=t.splitGlobAware=t.getEmptyExpression=void 0,t.getEmptyExpression=function(){return Object.create(null)};const l="**",c="/",u="[/\\\\]",h="[^/\\\\]",d=/\//g
;function f(e){switch(e){case 0:return"";case 1:return`${h}*?`;default:return`(?:${u}|${h}+${u}|${u}${h}+)*?`}}function g(e,t){if(!e)return[];const i=[];let r=!1,n=!1,s="";for(const o of e){switch(o){case t:if(!r&&!n){i.push(s),s="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":n=!0;break;case"]":n=!1}s+=o}return s&&i.push(s),i}t.splitGlobAware=g;const p=/^\*\*\/\*\.[\w\.-]+$/,m=/^\*\*\/([\w\.-]+)\/?$/,v=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,y=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,E=/^\*\*((\/[\w\.-]+)+)\/?$/,S=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,w=new o.LRUCache(1e4),b=function(){return!1},C=function(){return null};function P(e,t){if(!e)return C;let n;const s=`${n=(n="string"!=typeof e?e.pattern:e).trim()}_${!!t.trimForExclusions}`;let o,a=w.get(s);if(a)return x(a,e);if(p.test(n)){const e=n.substr(4);a=function(t,i){return"string"==typeof t&&t.endsWith(e)?n:null}}else a=(o=m.exec(_(n,t)))?function(e,t){
const i=`/${e}`,r=`\\${e}`,n=function(n,s){return"string"!=typeof n?null:s?s===e?t:null:n===e||n.endsWith(i)||n.endsWith(r)?t:null},s=[e];return n.basenames=s,n.patterns=[t],n.allBasenames=s,n}(o[1],n):(t.trimForExclusions?y:v).test(n)?function(e,t){const r=F(e.slice(1,-1).split(",").map(e=>P(e,t)).filter(e=>e!==C),e),n=r.length;if(!n)return C;if(1===n)return r[0];const s=function(t,i){for(let n=0,s=r.length;n<s;n++)if(r[n](t,i))return e;return null},o=i.first(r,e=>!!e.allBasenames);o&&(s.allBasenames=o.allBasenames);const a=r.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);a.length&&(s.allPaths=a);return s}(n,t):(o=E.exec(_(n,t)))?I(o[1].substr(1),n,!0):(o=S.exec(_(n,t)))?I(o[1],n,!1):function(e){try{const t=new RegExp(`^${function e(t){if(!t)return"";let i="";const n=g(t,c);if(n.every(e=>e===l))i=".*";else{let t=!1;n.forEach((s,o)=>{if(s===l)return void(t||(i+=f(2),t=!0));let a=!1,d="",p=!1,m="";for(const t of s)if("}"!==t&&a)d+=t;else if(!p||"]"===t&&m)switch(t){case"{":a=!0;continue;case"[":p=!0
;continue;case"}":const n=`(?:${g(d,",").map(t=>e(t)).join("|")})`;i+=n,a=!1,d="";break;case"]":i+="["+m+"]",p=!1,m="";break;case"?":i+=h;continue;case"*":i+=f(1);continue;default:i+=r.escapeRegExpCharacters(t)}else{let e;m+=e="-"===t?t:"^"!==t&&"!"!==t||m?t===c?"":r.escapeRegExpCharacters(t):"^"}o<n.length-1&&(n[o+1]!==l||o+2<n.length)&&(i+=u),t=!1})}return i}(e)}$`);return function(i){return t.lastIndex=0,"string"==typeof i&&t.test(i)?e:null}}catch(e){return C}}(n);return w.set(s,a),x(a,e)}function x(e,t){return"string"==typeof t?e:function(i,r){return n.isEqualOrParent(i,t.base)?e(s.relative(t.base,i),r):null}}function _(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function I(e,t,i){const r=s.sep!==s.posix.sep?e.replace(d,s.sep):e,n=s.sep+r,o=i?function(e,i){return"string"!=typeof e||e!==r&&!e.endsWith(n)?null:t}:function(e,i){return"string"==typeof e&&e===r?t:null};return o.allPaths=[(i?"*/":"./")+e],o}function D(e,t={}){if(!e)return b;if("string"==typeof e||O(e)){
const i=P(e,t);if(i===C)return b;const r=function(e,t){return!!i(e,t)};return i.allBasenames&&(r.allBasenames=i.allBasenames),i.allPaths&&(r.allPaths=i.allPaths),r}return function(e,t){const r=F(Object.getOwnPropertyNames(e).map(i=>(function(e,t,i){if(!1===t)return C;const r=P(e,i);if(r===C)return C;if("boolean"==typeof t)return r;if(t){const i=t.when;if("string"==typeof i){const t=(t,n,s,o)=>{if(!o||!r(t,n))return null;const l=o(i.replace("$(basename)",s));return a.isThenable(l)?l.then(t=>t?e:null):l?e:null};return t.requiresSiblings=!0,t}}return r})(i,e[i],t)).filter(e=>e!==C)),n=r.length;if(!n)return C;if(!r.some(e=>!!e.requiresSiblings)){if(1===n)return r[0];const e=function(e,t){for(let i=0,n=r.length;i<n;i++){const n=r[i](e,t);if(n)return n}return null},t=i.first(r,e=>!!e.allBasenames);t&&(e.allBasenames=t.allBasenames);const s=r.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return s.length&&(e.allPaths=s),e}const o=function(e,t,i){let n=void 0;for(let o=0,a=r.length;o<a;o++){const a=r[o]
;a.requiresSiblings&&i&&(t||(t=s.basename(e)),n||(n=t.substr(0,t.length-s.extname(e).length)));const l=a(e,t,n,i);if(l)return l}return null},l=i.first(r,e=>!!e.allBasenames);l&&(o.allBasenames=l.allBasenames);const c=r.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);c.length&&(o.allPaths=c);return o}(e,t)}function L(e){const t={};for(const i of e)t[i]=!0;return t}function O(e){const t=e;return t&&"string"==typeof t.base&&"string"==typeof t.pattern}function F(e,t){const i=e.filter(e=>!!e.basenames);if(i.length<2)return e;const r=i.reduce((e,t)=>{const i=t.basenames;return i?e.concat(i):e},[]);let n;if(t){n=[];for(let e=0,i=r.length;e<i;e++)n.push(t)}else n=i.reduce((e,t)=>{const i=t.patterns;return i?e.concat(i):e},[]);const s=function(e,t){if("string"!=typeof e)return null;if(!t){let i;for(i=e.length;i>0;i--){const t=e.charCodeAt(i-1);if(47===t||92===t)break}t=e.substr(i)}const i=r.indexOf(t);return-1!==i?n[i]:null};s.basenames=r,s.patterns=n,s.allBasenames=r;const o=e.filter(e=>!e.basenames)
;return o.push(s),o}t.match=function(e,t,i){return!(!e||"string"!=typeof t)&&D(e)(t,void 0,i)},t.parse=D,t.hasSiblingPromiseFn=function(e){if(!e)return;let t;return i=>(t||(t=(e()||Promise.resolve([])).then(e=>e?L(e):{})),t.then(e=>!!e[i]))},t.hasSiblingFn=function(e){if(!e)return;let t;return i=>{if(!t){const i=e();t=i?L(i):{}}return!!t[i]}},t.isRelativePattern=O,t.getBasenameTerms=function(e){return e.allBasenames||[]},t.getPathTerms=function(e){return e.allPaths||[]}})),define(e[18],t([0,1,33,2,14,13,22,15,42,27]),(function(e,t,i,r,n,s,o,a,l,c){"use strict";function u(e){return n.uriToFsPath(e,!0)}function h(e){return!e||e.scheme!==o.Schemas.file||!a.isLinux}function d(e,t,r=h(e)){if(e.scheme===t.scheme){if(e.scheme===o.Schemas.file)return i.isEqualOrParent(u(e),u(t),r)&&e.query===t.query;if(f(e.authority,t.authority))return i.isEqualOrParent(e.path||"/",t.path||"/",r,"/")&&e.query===t.query}return!1}function f(e,t){return e===t||s.equalsIgnoreCase(e,t)}function g(e){return r.posix.basename(e.path)}
function p(e,t=r.sep){if(e.scheme===o.Schemas.file){const r=u(e);return r.length>i.getRoot(r).length&&r[r.length-1]===t}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}function m(e,t,n=h(e)){if(e.scheme!==t.scheme||!f(e.authority,t.authority))return;if(e.scheme===o.Schemas.file){const n=r.relative(u(e),u(t));return a.isWindows?i.toSlashes(n):n}let s=e.path||"/",l=t.path||"/";if(n){let e=0;for(const t=Math.min(s.length,l.length);e<t&&(s.charCodeAt(e)===l.charCodeAt(e)||s.charAt(e).toLowerCase()===l.charAt(e).toLowerCase());e++);s=l.substr(0,e)+s.substr(e)}return r.posix.relative(s,l)}Object.defineProperty(t,"__esModule",{value:!0}),
t.toLocalResource=t.ResourceGlobMatcher=t.DataUri=t.distinctParents=t.resolvePath=t.relativePath=t.addTrailingPathSeparator=t.removeTrailingPathSeparator=t.hasTrailingPathSeparator=t.isAbsolutePath=t.normalizePath=t.joinPath=t.dirname=t.extname=t.basename=t.isEqual=t.isEqualAuthority=t.isEqualOrParent=t.basenameOrAuthority=t.hasToIgnoreCase=t.getComparisonKey=t.originalFSPath=void 0,t.originalFSPath=u,t.getComparisonKey=function(e,t=h(e)){let i=e.path||"/";return t&&(i=i.toLowerCase()),e.with({authority:e.authority.toLowerCase(),path:i,fragment:null}).toString()},t.hasToIgnoreCase=h,t.basenameOrAuthority=function(e){return g(e)||e.authority},t.isEqualOrParent=d,t.isEqualAuthority=f,t.isEqual=function(e,t,i=h(e),r=!0){if(e===t)return!0;if(!e||!t)return!1;if(e.scheme!==t.scheme||!f(e.authority,t.authority))return!1;const n=e.path||"/",o=t.path||"/";return(n===o||i&&s.equalsIgnoreCase(n,o))&&e.query===t.query&&(r||e.fragment===t.fragment)},t.basename=g,t.extname=function(e){return r.posix.extname(e.path)},
t.dirname=function(e){if(0===e.path.length)return e;let t;return e.scheme===o.Schemas.file?t=n.URI.file(r.dirname(u(e))).path:(t=r.posix.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})},t.joinPath=function(e,...t){let i;return i="file"===e.scheme?n.URI.file(r.join(u(e),...t)).path:r.posix.join(e.path||"/",...t),e.with({path:i})},t.normalizePath=function(e){if(!e.path.length)return e;let t;return t=e.scheme===o.Schemas.file?n.URI.file(r.normalize(u(e))).path:r.posix.normalize(e.path),e.with({path:t})},t.isAbsolutePath=function(e){return!!e.path&&"/"===e.path[0]},t.hasTrailingPathSeparator=p,t.removeTrailingPathSeparator=function(e,t=r.sep){return p(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e},t.addTrailingPathSeparator=function(e,t=r.sep){let n=!1;if(e.scheme===o.Schemas.file){const r=u(e);n=void 0!==r&&r.length===i.getRoot(r).length&&r[r.length-1]===t}else{t="/";const i=e.path
;n=1===i.length&&47===i.charCodeAt(i.length-1)}return n||p(e,t)?e:e.with({path:e.path+"/"})},t.relativePath=m,t.resolvePath=function(e,t){if(e.scheme===o.Schemas.file){const i=n.URI.file(r.resolve(u(e),t));return e.with({authority:i.authority,path:i.path})}return-1===t.indexOf("/")&&(t=i.toSlashes(t),/^[a-zA-Z]:(\/|$)/.test(t)&&(t="/"+t)),e.with({path:r.posix.resolve(e.path,t)})},t.distinctParents=function(e,t){const i=[];for(let r=0;r<e.length;r++){const n=t(e[r]);e.some((e,i)=>i!==r&&d(n,t(e)))||i.push(e[r])}return i},function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(e=>{const[t,r]=e.split(":");t&&r&&i.set(t,r)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&i.set(e.META_DATA_MIME,r),i}}(t.DataUri||(t.DataUri={}));t.ResourceGlobMatcher=class{constructor(e,t){
this.expressionsByRoot=c.TernarySearchTree.forUris(),this.globalExpression=l.parse(e);for(const e of t)this.expressionsByRoot.set(e.root,{root:e.root,expression:l.parse(e.expression)})}matches(e){const t=this.expressionsByRoot.findSubstr(e);if(t){const i=m(t.root,e);if(i&&t.expression(i))return!0}return!!this.globalExpression(e.path)}},t.toLocalResource=function(e,t){if(t){let i=e.path;return i&&i[0]!==r.posix.sep&&(i=r.posix.sep+i),e.with({scheme:o.Schemas.vscodeRemote,authority:t,path:i})}return e.with({scheme:o.Schemas.file})}})),define(e[43],t([0,1,14,2,13,22,15,18]),(function(e,t,i,r,n,s,o,a){"use strict";function l(e){return!(!o.isWindows||!e||":"!==e[1])}function c(e){return l(e)?e.charAt(0).toUpperCase()+e.slice(1):e}Object.defineProperty(t,"__esModule",{value:!0}),t.splitName=t.unmnemonicLabel=t.mnemonicButtonLabel=t.mnemonicMenuLabel=t.template=t.shorten=t.untildify=t.tildify=t.normalizeDriveLetter=t.getBaseLabel=t.getPathLabel=void 0,t.getPathLabel=function(e,t,n){
if("string"==typeof e&&(e=i.URI.file(e)),n){const t=n.getWorkspaceFolder(e);if(t){const i=n.getWorkspace().folders.length>1;let r;if(r=a.isEqual(t.uri,e)?"":a.relativePath(t.uri,e),i){const e=t.name?t.name:a.basename(t.uri);r=r?e+" • "+r:e}return r}}if(e.scheme!==s.Schemas.file&&e.scheme!==s.Schemas.untitled)return e.with({query:null,fragment:null}).toString(!0);if(l(e.fsPath))return r.normalize(c(e.fsPath));let u=r.normalize(e.fsPath);return!o.isWindows&&(null==t?void 0:t.userHome)&&(u=h(u,t.userHome.fsPath)),u},t.getBaseLabel=function(e){if(!e)return;"string"==typeof e&&(e=i.URI.file(e));const t=a.basename(e)||(e.scheme===s.Schemas.file?e.fsPath:e.path);return l(t)?c(t):t},t.normalizeDriveLetter=c;let u=Object.create(null);function h(e,t){if(o.isWindows||!e||!t)return e;let i=u.original===t?u.normalized:void 0;return i||(i=`${n.rtrim(t,r.posix.sep)}${r.posix.sep}`,u={original:t,normalized:i}),(o.isLinux?e.startsWith(i):n.startsWithIgnoreCase(e,i))&&(e=`~/${e.substr(i.length)}`),e}t.tildify=h,
t.untildify=function(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)};const d="…",f="\\\\",g="~";var p;t.shorten=function(e,t=r.sep){const i=new Array(e.length);let n=!1;for(let r=0;r<e.length;r++){let s=e[r];if(""===s){i[r]=`.${t}`;continue}if(!s){i[r]=s;continue}n=!0;let o="";0===s.indexOf(f)?(o=s.substr(0,s.indexOf(f)+f.length),s=s.substr(s.indexOf(f)+f.length)):0===s.indexOf(t)?(o=s.substr(0,s.indexOf(t)+t.length),s=s.substr(s.indexOf(t)+t.length)):0===s.indexOf(g)&&(o=s.substr(0,s.indexOf(g)+g.length),s=s.substr(s.indexOf(g)+g.length));const a=s.split(t);for(let s=1;n&&s<=a.length;s++)for(let l=a.length-s;n&&l>=0;l--){n=!1;let c=a.slice(l,l+s).join(t);for(let i=0;!n&&i<e.length;i++)if(i!==r&&e[i]&&e[i].indexOf(c)>-1){const r=l+s===a.length,o=l>0&&e[i].indexOf(t)>-1?t+c:c,u=e[i].endsWith(o);n=!r||u}if(!n){let e="";(a[0].endsWith(":")||""!==o)&&(1===l&&(l=0,s++,c=a[0]+t+c),l>0&&(e=a[0]+t),e=o+e),l>0&&(e=e+d+t),e+=c,l+s<a.length&&(e=e+t+d),i[r]=e}}n&&(i[r]=s)}return i},function(e){e[e.TEXT=0]="TEXT",
e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"}(p||(p={})),t.template=function(e,t=Object.create(null)){const i=[];let r=!1,n="";for(const s of e)if("$"===s||r&&"{"===s)n&&i.push({value:n,type:p.TEXT}),n="",r=!0;else if("}"===s&&r){const e=t[n];if("string"==typeof e)e.length&&i.push({value:e,type:p.VARIABLE});else if(e){const t=i[i.length-1];t&&t.type===p.SEPARATOR||i.push({value:e.label,type:p.SEPARATOR})}n="",r=!1}else n+=s;return n&&!r&&i.push({value:n,type:p.TEXT}),i.filter((e,t)=>{if(e.type===p.SEPARATOR){return[i[t-1],i[t+1]].every(e=>e&&(e.type===p.VARIABLE||e.type===p.TEXT)&&e.value.length>0)}return!0}).map(e=>e.value).join("")},t.mnemonicMenuLabel=function(e,t){return o.isMacintosh||t?e.replace(/\(&&\w\)|&&/g,"").replace(/&/g,o.isMacintosh?"&":"&&"):e.replace(/&&|&/g,e=>"&"===e?"&&":"&")},t.mnemonicButtonLabel=function(e,t){return o.isMacintosh||t?e.replace(/\(&&\w\)|&&/g,""):o.isWindows?e.replace(/&&|&/g,e=>"&"===e?"&&":"&"):e.replace(/&&/g,"_")},t.unmnemonicLabel=function(e){
return e.replace(/&/g,"&&")},t.splitName=function(e){const t=-1!==e.indexOf("/")?r.posix:r.win32,i=t.basename(e),n=t.dirname(e);return i.length?{name:i,parentPath:n}:{name:n,parentPath:""}}})),define(e[44],t([0,1,120]),(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineDecoder=void 0;t.LineDecoder=class{constructor(e="utf8"){this.stringDecoder=new i.StringDecoder(e),this.remaining=null}write(e){const t=[],i=this.remaining?this.remaining+this.stringDecoder.write(e):this.stringDecoder.write(e);if(i.length<1)return t;let r,n=0,s=n;for(;s<i.length;)if(13===(r=i.charCodeAt(s))||10===r){if(t.push(i.substring(n,s)),++s<i.length){const e=r;r=i.charCodeAt(s),(13===e&&10===r||10===e&&13===r)&&s++}n=s}else s++;return this.remaining=n<i.length?i.substr(n):null,t}end(){return this.remaining}}})),define(e[63],t([0,1,23]),(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultUserDataPath=t.getAppDataPath=void 0
;const r=i.getPathFromAmdModule(e,"paths"),n=e.__$__nodeRequire(r);t.getAppDataPath=n.getAppDataPath,t.getDefaultUserDataPath=n.getDefaultUserDataPath})),define(e[64],t([0,1,24,13,2,8,45]),(function(e,t,i,r,n,s,o){"use strict";function a(e){return r.rtrim(n.normalize(e),n.sep)}Object.defineProperty(t,"__esModule",{value:!0}),t.realpathSync=t.realpath=t.realcaseSync=void 0,t.realcaseSync=function e(t){const i=n.dirname(t);if(t===i)return t;const r=(n.basename(t)||t).toLowerCase();try{const t=s.readdirSync(i).filter(e=>e.toLowerCase()===r);if(1===t.length){const r=e(i);if(r)return n.join(r,t[0])}else if(t.length>1){const s=t.indexOf(r);if(s>=0){const r=e(i);if(r)return n.join(r,t[s])}}}catch(e){}return null},t.realpath=async function(e){try{return await o.promisify(i.realpath)(e)}catch(t){const r=a(e);return await o.promisify(i.access)(r,i.constants.R_OK),r}},t.realpathSync=function(e){try{return i.realpathSync(e)}catch(t){const r=a(e);return i.accessSync(r,i.constants.R_OK),r}}})),
define(e[65],t([0,1,2,24,15,121,3,8]),(function(e,t,i,r,n,s,o,a){"use strict";function l(e,c,u){const h=i.basename(e.path),d=new Map;let f=!1,g=[o.toDisposable(()=>{d.forEach(e=>o.dispose(e)),d.clear()})];try{const p=r.watch(e.path);g.push(o.toDisposable(()=>{p.removeAllListeners(),p.close()}));const m=new Set;e.isDirectory&&a.readdir(e.path).then(e=>e.forEach(e=>m.add(e))),p.on("error",(t,i)=>{f||u(`Failed to watch ${e.path} for changes using fs.watch() (${t}, ${i})`)}),p.on("change",(r,p)=>{if(f)return;let v="";if(p&&(v=p.toString(),n.isMacintosh&&(v=s.normalizeNFC(v))),!v||"change"!==r&&"rename"!==r)return;const y=e.isDirectory?i.join(e.path,v):e.path;if(e.isDirectory)if("rename"===r){const e=d.get(y);e&&o.dispose(e);const i=setTimeout(async()=>{d.delete(y);const e=await a.exists(y);if(f)return;let t;e?m.has(v)?t="changed":(t="added",m.add(v)):(m.delete(v),t="deleted"),c(t,y)},t.CHANGE_BUFFER_DELAY);d.set(y,o.toDisposable(()=>clearTimeout(i)))}else{let e;m.has(v)?e="changed":(e="added",m.add(v)),c(e,y)
}else if("rename"===r||v!==h){const i=setTimeout(async()=>{const t=await a.exists(y);f||(t?(c("changed",y),g=[l(e,c,u)]):c("deleted",y))},t.CHANGE_BUFFER_DELAY);o.dispose(g),g=[o.toDisposable(()=>clearTimeout(i))]}else c("changed",y)})}catch(t){a.exists(e.path).then(i=>{i&&!f&&u(`Failed to watch ${e.path} for changes using fs.watch() (${t.toString()})`)})}return o.toDisposable(()=>{f=!0,g=o.dispose(g)})}Object.defineProperty(t,"__esModule",{value:!0}),t.CHANGE_BUFFER_DELAY=t.watchFolder=t.watchFile=void 0,t.watchFile=function(e,t,i){return l({path:e,isDirectory:!1},t,i)},t.watchFolder=function(e,t,i){return l({path:e,isDirectory:!0},t,i)},t.CHANGE_BUFFER_DELAY=100})),define(e[34],t([0,1,9,3,12,28,25,16,17,6]),(function(e,t,i,r,n,s,o,a,l,c){"use strict";var u,h;Object.defineProperty(t,"__esModule",{value:!0}),t.StaticRouter=t.getNextTickChannel=t.getDelayedChannel=t.IPCClient=t.IPCServer=t.ChannelClient=t.ChannelServer=t.ResponseType=t.RequestType=void 0,function(e){e[e.Promise=100]="Promise",
e[e.PromiseCancel=101]="PromiseCancel",e[e.EventListen=102]="EventListen",e[e.EventDispose=103]="EventDispose"}(t.RequestType||(t.RequestType={})),function(e){e[e.Initialize=200]="Initialize",e[e.PromiseSuccess=201]="PromiseSuccess",e[e.PromiseError=202]="PromiseError",e[e.PromiseErrorObj=203]="PromiseErrorObj",e[e.EventFire=204]="EventFire"}(t.ResponseType||(t.ResponseType={})),function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Idle=1]="Idle"}(u||(u={}));class d{constructor(e){this.buffer=e,this.pos=0}read(e){const t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=t.byteLength,t}}class f{constructor(){this.buffers=[]}get buffer(){return a.VSBuffer.concat(this.buffers)}write(e){this.buffers.push(e)}}function g(e){const t=a.VSBuffer.alloc(4);return t.writeUInt32BE(e,0),t}function p(e){return e.read(4).readUInt32BE(0)}function m(e){const t=a.VSBuffer.alloc(1);return t.writeUInt8(e,0),t}!function(e){e[e.Undefined=0]="Undefined",e[e.String=1]="String",e[e.Buffer=2]="Buffer",e[e.VSBuffer=3]="VSBuffer",
e[e.Array=4]="Array",e[e.Object=5]="Object"}(h||(h={}));const v={Undefined:m(h.Undefined),String:m(h.String),Buffer:m(h.Buffer),VSBuffer:m(h.VSBuffer),Array:m(h.Array),Object:m(h.Object)},y="undefined"!=typeof Buffer;function E(e,t){if(void 0===t)e.write(v.Undefined);else if("string"==typeof t){const i=a.VSBuffer.fromString(t);e.write(v.String),e.write(g(i.byteLength)),e.write(i)}else if(y&&Buffer.isBuffer(t)){const i=a.VSBuffer.wrap(t);e.write(v.Buffer),e.write(g(i.byteLength)),e.write(i)}else if(t instanceof a.VSBuffer)e.write(v.VSBuffer),e.write(g(t.byteLength)),e.write(t);else if(Array.isArray(t)){e.write(v.Array),e.write(g(t.length));for(const i of t)E(e,i)}else{const i=a.VSBuffer.fromString(JSON.stringify(t));e.write(v.Object),e.write(g(i.byteLength)),e.write(i)}}function S(e){switch(e.read(1).readUInt8(0)){case h.Undefined:return;case h.String:return e.read(p(e)).toString();case h.Buffer:return e.read(p(e)).buffer;case h.VSBuffer:return e.read(p(e));case h.Array:{const t=p(e),i=[]
;for(let r=0;r<t;r++)i.push(S(e));return i}case h.Object:return JSON.parse(e.read(p(e)).toString())}}class w{constructor(e,t,i=1e3){this.protocol=e,this.ctx=t,this.timeoutDelay=i,this.channels=new Map,this.activeRequests=new Map,this.pendingRequests=new Map,this.protocolListener=this.protocol.onMessage(e=>this.onRawMessage(e)),this.sendResponse({type:200})}registerChannel(e,t){this.channels.set(e,t),setTimeout(()=>this.flushPendingRequests(e),0)}sendResponse(e){switch(e.type){case 200:return this.send([e.type]);case 201:case 202:case 204:case 203:return this.send([e.type,e.id],e.data)}}send(e,t){const i=new f;E(i,e),E(i,t),this.sendBuffer(i.buffer)}sendBuffer(e){try{this.protocol.send(e)}catch(e){}}onRawMessage(e){const t=new d(e),i=S(t),r=S(t),n=i[0];switch(n){case 100:return this.onPromise({type:n,id:i[1],channelName:i[2],name:i[3],arg:r});case 102:return this.onEventListen({type:n,id:i[1],channelName:i[2],name:i[3],arg:r});case 101:case 103:return this.disposeActiveRequest({type:n,id:i[1]})}}onPromise(e){
const t=this.channels.get(e.channelName);if(!t)return void this.collectPendingRequest(e);const i=new s.CancellationTokenSource;let n;try{n=t.call(this.ctx,e.name,e.arg,i.token)}catch(e){n=Promise.reject(e)}const o=e.id;n.then(t=>{this.sendResponse({id:o,data:t,type:201}),this.activeRequests.delete(e.id)},t=>{t instanceof Error?this.sendResponse({id:o,data:{message:t.message,name:t.name,stack:t.stack?t.stack.split?t.stack.split("\n"):t.stack:void 0},type:202}):this.sendResponse({id:o,data:t,type:203}),this.activeRequests.delete(e.id)});const a=r.toDisposable(()=>i.cancel());this.activeRequests.set(e.id,a)}onEventListen(e){const t=this.channels.get(e.channelName);if(!t)return void this.collectPendingRequest(e);const i=e.id,r=t.listen(this.ctx,e.name,e.arg)(e=>this.sendResponse({id:i,data:e,type:204}));this.activeRequests.set(e.id,r)}disposeActiveRequest(e){const t=this.activeRequests.get(e.id);t&&(t.dispose(),this.activeRequests.delete(e.id))}collectPendingRequest(e){
let t=this.pendingRequests.get(e.channelName);t||(t=[],this.pendingRequests.set(e.channelName,t));const i=setTimeout(()=>{console.error(`Unknown channel: ${e.channelName}`),100===e.type&&this.sendResponse({id:e.id,data:{name:"Unknown channel",message:`Channel name '${e.channelName}' timed out after ${this.timeoutDelay}ms`,stack:void 0},type:202})},this.timeoutDelay);t.push({request:e,timeoutTimer:i})}flushPendingRequests(e){const t=this.pendingRequests.get(e);if(t){for(const e of t)switch(clearTimeout(e.timeoutTimer),e.request.type){case 100:this.onPromise(e.request);break;case 102:this.onEventListen(e.request)}this.pendingRequests.delete(e)}}dispose(){this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),this.activeRequests.forEach(e=>e.dispose()),this.activeRequests.clear()}}t.ChannelServer=w;class b{constructor(e){this.protocol=e,this.state=u.Uninitialized,this.activeRequests=new Set,this.handlers=new Map,this.lastRequestId=0,this._onDidInitialize=new i.Emitter,
this.onDidInitialize=this._onDidInitialize.event,this.protocolListener=this.protocol.onMessage(e=>this.onBuffer(e))}getChannel(e){const t=this;return{call:(i,r,n)=>t.requestPromise(e,i,r,n),listen:(i,r)=>t.requestEvent(e,i,r)}}requestPromise(e,t,i,a=s.CancellationToken.None){const l=this.lastRequestId++,c={id:l,type:100,channelName:e,name:t,arg:i};if(a.isCancellationRequested)return Promise.reject(o.canceled());let u;return new Promise((e,t)=>{if(a.isCancellationRequested)return t(o.canceled());let i=n.createCancelablePromise(e=>this.whenInitialized());i.then(()=>{i=null;this.handlers.set(l,i=>{switch(i.type){case 201:this.handlers.delete(l),e(i.data);break;case 202:this.handlers.delete(l);const r=new Error(i.data.message);r.stack=i.data.stack,r.name=i.data.name,t(r);break;case 203:this.handlers.delete(l),t(i.data)}}),this.sendRequest(c)});const s=()=>{i?(i.cancel(),i=null):this.sendRequest({id:l,type:101}),t(o.canceled())},h=a.onCancellationRequested(s);u=r.combinedDisposable(r.toDisposable(s),h),
this.activeRequests.add(u)}).finally(()=>{this.activeRequests.delete(u)})}requestEvent(e,t,r){const s=this.lastRequestId++,o={id:s,type:102,channelName:e,name:t,arg:r};let a=null;const l=new i.Emitter({onFirstListenerAdd:()=>{(a=n.createCancelablePromise(e=>this.whenInitialized())).then(()=>{a=null,this.activeRequests.add(l),this.sendRequest(o)})},onLastListenerRemove:()=>{a?(a.cancel(),a=null):(this.activeRequests.delete(l),this.sendRequest({id:s,type:103}))}});return this.handlers.set(s,e=>l.fire(e.data)),l.event}sendRequest(e){switch(e.type){case 100:case 102:return this.send([e.type,e.id,e.channelName,e.name],e.arg);case 101:case 103:return this.send([e.type,e.id])}}send(e,t){const i=new f;E(i,e),E(i,t),this.sendBuffer(i.buffer)}sendBuffer(e){try{this.protocol.send(e)}catch(e){}}onBuffer(e){const t=new d(e),i=S(t),r=S(t);switch(i[0]){case 200:return this.onResponse({type:i[0]});case 201:case 202:case 204:case 203:return this.onResponse({type:i[0],id:i[1],data:r})}}onResponse(e){
if(200===e.type)return this.state=u.Idle,void this._onDidInitialize.fire();const t=this.handlers.get(e.id);t&&t(e)}whenInitialized(){return this.state===u.Idle?Promise.resolve():i.Event.toPromise(this.onDidInitialize)}dispose(){this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),this.activeRequests.forEach(e=>e.dispose()),this.activeRequests.clear()}}t.ChannelClient=b;t.IPCServer=class{constructor(e){this.channels=new Map,this._connections=new Set,this._onDidAddConnection=new i.Emitter,this.onDidAddConnection=this._onDidAddConnection.event,this._onDidRemoveConnection=new i.Emitter,this.onDidRemoveConnection=this._onDidRemoveConnection.event,e(({protocol:e,onDidClientDisconnect:t})=>{i.Event.once(e.onMessage)(i=>{const r=S(new d(i)),n=new w(e,r),s=new b(e);this.channels.forEach((e,t)=>n.registerChannel(t,e));const o={channelServer:n,channelClient:s,ctx:r};this._connections.add(o),this._onDidAddConnection.fire(o),t(()=>{n.dispose(),s.dispose(),this._connections.delete(o),
this._onDidRemoveConnection.fire(o)})})})}get connections(){const e=[];return this._connections.forEach(t=>e.push(t)),e}getChannel(e,t){const r=this;return{call(n,s,o){let a;if(c.isFunction(t)){let e=l.getRandomElement(r.connections.filter(t));a=e?Promise.resolve(e):i.Event.toPromise(i.Event.filter(r.onDidAddConnection,t))}else a=t.routeCall(r,n,s);return C(a.then(t=>t.channelClient.getChannel(e))).call(n,s,o)},listen(i,n){if(c.isFunction(t))return r.getMulticastEvent(e,t,i,n);return C(t.routeEvent(r,i,n).then(t=>t.channelClient.getChannel(e))).listen(i,n)}}}getMulticastEvent(e,t,n,s){const o=this;let a=new r.DisposableStore;const l=new i.Emitter({onFirstListenerAdd:()=>{a=new r.DisposableStore;const c=new i.EventMultiplexer,u=new Map,h=t=>{const i=t.channelClient.getChannel(e).listen(n,s),r=c.add(i);u.set(t,r)};o.connections.filter(t).forEach(h),i.Event.filter(o.onDidAddConnection,t)(h,void 0,a),o.onDidRemoveConnection(e=>{const t=u.get(e);t&&(t.dispose(),u.delete(e))},void 0,a),c.event(l.fire,l,a),a.add(c)
},onLastListenerRemove:()=>{a.dispose()}});return l.event}registerChannel(e,t){this.channels.set(e,t),this._connections.forEach(i=>{i.channelServer.registerChannel(e,t)})}dispose(){this.channels.clear(),this._connections.clear(),this._onDidAddConnection.dispose(),this._onDidRemoveConnection.dispose()}};function C(e){return{call:(t,i,r)=>e.then(e=>e.call(t,i,r)),listen(t,r){const n=new i.Relay;return e.then(e=>n.input=e.listen(t,r)),n.event}}}t.IPCClient=class{constructor(e,t){const i=new f;E(i,t),e.send(i.buffer),this.channelClient=new b(e),this.channelServer=new w(e,t)}getChannel(e){return this.channelClient.getChannel(e)}registerChannel(e,t){this.channelServer.registerChannel(e,t)}dispose(){this.channelClient.dispose(),this.channelServer.dispose()}},t.getDelayedChannel=C,t.getNextTickChannel=function(e){let t=!1;return{call:(i,r,s)=>t?e.call(i,r,s):n.timeout(0).then(()=>t=!0).then(()=>e.call(i,r,s)),listen(r,s){if(t)return e.listen(r,s);const o=new i.Relay
;return n.timeout(0).then(()=>t=!0).then(()=>o.input=e.listen(r,s)),o.event}}};t.StaticRouter=class{constructor(e){this.fn=e}routeCall(e){return this.route(e)}routeEvent(e){return this.route(e)}async route(e){for(const t of e.connections)if(await Promise.resolve(this.fn(t.ctx)))return Promise.resolve(t);return await i.Event.toPromise(e.onDidAddConnection),await this.route(e)}}})),define(e[66],t([7,5]),(function(e,t){return e.create("vs/base/common/date",t)})),define(e[67],t([0,1,13,66]),(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalISOString=t.fromNow=void 0;const n=60,s=60*n,o=24*s,a=7*o,l=30*o,c=365*o;t.fromNow=function e(t,i){"number"!=typeof t&&(t=t.getTime());const u=Math.round(((new Date).getTime()-t)/1e3);if(u<-30)return r.localize(0,null,e((new Date).getTime()+1e3*u,!1));if(u<30)return r.localize(1,null);let h;return u<n?(h=u,i?1===h?r.localize(2,null,h):r.localize(3,null,h):1===h?r.localize(4,null,h):r.localize(5,null,h)):u<s?(h=Math.floor(u/n),
i?1===h?r.localize(6,null,h):r.localize(7,null,h):1===h?r.localize(8,null,h):r.localize(9,null,h)):u<o?(h=Math.floor(u/s),i?1===h?r.localize(10,null,h):r.localize(11,null,h):1===h?r.localize(12,null,h):r.localize(13,null,h)):u<a?(h=Math.floor(u/o),i?1===h?r.localize(14,null,h):r.localize(15,null,h):1===h?r.localize(16,null,h):r.localize(17,null,h)):u<l?(h=Math.floor(u/a),i?1===h?r.localize(18,null,h):r.localize(19,null,h):1===h?r.localize(20,null,h):r.localize(21,null,h)):u<c?(h=Math.floor(u/l),i?1===h?r.localize(22,null,h):r.localize(23,null,h):1===h?r.localize(24,null,h):r.localize(25,null,h)):(h=Math.floor(u/c),i?1===h?r.localize(26,null,h):r.localize(27,null,h):1===h?r.localize(28,null,h):r.localize(29,null,h))},t.toLocalISOString=function(e){return e.getFullYear()+"-"+i.pad(e.getMonth()+1,2)+"-"+i.pad(e.getDate(),2)+"T"+i.pad(e.getHours(),2)+":"+i.pad(e.getMinutes(),2)+":"+i.pad(e.getSeconds(),2)+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}})),define(e[68],t([7,5]),(function(e,t){
return e.create("vs/base/common/errorMessage",t)})),define(e[35],t([0,1,68,6,17]),(function(e,t,i,r,n){"use strict";function s(e,t){return t&&(e.stack||e.stacktrace)?i.localize(0,null,a(e),o(e.stack)||o(e.stacktrace)):a(e)}function o(e){return Array.isArray(e)?e.join("\n"):e}function a(e){return"string"==typeof e.code&&"number"==typeof e.errno&&"string"==typeof e.syscall?i.localize(1,null,e.message):e.message||i.localize(2,null)}Object.defineProperty(t,"__esModule",{value:!0}),t.toErrorMessage=void 0,t.toErrorMessage=function e(t=null,o=!1){if(!t)return i.localize(3,null);if(Array.isArray(t)){const r=n.coalesce(t),s=e(r[0],o);return r.length>1?i.localize(4,null,s,r.length):s}if(r.isString(t))return t;if(t.detail){const e=t.detail;if(e.error)return s(e.error,o);if(e.exception)return s(e.exception,o)}return t.stack?s(t,o):t.message?t.message:i.localize(5,null)}})),define(e[69],t([7,5]),(function(e,t){return e.create("vs/base/node/processes",t)})),
define(e[70],t([0,1,2,24,45,36,69,6,11,33,15,44,23]),(function(e,t,i,r,n,s,o,a,l,c,u,h,d){"use strict";function f(e){switch(e){case 0:return 0;case 1:return 2;case 128:return 3;default:return 1}}function g(){return process.env.comspec||"cmd.exe"}Object.defineProperty(t,"__esModule",{value:!0}),t.win32=t.createQueuedSender=t.LineProcess=t.AbstractProcess=t.getWindowsShell=t.TerminateResponseCode=t.Source=void 0,t.getWindowsShell=g;let p=(()=>{class t{constructor(e,t,i,r){if(void 0!==t&&void 0!==i&&void 0!==r)this.cmd=e,this.args=t,this.shell=i,this.options=r;else{const t=e;this.cmd=t.command,this.shell=t.isShellCommand,this.args=t.args.slice(0),this.options=t.options||{}}if(this.childProcess=null,this.childProcessPromise=null,this.terminateRequested=!1,this.options.env){const e=Object.create(null);Object.keys(process.env).forEach(t=>{e[t]=process.env[t]}),Object.keys(this.options.env).forEach(t=>{e[t]=this.options.env[t]}),this.options.env=e}}getSanitizedCommand(){let e=this.cmd.toLowerCase()
;const r=e.lastIndexOf(i.sep);return-1!==r&&(e=e.substring(r+1)),t.WellKnowCommands[e]?e:"other"}start(e){return u.isWindows&&(this.options&&this.options.cwd&&c.isUNC(this.options.cwd)||!this.options&&c.isUNC(process.cwd()))?Promise.reject(new Error(o.localize(0,null))):this.useExec().then(t=>{let i,r;const n=new Promise((e,t)=>{i=e,r=t});if(t){let t=this.cmd;this.args&&(t=t+" "+this.args.join(" ")),this.childProcess=s.exec(t,this.options,(t,n,s)=>{this.childProcess=null;t&&t.killed?r({killed:this.terminateRequested,stdout:n.toString(),stderr:s.toString()}):this.handleExec(i,e,t,n,s)})}else{let t=null;const n=t=>{this.childProcess=null,this.childProcessPromise=null,this.handleClose(t,i,e,r);const n={terminated:this.terminateRequested};a.isNumber(t)&&(n.cmdCode=t),i(n)};if(this.shell&&u.isWindows){const e=l.deepClone(this.options);e.windowsVerbatimArguments=!0,e.detached=!1;let i=!1,r=!1;const n=[];let o=this.ensureQuotes(this.cmd);n.push(o.value),i=o.quoted,this.args&&this.args.forEach(e=>{
o=this.ensureQuotes(e),n.push(o.value),r=r&&o.quoted});const a=["/s","/c"];i?r?a.push('"'+n.join(" ")+'"'):n.length>1?a.push('"'+n[0]+'" '+n.slice(1).join(" ")):a.push('"'+n[0]+'"'):a.push(n.join(" ")),t=s.spawn(g(),a,e)}else this.cmd&&(t=s.spawn(this.cmd,this.args,this.options));t&&(this.childProcess=t,this.childProcessPromise=Promise.resolve(t),this.pidResolve&&(this.pidResolve(a.isNumber(t.pid)?t.pid:-1),this.pidResolve=void 0),t.on("error",e=>{this.childProcess=null,r({terminated:this.terminateRequested,error:e})}),t.pid&&(this.childProcess.on("close",n),this.handleSpawn(t,i,e,r,!0)))}return n})}handleClose(e,t,i,r){}ensureQuotes(e){return t.regexp.test(e)?{value:'"'+e+'"',quoted:!0}:{value:e,quoted:e.length>0&&'"'===e[0]&&'"'===e[e.length-1]}}get pid(){return this.childProcessPromise?this.childProcessPromise.then(e=>e.pid,e=>-1):new Promise(e=>{this.pidResolve=e})}terminate(){return this.childProcessPromise?this.childProcessPromise.then(t=>(this.terminateRequested=!0,function(t,i){if(u.isWindows)try{
const e={stdio:["pipe","pipe","ignore"]};i&&(e.cwd=i);const r=s.execFile("taskkill",["/T","/F","/PID",t.pid.toString()],e);return new Promise((e,t)=>{r.once("error",t=>{e({success:!1,error:t})}),r.once("exit",(t,i)=>{e(0===t?{success:!0}:{success:!1,code:null!==t?t:1})})})}catch(e){return Promise.resolve({success:!1,error:e,code:e.status?f(e.status):1})}else if(u.isLinux||u.isMacintosh)try{const i=d.getPathFromAmdModule(e,"vs/base/node/terminateProcess.sh");return new Promise((e,r)=>{s.execFile(i,[t.pid.toString()],{encoding:"utf8",shell:!0},(t,i,r)=>{e(t?{success:!1,error:t}:{success:!0})})})}catch(e){return Promise.resolve({success:!1,error:e})}else t.kill("SIGKILL");return Promise.resolve({success:!0})}(t,this.options.cwd).then(e=>(e.success&&(this.childProcess=null),e))),e=>({success:!0})):Promise.resolve({success:!0})}useExec(){return new Promise((e,t)=>{if(!this.shell||!u.isWindows)return e(!1);const i=s.spawn(g(),["/s","/c"]);i.on("error",t=>e(!0)),i.on("exit",t=>e(!1))})}}return t.WellKnowCommands={
ant:!0,cmake:!0,eslint:!0,gradle:!0,grunt:!0,gulp:!0,jake:!0,jenkins:!0,jshint:!0,make:!0,maven:!0,msbuild:!0,msc:!0,nmake:!0,npm:!0,rake:!0,tsc:!0,xbuild:!0},t.regexp=/^[^"].* .*[^"]/,t})();t.AbstractProcess=p;t.LineProcess=class extends p{constructor(e,t,i,r){super(e,t,i,r),this.stdoutLineDecoder=null,this.stderrLineDecoder=null}handleExec(e,t,i,r,n){[r,n].forEach((e,i)=>{const r=new h.LineDecoder;r.write(e).forEach(e=>{t({line:e,source:0===i?0:1})});const n=r.end();n&&t({line:n,source:0===i?0:1})}),e({terminated:this.terminateRequested,error:i})}handleSpawn(e,t,i,r,n){const s=new h.LineDecoder,o=new h.LineDecoder;e.stdout.on("data",e=>{s.write(e).forEach(e=>i({line:e,source:0}))}),e.stderr.on("data",e=>{o.write(e).forEach(e=>i({line:e,source:1}))}),this.stdoutLineDecoder=s,this.stderrLineDecoder=o}handleClose(e,t,i,r){const n=this.stdoutLineDecoder?this.stdoutLineDecoder.end():null;n&&i({line:n,source:0});const s=this.stderrLineDecoder?this.stderrLineDecoder.end():null;s&&i({line:s,source:1})}},
t.createQueuedSender=function(e){let t=[],i=!1;const r=function(n){if(i)return void t.push(n);e.send(n,e=>{if(e&&console.error(e),i=!1,t.length>0){const e=t.slice(0);t=[],e.forEach(e=>r(e))}})&&!u.isWindows||(i=!0)};return{send:r}},function(e){e.findExecutable=async function(e,t,s){if(i.isAbsolute(e))return e;if(void 0===t&&(t=process.cwd()),"."!==i.dirname(e))return i.join(t,e);if(void 0===s&&a.isString(process.env.PATH)&&(s=process.env.PATH.split(i.delimiter)),void 0===s||0===s.length)return i.join(t,e);async function o(e){return!!await n.promisify(r.exists)(e)&&!(await n.promisify(r.stat)(e)).isDirectory}for(let r of s){let n;if(n=i.isAbsolute(r)?i.join(r,e):i.join(t,r,e),await o(n))return n;let s=n+".com";if(await o(s))return s;if(s=n+".exe",await o(s))return s}return i.join(t,e)}}(t.win32||(t.win32={}))})),define(e[46],t([0,1,36,3,12,11,9,70,34,62,28,25,16]),(function(e,t,i,r,n,s,o,a,l,c,u,h,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=t.Server=void 0
;class f extends l.ChannelServer{constructor(e){super({send:e=>{try{process.send&&process.send(e.buffer.toString("base64"))}catch(e){}},onMessage:o.Event.fromNodeEventEmitter(process,"message",e=>d.VSBuffer.wrap(Buffer.from(e,"base64")))},e),process.once("disconnect",()=>this.dispose())}}t.Server=f;t.Client=class{constructor(e,t){this.modulePath=e,this.options=t,this.activeRequests=new Set,this.channels=new Map,this._onDidProcessExit=new o.Emitter,this.onDidProcessExit=this._onDidProcessExit.event;const i=t&&t.timeout?t.timeout:6e4;this.disposeDelayer=new n.Delayer(i),this.child=null,this._client=null}getChannel(e){const t=this;return{call:(i,r,n)=>t.requestPromise(e,i,r,n),listen:(i,r)=>t.requestEvent(e,i,r)}}requestPromise(e,t,i,s=u.CancellationToken.None){if(!this.disposeDelayer)return Promise.reject(new Error("disposed"));if(s.isCancellationRequested)return Promise.reject(h.canceled());this.disposeDelayer.cancel()
;const o=this.getCachedChannel(e),a=n.createCancelablePromise(e=>o.call(t,i,e)),l=s.onCancellationRequested(()=>a.cancel()),c=r.toDisposable(()=>a.cancel());return this.activeRequests.add(c),a.finally(()=>{l.dispose(),this.activeRequests.delete(c),0===this.activeRequests.size&&this.disposeDelayer&&this.disposeDelayer.trigger(()=>this.disposeClient())}),a}requestEvent(e,t,i){if(!this.disposeDelayer)return o.Event.None;let r;this.disposeDelayer.cancel();const n=new o.Emitter({onFirstListenerAdd:()=>{const s=this.getCachedChannel(e).listen(t,i);r=s(n.fire,n),this.activeRequests.add(r)},onLastListenerRemove:()=>{this.activeRequests.delete(r),r.dispose(),0===this.activeRequests.size&&this.disposeDelayer&&this.disposeDelayer.trigger(()=>this.disposeClient())}});return n.event}get client(){if(!this._client){const e=this.options&&this.options.args?this.options.args:[],t=Object.create(null);t.env=s.assign(s.deepClone(process.env),{VSCODE_PARENT_PID:String(process.pid)}),
this.options&&this.options.env&&(t.env=s.assign(t.env,this.options.env)),this.options&&this.options.freshExecArgv&&(t.execArgv=[]),this.options&&"number"==typeof this.options.debug&&(t.execArgv=["--nolazy","--inspect="+this.options.debug]),this.options&&"number"==typeof this.options.debugBrk&&(t.execArgv=["--nolazy","--inspect-brk="+this.options.debugBrk]),this.child=i.fork(this.modulePath,e,t);const n=new o.Emitter;o.Event.fromNodeEventEmitter(this.child,"message",e=>e)(e=>{c.isRemoteConsoleLog(e)?c.log(e,`IPC Library: ${this.options.serverName}`):n.fire(d.VSBuffer.wrap(Buffer.from(e,"base64")))});const u=this.options.useQueue?a.createQueuedSender(this.child):this.child,h={send:e=>this.child&&this.child.connected&&u.send(e.buffer.toString("base64")),onMessage:n.event};this._client=new l.ChannelClient(h);const f=()=>this.disposeClient();process.once("exit",f),this.child.on("error",e=>console.warn('IPC "'+this.options.serverName+'" errored with '+e)),this.child.on("exit",(e,t)=>{
process.removeListener("exit",f),this.activeRequests.forEach(e=>r.dispose(e)),this.activeRequests.clear(),0!==e&&"SIGTERM"!==t&&console.warn('IPC "'+this.options.serverName+'" crashed with exit code '+e+" and signal "+t),this.disposeDelayer&&this.disposeDelayer.cancel(),this.disposeClient(),this._onDidProcessExit.fire({code:e,signal:t})})}return this._client}getCachedChannel(e){let t=this.channels.get(e);return t||(t=this.client.getChannel(e),this.channels.set(e,t)),t}disposeClient(){this._client&&(this.child&&(this.child.kill(),this.child=null),this._client=null,this.channels.clear())}dispose(){this._onDidProcessExit.dispose(),this.disposeDelayer&&(this.disposeDelayer.cancel(),this.disposeDelayer=void 0),this.disposeClient(),this.activeRequests.clear()}}})),define(e[71],t([7,5]),(function(e,t){return e.create("vs/base/node/zip",t)})),define(e[72],t([7,5]),(function(e,t){return e.create("vs/platform/configuration/common/configurationRegistry",t)})),define(e[73],t([7,5]),(function(e,t){
return e.create("vs/platform/extensionManagement/common/extensionManagement",t)})),define(e[74],t([7,5]),(function(e,t){return e.create("vs/platform/extensionManagement/node/extensionManagementService",t)})),define(e[75],t([7,5]),(function(e,t){return e.create("vs/platform/extensionManagement/node/extensionManagementUtil",t)})),define(e[76],t([7,5]),(function(e,t){return e.create("vs/platform/extensions/common/extensionValidator",t)})),define(e[77],t([7,5]),(function(e,t){return e.create("vs/platform/files/common/fileService",t)})),define(e[78],t([7,5]),(function(e,t){return e.create("vs/platform/files/common/files",t)})),define(e[79],t([7,5]),(function(e,t){return e.create("vs/platform/files/common/io",t)})),define(e[80],t([7,5]),(function(e,t){return e.create("vs/platform/files/node/diskFileSystemProvider",t)})),define(e[81],t([7,5]),(function(e,t){return e.create("vs/platform/request/common/request",t)})),define(e[82],t([7,5]),(function(e,t){
return e.create("vs/platform/telemetry/common/telemetryService",t)})),define(e[83],t([0,1,11]),(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localizeManifest=void 0;const r=/^%([\w\d.-]+)%$/i;t.localizeManifest=function(e,t){return i.cloneAndChange(e,e=>{if("string"!=typeof e)return;const i=r.exec(e);return i?t[i[1]]||e:void 0})}})),define(e[84],t([0,1,3,36,35,2,12,9,22,8]),(function(e,t,i,r,n,s,o,a,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionsLifecycle=void 0;class u extends i.Disposable{constructor(e,t){super(),this.environmentService=e,this.logService=t,this.processesLimiter=new o.Limiter(5)}async postUninstall(e){const t=this.parseScript(e,"uninstall");return t&&(this.logService.info(e.identifier.id,e.manifest.version,"Running post uninstall script"),
await this.processesLimiter.queue(()=>this.runLifecycleHook(t.script,"uninstall",t.args,!0,e).then(()=>this.logService.info(e.identifier.id,e.manifest.version,"Finished running post uninstall script"),t=>this.logService.error(e.identifier.id,e.manifest.version,`Failed to run post uninstall script: ${t}`)))),c.rimraf(this.getExtensionStoragePath(e)).then(void 0,e=>this.logService.error("Error while removing extension storage path",e))}parseScript(e,t){const i=`vscode:${t}`;if(e.location.scheme===l.Schemas.file&&e.manifest&&e.manifest.scripts&&"string"==typeof e.manifest.scripts[i]){const t=e.manifest.scripts[i].split(" ");return t.length<2||"node"!==t[0]||!t[1]?(this.logService.warn(e.identifier.id,e.manifest.version,`${i} should be a node script`),null):{script:s.join(e.location.fsPath,t[1]),args:t.slice(2)||[]}}return null}runLifecycleHook(e,t,i,r,s){return new Promise((o,a)=>{const l=this.start(e,t,i,s);let c;const u=e=>{c&&(clearTimeout(c),c=null),e?a(e):o(void 0)};l.on("error",e=>{
u(n.toErrorMessage(e)||"Unknown")}),l.on("exit",(e,i)=>{u(e?`post-${t} process exited with code ${e}`:void 0)}),r&&(c=setTimeout(()=>{c=null,l.kill(),a("timed out")},5e3))})}start(e,t,i,n){const s={silent:!0,execArgv:void 0},o=r.fork(e,[`--type=extension-post-${t}`,...i],s);o.stdout.setEncoding("utf8"),o.stderr.setEncoding("utf8");const l=a.Event.fromNodeEventEmitter(o.stdout,"data"),c=a.Event.fromNodeEventEmitter(o.stderr,"data");l(e=>this.logService.info(n.identifier.id,n.manifest.version,`post-${t}`,e)),c(e=>this.logService.error(n.identifier.id,n.manifest.version,`post-${t}`,e));const u=a.Event.any(a.Event.map(l,e=>({data:`%c${e}`,format:[""]})),a.Event.map(c,e=>({data:`%c${e}`,format:["color: red"]})));return a.Event.debounce(u,(e,t)=>e?{data:e.data+t.data,format:[...e.format,...t.format]}:{data:t.data,format:t.format},100)(e=>{console.group(n.identifier.id),console.log(e.data,...e.format),console.groupEnd()}),o}getExtensionStoragePath(e){
return s.join(this.environmentService.globalStorageHome,e.identifier.id.toLowerCase())}}t.ExtensionsLifecycle=u})),define(e[47],t([0,1,76]),(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVersionValid=t.isEngineValid=t.isValidExtensionVersion=t.isValidVersion=t.normalizeVersion=t.parseVersion=t.isValidVersionStr=void 0;const r=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/;function n(e){return"*"===(e=e.trim())||r.test(e)}function s(e){if(!n(e))return null;if("*"===(e=e.trim()))return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};let t=e.match(r);return t?{hasCaret:"^"===t[1],hasGreaterEquals:">="===t[1],majorBase:"x"===t[2]?0:parseInt(t[2],10),majorMustEqual:"x"!==t[2],minorBase:"x"===t[4]?0:parseInt(t[4],10),minorMustEqual:"x"!==t[4],patchBase:"x"===t[6]?0:parseInt(t[6],10),patchMustEqual:"x"!==t[6],preRelease:t[8]||null}:null}function o(e){if(!e)return null
;let t=e.majorBase,i=e.majorMustEqual,r=e.minorBase,n=e.minorMustEqual,s=e.patchBase,o=e.patchMustEqual;return e.hasCaret&&(0===t?o=!1:(n=!1,o=!1)),{majorBase:t,majorMustEqual:i,minorBase:r,minorMustEqual:n,patchBase:s,patchMustEqual:o,isMinimum:e.hasGreaterEquals}}function a(e,t){let i,r;if(i="string"==typeof e?o(s(e)):e,r="string"==typeof t?o(s(t)):t,!i||!r)return!1;let n=i.majorBase,a=i.minorBase,l=i.patchBase,c=r.majorBase,u=r.minorBase,h=r.patchBase,d=r.majorMustEqual,f=r.minorMustEqual,g=r.patchMustEqual;return r.isMinimum?n>c||!(n<c)&&(a>u||!(a<u)&&l>=h):(1!==n||0!==c||d&&f&&g||(c=1,u=0,h=0,d=!0,f=!1,g=!1),!(n<c)&&(n>c?!d:!(a<u)&&(a>u?!f:!(l<h)&&(!(l>h)||!g))))}function l(e,t,r=[]){let n=o(s(t));if(!n)return r.push(i.localize(0,null,t)),!1;if(0===n.majorBase){if(!n.majorMustEqual||!n.minorMustEqual)return r.push(i.localize(1,null,t)),!1}else if(!n.majorMustEqual)return r.push(i.localize(2,null,t)),!1;return!!a(e,n)||(r.push(i.localize(3,null,e,t)),!1)}t.isValidVersionStr=n,t.parseVersion=s,
t.normalizeVersion=o,t.isValidVersion=a,t.isValidExtensionVersion=function(e,t,i){return!(!t.isBuiltin&&void 0!==t.main)||l(e,t.engines.vscode,i)},t.isEngineValid=function(e,t){return"*"===e||l(t,e)},t.isVersionValid=l})),define(e[37],t([0,1,13]),(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLanguagePackExtension=t.ExtensionIdentifier=t.ExtensionType=t.isIExtensionIdentifier=t.BUILTIN_MANIFEST_CACHE_FILE=t.USER_MANIFEST_CACHE_FILE=t.MANIFEST_CACHE_FOLDER=void 0,t.MANIFEST_CACHE_FOLDER="CachedExtensions",t.USER_MANIFEST_CACHE_FILE="user",t.BUILTIN_MANIFEST_CACHE_FILE="builtin",t.isIExtensionIdentifier=function(e){return e&&"object"==typeof e&&"string"==typeof e.id&&(!e.uuid||"string"==typeof e.uuid)},function(e){e[e.System=0]="System",e[e.User=1]="User"}(t.ExtensionType||(t.ExtensionType={}));t.ExtensionIdentifier=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(null==e)return null==t;if(null==t)return!1
;if("string"==typeof e||"string"==typeof t){let r="string"==typeof e?e:e.value,n="string"==typeof t?t:t.value;return i.equalsIgnoreCase(r,n)}return e._lower===t._lower}static toKey(e){return"string"==typeof e?e.toLowerCase():e._lower}},t.isLanguagePackExtension=function(e){return!(!e.contributes||!e.contributes.localizations)&&e.contributes.localizations.length>0}})),define(e[29],t([0,1,13,37]),(function(e,t,i,r){"use strict";function n(e,t){return e.uuid&&t.uuid?e.uuid===t.uuid:e.id===t.id||0===i.compareIgnoreCase(e.id,t.id)}Object.defineProperty(t,"__esModule",{value:!0}),t.getMaliciousExtensionsSet=t.BetterMergeId=t.getGalleryExtensionTelemetryData=t.getLocalExtensionTelemetryData=t.groupByExtension=t.getGalleryExtensionId=t.adoptToGalleryExtensionId=t.ExtensionIdentifierWithVersion=t.areSameExtensions=void 0,t.areSameExtensions=n;class s{constructor(e,t){this.identifier=e,this.version=t}key(){return`${this.identifier.id}-${this.version}`}equals(e){
return e instanceof s&&(n(this.identifier,e.identifier)&&this.version===e.version)}}t.ExtensionIdentifierWithVersion=s,t.adoptToGalleryExtensionId=function(e){return e.toLocaleLowerCase()},t.getGalleryExtensionId=function(e,t){return`${e.toLocaleLowerCase()}.${t.toLocaleLowerCase()}`},t.groupByExtension=function(e,t){const i=[],r=e=>{for(const r of i)if(r.some(i=>n(t(i),t(e))))return r;return null};for(const t of e){const e=r(t);e?e.push(t):i.push([t])}return i},t.getLocalExtensionTelemetryData=function(e){return{id:e.identifier.id,name:e.manifest.name,galleryId:null,publisherId:e.metadata?e.metadata.publisherId:null,publisherName:e.manifest.publisher,publisherDisplayName:e.metadata?e.metadata.publisherDisplayName:null,dependencies:e.manifest.extensionDependencies&&e.manifest.extensionDependencies.length>0}},t.getGalleryExtensionTelemetryData=function(e){return Object.assign({id:e.identifier.id,name:e.name,galleryId:e.identifier.uuid,publisherId:e.publisherId,publisherName:e.publisher,
publisherDisplayName:e.publisherDisplayName,dependencies:!!(e.properties.dependencies&&e.properties.dependencies.length>0)},e.telemetryData)},t.BetterMergeId=new r.ExtensionIdentifier("pprice.better-merge"),t.getMaliciousExtensionsSet=function(e){const t=new Set;for(const i of e)i.malicious&&t.add(i.id.id);return t}})),define(e[85],t([0,1,3,2,37,8]),(function(e,t,i,r,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionsManifestCache=void 0;class o extends i.Disposable{constructor(e,t){super(),this.environmentService=e,this.extensionsManifestCache=r.join(this.environmentService.userDataPath,n.MANIFEST_CACHE_FOLDER,n.USER_MANIFEST_CACHE_FILE),this._register(t.onDidInstallExtension(e=>this.onDidInstallExtension(e))),this._register(t.onDidUninstallExtension(e=>this.onDidUnInstallExtension(e)))}onDidInstallExtension(e){e.error||this.invalidate()}onDidUnInstallExtension(e){e.error||this.invalidate()}invalidate(){s.rimraf(this.extensionsManifestCache,s.RimRafMode.MOVE).then(()=>{},()=>{})}}
t.ExtensionsManifestCache=o})),define(e[86],t([0,1]),(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WatcherChannelClient=t.WatcherChannel=void 0;t.WatcherChannel=class{constructor(e){this.service=e}listen(e,t,i){switch(t){case"watch":return this.service.watch(i);case"onLogMessage":return this.service.onLogMessage}throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"setRoots":return this.service.setRoots(i);case"setVerboseLogging":return this.service.setVerboseLogging(i);case"stop":return this.service.stop()}throw new Error(`Call not found: ${t}`)}};t.WatcherChannelClient=class{constructor(e){this.channel=e}watch(e){return this.channel.listen("watch",e)}setVerboseLogging(e){return this.channel.call("setVerboseLogging",e)}setRoots(e){return this.channel.call("setRoots",e)}get onLogMessage(){return this.channel.listen("onLogMessage")}stop(){return this.channel.call("stop")}}})),define(e[87],t([0,1,34,46,86,3,23]),(function(e,t,i,r,n,s,o){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0}),t.FileWatcher=void 0;let a=(()=>{class t extends s.Disposable{constructor(e,t,i,r){super(),this.folders=e,this.onDidFilesChange=t,this.onLogMessage=i,this.verboseLogging=r,this.isDisposed=!1,this.restartCounter=0,this.startWatching()}startWatching(){const s=this._register(new r.Client(o.getPathFromAmdModule(e,"bootstrap-fork"),{serverName:"File Watcher (nsfw)",args:["--type=watcherService"],env:{AMD_ENTRYPOINT:"vs/platform/files/node/watcher/nsfw/watcherApp",PIPE_LOGGING:"true",VERBOSE_LOGGING:"true"}}));this._register(s.onDidProcessExit(()=>{this.isDisposed||(this.restartCounter<=t.MAX_RESTARTS?(this.error("terminated unexpectedly and is restarted again..."),this.restartCounter++,this.startWatching()):this.error("failed to start after retrying for some time, giving up. Please report this as a bug report!"))}));const a=i.getNextTickChannel(s.getChannel("watcher"));this.service=new n.WatcherChannelClient(a),this.service.setVerboseLogging(this.verboseLogging)
;this._register(this.service.watch({})(e=>!this.isDisposed&&this.onDidFilesChange(e))),this._register(this.service.onLogMessage(e=>this.onLogMessage(e))),this.setFolders(this.folders)}setVerboseLogging(e){this.verboseLogging=e,!this.isDisposed&&this.service&&this.service.setVerboseLogging(e)}error(e){this.onLogMessage({type:"error",message:`[File Watcher (nsfw)] ${e}`})}setFolders(e){this.folders=e,this.service&&this.service.setRoots(e)}dispose(){this.isDisposed=!0,super.dispose()}}return t.MAX_RESTARTS=5,t})();t.FileWatcher=a})),define(e[88],t([0,1]),(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WatcherChannelClient=t.WatcherChannel=void 0;t.WatcherChannel=class{constructor(e){this.service=e}listen(e,t,i){switch(t){case"watch":return this.service.watch(i);case"onLogMessage":return this.service.onLogMessage}throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"setRoots":return this.service.setRoots(i);case"setVerboseLogging":
return this.service.setVerboseLogging(i);case"stop":return this.service.stop()}throw new Error(`Call not found: ${t}`)}};t.WatcherChannelClient=class{constructor(e){this.channel=e}watch(e){return this.channel.listen("watch",e)}setVerboseLogging(e){return this.channel.call("setVerboseLogging",e)}get onLogMessage(){return this.channel.listen("onLogMessage")}setRoots(e){return this.channel.call("setRoots",e)}stop(){return this.channel.call("stop")}}})),define(e[89],t([0,1,34,46,88,3,23]),(function(e,t,i,r,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileWatcher=void 0;let a=(()=>{class t extends s.Disposable{constructor(e,t,i,r,n={}){super(),this.folders=e,this.onDidFilesChange=t,this.onLogMessage=i,this.verboseLogging=r,this.watcherOptions=n,this.isDisposed=!1,this.restartCounter=0,this.startWatching()}startWatching(){const s=this._register(new r.Client(o.getPathFromAmdModule(e,"bootstrap-fork"),{serverName:"File Watcher (chokidar)",args:["--type=watcherService"],env:{
AMD_ENTRYPOINT:"vs/platform/files/node/watcher/unix/watcherApp",PIPE_LOGGING:"true",VERBOSE_LOGGING:"true"}}));this._register(s.onDidProcessExit(()=>{this.isDisposed||(this.restartCounter<=t.MAX_RESTARTS?(this.error("terminated unexpectedly and is restarted again..."),this.restartCounter++,this.startWatching()):this.error("failed to start after retrying for some time, giving up. Please report this as a bug report!"))}));const a=i.getNextTickChannel(s.getChannel("watcher"));this.service=new n.WatcherChannelClient(a),this.service.setVerboseLogging(this.verboseLogging),this._register(this.service.watch(this.watcherOptions)(e=>!this.isDisposed&&this.onDidFilesChange(e))),this._register(this.service.onLogMessage(e=>this.onLogMessage(e))),this.service.setRoots(this.folders)}error(e){this.onLogMessage({type:"error",message:`[File Watcher (chokidar)] ${e}`})}setVerboseLogging(e){this.verboseLogging=e,this.service&&this.service.setVerboseLogging(e)}setFolders(e){this.folders=e,this.service&&this.service.setRoots(e)}
dispose(){this.isDisposed=!0,super.dispose()}}return t.MAX_RESTARTS=5,t})();t.FileWatcher=a})),define(e[90],t([0,1,36,44,42,23]),(function(e,t,i,r,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutOfProcessWin32FolderWatcher=void 0;let o=(()=>{class t{constructor(e,t,i,r,s){this.watchedFolder=e,this.eventCallback=i,this.logCallback=r,this.verboseLogging=s,this.restartCounter=0,Array.isArray(t)?this.ignored=t.map(e=>n.parse(e)):this.ignored=[],this.verboseLogging&&this.log(`Start watching: ${e}`),this.startWatcher()}startWatcher(){const n=[this.watchedFolder];this.verboseLogging&&n.push("-verbose"),this.handle=i.spawn(s.getPathFromAmdModule(e,"vs/platform/files/node/watcher/win32/CodeHelper.exe"),n);const o=new r.LineDecoder;this.handle.stdout.on("data",e=>{const i=[];o.write(e).forEach(e=>{const r=e.split("|");if(2===r.length){const e=Number(r[0]),n=r[1];if(e>=0&&e<3){if(this.ignored&&this.ignored.some(e=>e(n)))return void(this.verboseLogging&&this.log(n));i.push({
type:t.changeTypeMap[e],path:n})}else this.log(r[1])}}),i.length>0&&this.eventCallback(i)}),this.handle.on("error",e=>this.onError(e)),this.handle.stderr.on("data",e=>this.onError(e)),this.handle.on("exit",(e,t)=>this.onExit(e,t))}onError(e){this.error("process error: "+e.toString())}onExit(e,i){this.handle&&(this.error(`terminated unexpectedly (code: ${e}, signal: ${i})`),this.restartCounter<=t.MAX_RESTARTS?(this.error("is restarted again..."),this.restartCounter++,this.startWatcher()):this.error("Watcher failed to start after retrying for some time, giving up. Please report this as a bug report!"))}error(e){this.logCallback({type:"error",message:`[File Watcher (C#)] ${e}`})}log(e){this.logCallback({type:"trace",message:`[File Watcher (C#)] ${e}`})}dispose(){this.handle&&(this.handle.kill(),this.handle=void 0)}}return t.MAX_RESTARTS=5,t.changeTypeMap=[0,1,2],t})();t.OutOfProcessWin32FolderWatcher=o})),define(e[91],t([0,1,90,2,13]),(function(e,t,i,r,n){"use strict";Object.defineProperty(t,"__esModule",{
value:!0}),t.FileWatcher=void 0;t.FileWatcher=class{constructor(e,t,i,s){this.onDidFilesChange=t,this.onLogMessage=i,this.verboseLogging=s,this.service=void 0,this.folder=e[0],0===this.folder.path.indexOf("\\\\")&&this.folder.path.endsWith(r.posix.sep)&&(this.folder.path=n.rtrim(this.folder.path,r.posix.sep)),this.service=this.startWatching()}get isDisposed(){return!this.service}startWatching(){return new i.OutOfProcessWin32FolderWatcher(this.folder.path,this.folder.excludes,e=>this.onFileEvents(e),e=>this.onLogMessage(e),this.verboseLogging)}setVerboseLogging(e){this.verboseLogging=e,this.service&&(this.service.dispose(),this.service=this.startWatching())}onFileEvents(e){this.isDisposed||e.length>0&&this.onDidFilesChange(e)}dispose(){this.service&&(this.service.dispose(),this.service=void 0)}}})),define(e[48],t([0,1]),(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSyncDescriptor=t.SyncDescriptor=void 0;class i{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,
this.supportsDelayedInstantiation=i}}t.SyncDescriptor=i,t.createSyncDescriptor=(e,...t)=>new i(e,t)})),define(e[92],t([0,1,6,59]),(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0;t.Graph=class{constructor(e){this._hashFn=e,this._nodes=Object.create(null)}roots(){const e=[];return r.forEach(this._nodes,t=>{i.isEmptyObject(t.value.outgoing)&&e.push(t.value)}),e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);i.outgoing[this._hashFn(t)]=r,r.incoming[this._hashFn(e)]=i}removeNode(e){const t=this._hashFn(e);delete this._nodes[t],r.forEach(this._nodes,e=>{delete e.value.outgoing[t],delete e.value.incoming[t]})}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes[t];return i||(i=function(e){return{data:e,incoming:Object.create(null),outgoing:Object.create(null)}}(e),this._nodes[t]=i),i}lookup(e){return this._nodes[this._hashFn(e)]}isEmpty(){for(const e in this._nodes)return!1;return!0}toString(){let e=[]
;return r.forEach(this._nodes,t=>{e.push(`${t.key}, (incoming)[${Object.keys(t.value.incoming).join(", ")}], (outgoing)[${Object.keys(t.value.outgoing).join(",")}]`)}),e.join("\n")}}})),define(e[4],t([0,1]),(function(e,t){"use strict";var i;function r(e,t,r,n){t[i.DI_TARGET]===t?t[i.DI_DEPENDENCIES].push({id:e,index:r,optional:n}):(t[i.DI_DEPENDENCIES]=[{id:e,index:r,optional:n}],t[i.DI_TARGET]=t)}function n(e){if(i.serviceIds.has(e))return i.serviceIds.get(e);const t=function(e,i,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");r(t,e,n,!1)};return t.toString=()=>e,i.serviceIds.set(e,t),t}Object.defineProperty(t,"__esModule",{value:!0}),t.optional=t.createDecorator=t.IInstantiationService=t._util=void 0,function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function(t){return t[e.DI_DEPENDENCIES]||[]}}(i=t._util||(t._util={})),t.IInstantiationService=n("instantiationService"),
t.createDecorator=n,t.optional=function(e){return function(t,i,n){if(3!==arguments.length)throw new Error("@optional-decorator can only be used to decorate a parameter");r(e,t,n,!0)}}})),define(e[93],t([0,1,4]),(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDownloadService=void 0,t.IDownloadService=i.createDecorator("downloadService")})),define(e[19],t([0,1,4]),(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BACKUPS=t.IEnvironmentService=void 0,t.IEnvironmentService=i.createDecorator("environmentService"),t.BACKUPS="Backups"})),define(e[30],t([0,1,73,4]),(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),
t.PreferencesLabel=t.ExtensionsChannelId=t.ExtensionsLabel=t.DefaultIconPath=t.IExtensionTipsService=t.IGlobalExtensionEnablementService=t.ENABLED_EXTENSIONS_STORAGE_PATH=t.DISABLED_EXTENSIONS_STORAGE_PATH=t.INSTALL_ERROR_INCOMPATIBLE=t.INSTALL_ERROR_MALICIOUS=t.INSTALL_ERROR_NOT_SUPPORTED=t.InstallOperation=t.StatisticType=t.SortOrder=t.SortBy=t.IExtensionGalleryService=t.IExtensionManagementService=t.isIExtensionIdentifier=t.EXTENSION_IDENTIFIER_REGEX=t.EXTENSION_IDENTIFIER_PATTERN=void 0,t.EXTENSION_IDENTIFIER_PATTERN="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",t.EXTENSION_IDENTIFIER_REGEX=new RegExp(t.EXTENSION_IDENTIFIER_PATTERN),t.isIExtensionIdentifier=function(e){return e&&"object"==typeof e&&"string"==typeof e.id&&(!e.uuid||"string"==typeof e.uuid)},t.IExtensionManagementService=r.createDecorator("extensionManagementService"),t.IExtensionGalleryService=r.createDecorator("extensionGalleryService"),function(e){e[e.NoneOrRelevance=0]="NoneOrRelevance",
e[e.LastUpdatedDate=1]="LastUpdatedDate",e[e.Title=2]="Title",e[e.PublisherName=3]="PublisherName",e[e.InstallCount=4]="InstallCount",e[e.PublishedDate=5]="PublishedDate",e[e.AverageRating=6]="AverageRating",e[e.WeightedRating=12]="WeightedRating"}(t.SortBy||(t.SortBy={})),function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"}(t.SortOrder||(t.SortOrder={})),function(e){e.Uninstall="uninstall"}(t.StatisticType||(t.StatisticType={})),function(e){e[e.None=0]="None",e[e.Install=1]="Install",e[e.Update=2]="Update"}(t.InstallOperation||(t.InstallOperation={})),t.INSTALL_ERROR_NOT_SUPPORTED="notsupported",t.INSTALL_ERROR_MALICIOUS="malicious",t.INSTALL_ERROR_INCOMPATIBLE="incompatible",t.DISABLED_EXTENSIONS_STORAGE_PATH="extensionsIdentifiers/disabled",t.ENABLED_EXTENSIONS_STORAGE_PATH="extensionsIdentifiers/enabled",t.IGlobalExtensionEnablementService=r.createDecorator("IGlobalExtensionEnablementService"),t.IExtensionTipsService=r.createDecorator("IExtensionTipsService"),
t.DefaultIconPath=e.toUrl("./media/defaultIcon.png"),t.ExtensionsLabel=i.localize(0,null),t.ExtensionsChannelId="extensions",t.PreferencesLabel=i.localize(1,null)})),define(e[20],t([0,1,78,2,14,4,13,18,6]),(function(e,t,i,r,n,s,o,a,l){"use strict";var c;Object.defineProperty(t,"__esModule",{value:!0}),t.whenProviderRegistered=t.etag=t.ETAG_DISABLED=t.FileKind=t.FILES_EXCLUDE_CONFIG=t.FILES_ASSOCIATIONS_CONFIG=t.HotExitConfiguration=t.AutoSaveConfiguration=t.FileOperationResult=t.FileOperationError=t.isParent=t.FileChangesEvent=t.FileChangeType=t.FileOperationEvent=t.FileOperation=t.toFileOperationResult=t.toFileSystemProviderErrorCode=t.markAsFileSystemProviderError=t.ensureFileSystemProviderError=t.createFileSystemProviderError=t.FileSystemProviderError=t.FileSystemProviderErrorCode=t.hasFileReadStreamCapability=t.hasOpenReadWriteCloseCapability=t.hasFileFolderCopyCapability=t.hasReadWriteCapability=t.FileSystemProviderCapabilities=t.FileType=t.IFileService=void 0,
t.IFileService=s.createDecorator("fileService"),function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"}(t.FileType||(t.FileType={})),function(e){e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash"}(t.FileSystemProviderCapabilities||(t.FileSystemProviderCapabilities={})),t.hasReadWriteCapability=function(e){return!!(2&e.capabilities)},t.hasFileFolderCopyCapability=function(e){return!!(8&e.capabilities)},t.hasOpenReadWriteCloseCapability=function(e){return!!(4&e.capabilities)},t.hasFileReadStreamCapability=function(e){return!!(16&e.capabilities)},function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",
e.FileExceedsMemoryLimit="EntryExceedsMemoryLimit",e.FileTooLarge="EntryTooLarge",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"}(c=t.FileSystemProviderErrorCode||(t.FileSystemProviderErrorCode={}));class u extends Error{constructor(e,t){super(e),this.code=t}}function h(e,t){const i=new u(e.toString(),t);return d(i,t),i}function d(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function f(e){if(!e)return c.Unknown;if(e instanceof u)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return c.Unknown;switch(t[1]){case c.FileExists:return c.FileExists;case c.FileIsADirectory:return c.FileIsADirectory;case c.FileNotADirectory:return c.FileNotADirectory;case c.FileNotFound:return c.FileNotFound;case c.FileExceedsMemoryLimit:return c.FileExceedsMemoryLimit;case c.FileTooLarge:return c.FileTooLarge;case c.NoPermissions:return c.NoPermissions;case c.Unavailable:return c.Unavailable}return c.Unknown}t.FileSystemProviderError=u,
t.createFileSystemProviderError=h,t.ensureFileSystemProviderError=function(e){return e||h(i.localize(0,null),c.Unknown)},t.markAsFileSystemProviderError=d,t.toFileSystemProviderErrorCode=f,t.toFileOperationResult=function(e){if(e instanceof g)return e.fileOperationResult;switch(f(e)){case c.FileNotFound:return 1;case c.FileIsADirectory:return 0;case c.FileNotADirectory:return 10;case c.NoPermissions:return 6;case c.FileExists:return 4;case c.FileExceedsMemoryLimit:return 9;case c.FileTooLarge:return 7;default:return 11}},function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY"}(t.FileOperation||(t.FileOperation={}));t.FileOperationEvent=class{constructor(e,t,i){this.resource=e,this.operation=t,this.target=i}isOperation(e){return this.operation===e}},function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"}(t.FileChangeType||(t.FileChangeType={}));t.FileChangesEvent=class{constructor(e){this.changes=e}contains(e,t){if(!e)return!1
;const i=!l.isUndefinedOrNull(t);return this.changes.some(r=>(!i||r.type===t)&&(2===r.type?a.isEqualOrParent(e,r.resource):a.isEqual(e,r.resource)))}getAdded(){return this.getOfType(1)}gotAdded(){return this.hasType(1)}getDeleted(){return this.getOfType(2)}gotDeleted(){return this.hasType(2)}getUpdated(){return this.getOfType(0)}gotUpdated(){return this.hasType(0)}getOfType(e){return this.changes.filter(t=>t.type===e)}hasType(e){return this.changes.some(t=>t.type===e)}},t.isParent=function(e,t,i){return!(!e||!t||e===t)&&(!(t.length>e.length)&&(t.charAt(t.length-1)!==r.sep&&(t+=r.sep),i?o.startsWithIgnoreCase(e,t):0===e.indexOf(t)))};class g extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}static isFileOperationError(e){return e instanceof Error&&!l.isUndefinedOrNull(e.fileOperationResult)}}t.FileOperationError=g,function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",
e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_READ_ONLY=5]="FILE_READ_ONLY",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_EXCEEDS_MEMORY_LIMIT=9]="FILE_EXCEEDS_MEMORY_LIMIT",e[e.FILE_NOT_DIRECTORY=10]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=11]="FILE_OTHER_ERROR"}(t.FileOperationResult||(t.FileOperationResult={})),t.AutoSaveConfiguration={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},t.HotExitConfiguration={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"},t.FILES_ASSOCIATIONS_CONFIG="files.associations",t.FILES_EXCLUDE_CONFIG="files.exclude",function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"}(t.FileKind||(t.FileKind={})),t.ETAG_DISABLED="",t.etag=function(e){
if("number"==typeof e.size&&"number"==typeof e.mtime)return e.mtime.toString(29)+e.size.toString(31)},t.whenProviderRegistered=function(e,t){return t.canHandleResource(n.URI.from({scheme:e.scheme}))?Promise.resolve():new Promise((i,r)=>{const n=t.onDidChangeFileSystemProviderRegistrations(t=>{t.scheme===e.scheme&&t.added&&(n.dispose(),i())})})}})),define(e[49],t([0,1,79,16,20,25]),(function(e,t,i,r,n,s){"use strict";function o(e){if(e&&e.isCancellationRequested)throw s.canceled();return!0}function a(e,t){if(null==t?void 0:t.limits){if("number"==typeof t.limits.memory&&e>t.limits.memory)throw n.createFileSystemProviderError(i.localize(0,null),n.FileSystemProviderErrorCode.FileExceedsMemoryLimit);if("number"==typeof t.limits.size&&e>t.limits.size)throw n.createFileSystemProviderError(i.localize(1,null),n.FileSystemProviderErrorCode.FileTooLarge)}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.createReadStream=void 0,t.createReadStream=function(e,t,i,s){const l=r.newWriteableBufferStream()
;let c=void 0;return async function(e,t,i,s,l){o(l);const c=await e.open(t,{create:!1});o(l);try{let t=0,n=0,u=s&&"number"==typeof s.length?s.length:void 0,h=r.VSBuffer.alloc(Math.min(s.bufferSize,"number"==typeof u?u:s.bufferSize)),d=s&&"number"==typeof s.position?s.position:0,f=0;do{n=await e.read(c,d,h.buffer,f,h.byteLength-f),d+=n,t+=n,"number"==typeof u&&(u-=n),(f+=n)===h.byteLength&&(i.write(h),h=r.VSBuffer.alloc(Math.min(s.bufferSize,"number"==typeof u?u:s.bufferSize)),f=0)}while(n>0&&("number"!=typeof u||u>0)&&o(l)&&a(t,s));if(f>0){let e=f;"number"==typeof u&&(e=Math.min(f,u)),i.write(h.slice(0,e))}}catch(e){throw n.ensureFileSystemProviderError(e)}finally{await e.close(c)}}(e,t,l,i,s).then(void 0,e=>c=e).finally(()=>l.end(c)),l}})),define(e[50],t([0,1,14,20,15]),(function(e,t,i,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeFileChanges=t.toFileChanges=void 0,t.toFileChanges=function(e){return e.map(e=>({type:e.type,resource:i.URI.file(e.path)}))},
t.normalizeFileChanges=function(e){const t=new s;for(const i of e)t.processEvent(i);return t.normalize()};class s{constructor(){this.normalized=[],this.mapPathToChange=new Map}processEvent(e){const t=this.mapPathToChange.get(e.path);if(t){const i=t.type,r=e.type;1===i&&2===r?(this.mapPathToChange.delete(e.path),this.normalized.splice(this.normalized.indexOf(t),1)):2===i&&1===r?t.type=0:1===i&&0===r||(t.type=r)}else this.normalized.push(e),this.mapPathToChange.set(e.path,e)}normalize(){const e=[],t=[];return this.normalized.filter(t=>2===t.type||(e.push(t),!1)).sort((e,t)=>e.path.length-t.path.length).filter(e=>!t.some(t=>r.isParent(e.path,t,!n.isLinux))&&(t.push(e.path),!0)).concat(e)}}})),define(e[94],t([0,1,50,3,8,64,65,12,2]),(function(e,t,i,r,n,s,o,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileWatcher=void 0;class c extends r.Disposable{constructor(e,t,i,r){super(),this.path=e,this.onDidFilesChange=t,this.onLogMessage=i,this.verboseLogging=r,
this.fileChangesDelayer=this._register(new a.ThrottledDelayer(2*o.CHANGE_BUFFER_DELAY)),this.fileChangesBuffer=[],this.startWatching()}setVerboseLogging(e){this.verboseLogging=e}async startWatching(){try{const{stat:e,symbolicLink:t}=await n.statLink(this.path);if(this.isDisposed)return;let i=this.path;if(t)try{i=await s.realpath(i)}catch(e){this.onError(e)}e.isDirectory()?this._register(o.watchFolder(i,(e,t)=>{this.onFileChange({type:"changed"===e?0:"added"===e?1:2,path:l.join(this.path,l.basename(t))})},e=>this.onError(e))):this._register(o.watchFile(i,e=>{this.onFileChange({type:"changed"===e?0:2,path:this.path})},e=>this.onError(e)))}catch(e){this.onError(e)}}onFileChange(e){this.fileChangesBuffer.push(e),this.verboseLogging&&this.onVerbose(`${1===e.type?"[ADDED]":2===e.type?"[DELETED]":"[CHANGED]"} ${e.path}`),this.fileChangesDelayer.trigger(()=>{const e=this.fileChangesBuffer;this.fileChangesBuffer=[];const t=i.normalizeFileChanges(e);return this.verboseLogging&&t.forEach(e=>{
this.onVerbose(`>> normalized ${1===e.type?"[ADDED]":2===e.type?"[DELETED]":"[CHANGED]"} ${e.path}`)}),t.length>0&&this.onDidFilesChange(t),Promise.resolve()})}onError(e){this.isDisposed||this.onLogMessage({type:"error",message:`[File Watcher (node.js)] ${e}`})}onVerbose(e){this.isDisposed||this.onLogMessage({type:"trace",message:`[File Watcher (node.js)] ${e}`})}dispose(){this.isDisposed=!0,super.dispose()}}t.FileWatcher=c})),define(e[51],t([0,1]),(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceCollection=void 0;t.ServiceCollection=class{constructor(...e){this._entries=new Map;for(let[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){this._entries.forEach((t,i)=>e(i,t))}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}})),define(e[95],t([0,1,25,92,48,4,51,12]),(function(e,t,i,r,n,s,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=void 0;const l=!1
;class c extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.toString()}}class u{constructor(e=new o.ServiceCollection,t=!1,i){this._services=e,this._strict=t,this._parent=i,this._services.set(s.IInstantiationService,this)}createChild(e){return new u(e,this._strict,this)}invokeFunction(e,...t){let r=d.traceInvocation(e),n=!1;try{return e({get:(e,t)=>{if(n)throw i.illegalState("service accessor is only valid during the invocation of its target method");const o=this._getOrCreateServiceInstance(e,r);if(!o&&t!==s.optional)throw new Error(`[invokeFunction] unknown service '${e}'`);return o}},...t)}finally{n=!0,r.stop()}}createInstance(e,...t){let i,r;return e instanceof n.SyncDescriptor?(i=d.traceCreation(e.ctor),r=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=d.traceCreation(e),r=this._createInstance(e,t,i)),i.stop(),r}_createInstance(e,t=[],i){let r=s._util.getServiceDependencies(e).sort((e,t)=>e.index-t.index),n=[];for(const t of r){
let r=this._getOrCreateServiceInstance(t.id,i);if(!r&&this._strict&&!t.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`);n.push(r)}let o=r.length>0?r[0].index:t.length;if(t.length!==o){console.warn(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);let i=o-t.length;t=i>0?t.concat(new Array(i)):t.slice(0,o)}return new e(...[...t,...n])}_setServiceInstance(e,t){if(this._services.get(e)instanceof n.SyncDescriptor)this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let i=this._getServiceInstanceOrDescriptor(e);return i instanceof n.SyncDescriptor?this._createAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}
_createAndCacheServiceInstance(e,t,i){const o=new r.Graph(e=>e.id.toString());let a=0;const l=[{id:e,desc:t,_trace:i}];for(;l.length;){const t=l.pop();if(o.lookupOrInsertNode(t),a++>1e3)throw new c(o);for(let i of s._util.getServiceDependencies(t.desc.ctor)){let r=this._getServiceInstanceOrDescriptor(i.id);if(r||i.optional||console.warn(`[createInstance] ${e} depends on ${i.id} which is NOT registered.`),r instanceof n.SyncDescriptor){const e={id:i.id,desc:r,_trace:t._trace.branch(i.id,!0)};o.insertEdge(t,e),l.push(e)}}}for(;;){const e=o.roots();if(0===e.length){if(!o.isEmpty())throw new c(o);break}for(const{data:t}of e){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e),o.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],r,s){if(this._services.get(e)instanceof n.SyncDescriptor)return this._createServiceInstance(t,i,r,s)
;if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,r,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],i,r){if(i){const i=new a.IdleValue(()=>this._createInstance(e,t,r));return new Proxy(Object.create(null),{get(e,t){if(t in e)return e[t];let r=i.getValue(),n=r[t];return"function"!=typeof n?n:(n=n.bind(r),e[t]=n,n)},set:(e,t,r)=>(i.getValue()[t]=r,!0)})}return this._createInstance(e,t,r)}}var h;t.InstantiationService=u,function(e){e[e.Creation=0]="Creation",e[e.Invocation=1]="Invocation",e[e.Branch=2]="Branch"}(h||(h={}));let d=(()=>{class e{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(t){return l?new e(1,t.name||t.toString().substring(0,42).replace(/\n/g,"")):e._None}static traceCreation(t){return l?new e(0,t.name):e._None}branch(t,i){let r=new e(2,t.toString());return this._dep.push([t,i,r]),r}stop(){let t=Date.now()-this._start;e._totals+=t;let i=!1
;let r=[`${0===this.type?"CREATE":"CALL"} ${this.name}`,`${function e(t,r){let n=[],s=new Array(t+1).join("\t");for(const[o,a,l]of r._dep)if(a&&l){i=!0,n.push(`${s}CREATES -> ${o}`);let r=e(t+1,l);r&&n.push(r)}else n.push(`${s}uses -> ${o}`);return n.join("\n")}(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${e._totals.toFixed(2)}ms)`];(t>2||i)&&console.log(r.join("\n"))}}return e._None=new class extends e{constructor(){super(-1,null)}stop(){}branch(){return this}},e._totals=0,e})()})),define(e[96],t([0,1,4]),(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidLocalization=t.ILocalizationsService=t.LanguageType=void 0,function(e){e[e.Core=1]="Core",e[e.Contributed=2]="Contributed"}(t.LanguageType||(t.LanguageType={})),t.ILocalizationsService=i.createDecorator("localizationsService"),t.isValidLocalization=function(e){if("string"!=typeof e.languageId)return!1;if(!Array.isArray(e.translations)||0===e.translations.length)return!1;for(const t of e.translations){
if("string"!=typeof t.id)return!1;if("string"!=typeof t.path)return!1}return(!e.languageName||"string"==typeof e.languageName)&&(!e.localizedLanguageName||"string"==typeof e.localizedLanguageName)}})),define(e[10],t([0,1,4,3,15,9,35]),(function(e,t,i,r,n,s,o){"use strict";function a(){return(new Date).toISOString()}var l;Object.defineProperty(t,"__esModule",{value:!0}),t.getLogLevel=t.NullLogService=t.DelegatedLogService=t.MultiplexLogService=t.ConsoleLogInMainService=t.LogServiceAdapter=t.ConsoleLogService=t.ConsoleLogMainService=t.AbstractLogService=t.DEFAULT_LOG_LEVEL=t.LogLevel=t.ILoggerService=t.ILogService=void 0,t.ILogService=i.createDecorator("logService"),t.ILoggerService=i.createDecorator("loggerService"),function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.Off=6]="Off"}(l=t.LogLevel||(t.LogLevel={})),t.DEFAULT_LOG_LEVEL=l.Info;class c extends r.Disposable{constructor(){super(...arguments),
this.level=t.DEFAULT_LOG_LEVEL,this._onDidChangeLogLevel=this._register(new s.Emitter),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}t.AbstractLogService=c;t.ConsoleLogMainService=class extends c{constructor(e=t.DEFAULT_LOG_LEVEL){super(),this.setLevel(e),this.useColors=!n.isWindows}trace(e,...t){this.getLevel()<=l.Trace&&(this.useColors?console.log(`[90m[main ${a()}][0m`,e,...t):console.log(`[main ${a()}]`,e,...t))}debug(e,...t){this.getLevel()<=l.Debug&&(this.useColors?console.log(`[90m[main ${a()}][0m`,e,...t):console.log(`[main ${a()}]`,e,...t))}info(e,...t){this.getLevel()<=l.Info&&(this.useColors?console.log(`[90m[main ${a()}][0m`,e,...t):console.log(`[main ${a()}]`,e,...t))}warn(e,...t){this.getLevel()<=l.Warning&&(this.useColors?console.warn(`[93m[main ${a()}][0m`,e,...t):console.warn(`[main ${a()}]`,e,...t))}error(e,...t){
this.getLevel()<=l.Error&&(this.useColors?console.error(`[91m[main ${a()}][0m`,e,...t):console.error(`[main ${a()}]`,e,...t))}critical(e,...t){this.getLevel()<=l.Critical&&(this.useColors?console.error(`[90m[main ${a()}][0m`,e,...t):console.error(`[main ${a()}]`,e,...t))}dispose(){}flush(){}};t.ConsoleLogService=class extends c{constructor(e=t.DEFAULT_LOG_LEVEL){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=l.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=l.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=l.Info&&console.log("%c INFO","color: #33f",e,...t)}warn(e,...t){this.getLevel()<=l.Warning&&console.log("%c WARN","color: #993",e,...t)}error(e,...t){this.getLevel()<=l.Error&&console.log("%c  ERR","color: #f33",e,...t)}critical(e,...t){this.getLevel()<=l.Critical&&console.log("%cCRITI","background: #f33; color: white",e,...t)}dispose(){}flush(){}};class u extends c{constructor(e,i=t.DEFAULT_LOG_LEVEL){
super(),this.adapter=e,this.setLevel(i)}trace(e,...t){this.getLevel()<=l.Trace&&this.adapter.consoleLog("trace",[this.extractMessage(e),...t])}debug(e,...t){this.getLevel()<=l.Debug&&this.adapter.consoleLog("debug",[this.extractMessage(e),...t])}info(e,...t){this.getLevel()<=l.Info&&this.adapter.consoleLog("info",[this.extractMessage(e),...t])}warn(e,...t){this.getLevel()<=l.Warning&&this.adapter.consoleLog("warn",[this.extractMessage(e),...t])}error(e,...t){this.getLevel()<=l.Error&&this.adapter.consoleLog("error",[this.extractMessage(e),...t])}critical(e,...t){this.getLevel()<=l.Critical&&this.adapter.consoleLog("critical",[this.extractMessage(e),...t])}extractMessage(e){return"string"==typeof e?e:o.toErrorMessage(e,this.getLevel()<=l.Trace)}dispose(){}flush(){}}t.LogServiceAdapter=u;t.ConsoleLogInMainService=class extends u{constructor(e,i=t.DEFAULT_LOG_LEVEL){super({consoleLog:(t,i)=>e.consoleLog(t,i)},i)}};t.MultiplexLogService=class extends c{constructor(e){super(),this.logServices=e,
e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.logServices)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.logServices)i.trace(e,...t)}debug(e,...t){for(const i of this.logServices)i.debug(e,...t)}info(e,...t){for(const i of this.logServices)i.info(e,...t)}warn(e,...t){for(const i of this.logServices)i.warn(e,...t)}error(e,...t){for(const i of this.logServices)i.error(e,...t)}critical(e,...t){for(const i of this.logServices)i.critical(e,...t)}flush(){for(const e of this.logServices)e.flush()}dispose(){for(const e of this.logServices)e.dispose()}};class h extends r.Disposable{constructor(e){super(),this.logService=e,this._register(e)}get onDidChangeLogLevel(){return this.logService.onDidChangeLogLevel}setLevel(e){this.logService.setLevel(e)}getLevel(){return this.logService.getLevel()}trace(e,...t){this.logService.trace(e,...t)}debug(e,...t){this.logService.debug(e,...t)}info(e,...t){this.logService.info(e,...t)}warn(e,...t){this.logService.warn(e,...t)}
error(e,...t){this.logService.error(e,...t)}critical(e,...t){this.logService.critical(e,...t)}flush(){this.logService.flush()}}t.DelegatedLogService=h;t.NullLogService=class{constructor(){this.onDidChangeLogLevel=(new s.Emitter).event}setLevel(e){}getLevel(){return l.Info}trace(e,...t){}debug(e,...t){}info(e,...t){}warn(e,...t){}error(e,...t){}critical(e,...t){}dispose(){}flush(){}},t.getLogLevel=function(e){if(e.verbose)return l.Trace;if("string"==typeof e.logLevel){switch(e.logLevel.toLowerCase()){case"trace":return l.Trace;case"debug":return l.Debug;case"info":return l.Info;case"warn":return l.Warning;case"error":return l.Error;case"critical":return l.Critical;case"off":return l.Off}}return t.DEFAULT_LOG_LEVEL}}));var i=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r
;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};define(e[97],t([0,1,38,3,20,30,19,14,18,29,10,39,52]),(function(e,t,n,s,o,a,l,c,u,h,d,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionsDownloader=void 0;const p=/^([^.]+\..+)-(\d+\.\d+\.\d+)$/;let m=(()=>{let e=class extends s.Disposable{constructor(e,t,i,r){super(),this.fileService=t,this.extensionGalleryService=i,this.logService=r,this.extensionsDownloadDir=c.URI.file(n.tmpdir()),this.cache=0,this.cleanUpPromise=Promise.resolve(),e.extensionsDownloadPath&&(this.extensionsDownloadDir=c.URI.file(e.extensionsDownloadPath),this.cache=20,this.cleanUpPromise=this.cleanUp())}async downloadExtension(e,t){await this.cleanUpPromise;const i=u.joinPath(this.extensionsDownloadDir,this.getName(e))
;return await this.download(e,i,t),i}async delete(e){this.cache||await this.fileService.del(e)}async download(e,t,i){await this.fileService.exists(t)||await this.extensionGalleryService.download(e,t,i)}async cleanUp(){try{if(!await this.fileService.exists(this.extensionsDownloadDir))return void this.logService.trace("Extension VSIX downlads cache dir does not exist");const e=await this.fileService.resolve(this.extensionsDownloadDir,{resolveMetadata:!0});if(e.children){const t=[],i=[];for(const t of e.children){const e=this.parse(t.name);e&&i.push([e,t])}const r=h.groupByExtension(i,([e])=>e.identifier),n=[];for(const e of r)e.sort((e,t)=>g.rcompare(e[0].version,t[0].version)),t.push(...e.slice(1).map(e=>e[1].resource)),n.push(e[0][1]);n.sort((e,t)=>e.mtime-t.mtime),t.push(...n.slice(0,Math.max(0,n.length-this.cache)).map(e=>e.resource)),await Promise.all(t.map(e=>(this.logService.trace("Deleting vsix from cache",e.path),this.fileService.del(e))))}}catch(e){this.logService.error(e)}}getName(e){
return this.cache?new h.ExtensionIdentifierWithVersion(e.identifier,e.version).key().toLowerCase():f.generateUuid()}parse(e){const t=p.exec(e);return t&&t[1]&&t[2]?new h.ExtensionIdentifierWithVersion({id:t[1]},t[2]):null}};return e=i([r(0,l.IEnvironmentService),r(1,o.IFileService),r(2,a.IExtensionGalleryService),r(3,d.ILogService)],e)})();t.ExtensionsDownloader=m})),define(e[98],t([0,1,3,20,9,18,77,27,17,43,10,16,32,12,28,22,49]),(function(e,t,n,s,o,a,l,c,u,h,d,f,g,p,m,v,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileService=void 0;let E=(()=>{let e=class extends n.Disposable{constructor(e){super(),this.logService=e,this.BUFFER_SIZE=65536,this._onDidChangeFileSystemProviderRegistrations=this._register(new o.Emitter),this.onDidChangeFileSystemProviderRegistrations=this._onDidChangeFileSystemProviderRegistrations.event,this._onWillActivateFileSystemProvider=this._register(new o.Emitter),this.onWillActivateFileSystemProvider=this._onWillActivateFileSystemProvider.event,
this._onDidChangeFileSystemProviderCapabilities=this._register(new o.Emitter),this.onDidChangeFileSystemProviderCapabilities=this._onDidChangeFileSystemProviderCapabilities.event,this.provider=new Map,this._onDidRunOperation=this._register(new o.Emitter),this.onDidRunOperation=this._onDidRunOperation.event,this._onError=this._register(new o.Emitter),this.onError=this._onError.event,this._onDidFilesChange=this._register(new o.Emitter),this.onDidFilesChange=this._onDidFilesChange.event,this.activeWatchers=new Map,this.writeQueues=new Map}registerProvider(e,t){if(this.provider.has(e))throw new Error(`A filesystem provider for the scheme '${e}' is already registered.`);this.provider.set(e,t),this._onDidChangeFileSystemProviderRegistrations.fire({added:!0,scheme:e,provider:t});const i=new n.DisposableStore;return i.add(t.onDidChangeFile(e=>this._onDidFilesChange.fire(new s.FileChangesEvent(e)))),i.add(t.onDidChangeCapabilities(()=>this._onDidChangeFileSystemProviderCapabilities.fire({provider:t,scheme:e}))),
"function"==typeof t.onDidErrorOccur&&i.add(t.onDidErrorOccur(e=>this._onError.fire(new Error(e)))),n.toDisposable(()=>{this._onDidChangeFileSystemProviderRegistrations.fire({added:!1,scheme:e,provider:t}),this.provider.delete(e),n.dispose(i)})}async activateProvider(e){const t=[];this._onWillActivateFileSystemProvider.fire({scheme:e,join(e){e&&t.push(e)}}),this.provider.has(e)||await Promise.all(t)}canHandleResource(e){return this.provider.has(e.scheme)}hasCapability(e,t){const i=this.provider.get(e.scheme);return!!(i&&i.capabilities&t)}async withProvider(e){if(!a.isAbsolutePath(e))throw new s.FileOperationError(l.localize(0,null,this.resourceForError(e)),8);await this.activateProvider(e.scheme);const t=this.provider.get(e.scheme);if(!t){const t=new Error;throw t.name="ENOPRO",t.message=l.localize(1,null,e.toString()),t}return t}async withReadProvider(e){const t=await this.withProvider(e);if(s.hasOpenReadWriteCloseCapability(t)||s.hasReadWriteCapability(t)||s.hasFileReadStreamCapability(t))return t
;throw new Error(`Filesystem provider for scheme '${e.scheme}' neither has FileReadWrite, FileReadStream nor FileOpenReadWriteClose capability which is needed for the read operation.`)}async withWriteProvider(e){const t=await this.withProvider(e);if(s.hasOpenReadWriteCloseCapability(t)||s.hasReadWriteCapability(t))return t;throw new Error(`Filesystem provider for scheme '${e.scheme}' neither has FileReadWrite nor FileOpenReadWriteClose capability which is needed for the write operation.`)}async resolve(e,t){try{return await this.doResolveFile(e,t)}catch(t){if(s.toFileSystemProviderErrorCode(t)===s.FileSystemProviderErrorCode.FileNotFound)throw new s.FileOperationError(l.localize(2,null,this.resourceForError(e)),1);throw s.ensureFileSystemProviderError(t)}}async doResolveFile(e,t){const i=await this.withProvider(e),r=null==t?void 0:t.resolveTo,n=null==t?void 0:t.resolveSingleChildDescendants,s=null==t?void 0:t.resolveMetadata,o=await i.stat(e);let a
;return this.toFileStat(i,e,o,void 0,!!s,(t,i)=>(a||((a=c.TernarySearchTree.forUris()).set(e,!0),u.isNonEmptyArray(r)&&r.forEach(e=>a.set(e,!0))),!!Boolean(a.findSuperstr(t.resource)||a.get(t.resource))||!(!t.isDirectory||!n)&&1===i))}async toFileStat(e,t,i,r,n,o){const l={resource:t,name:h.getBaseLabel(t),isFile:0!=(i.type&s.FileType.File),isDirectory:0!=(i.type&s.FileType.Directory),isSymbolicLink:0!=(i.type&s.FileType.SymbolicLink),mtime:i.mtime,ctime:i.ctime,size:i.size,etag:s.etag({mtime:i.mtime,size:i.size})};if(l.isDirectory&&o(l,r)){try{const i=await e.readdir(t),r=await Promise.all(i.map(async([r,s])=>{try{const l=a.joinPath(t,r),c=n?await e.stat(l):{type:s};return await this.toFileStat(e,l,c,i.length,n,o)}catch(e){return this.logService.trace(e),null}}));l.children=u.coalesce(r)}catch(e){this.logService.trace(e),l.children=[]}return l}return l}async resolveAll(e){return Promise.all(e.map(async e=>{try{return{stat:await this.doResolveFile(e.resource,e.options),success:!0}}catch(e){
return this.logService.trace(e),{stat:void 0,success:!1}}}))}async exists(e){const t=await this.withProvider(e);try{return!!await t.stat(e)}catch(e){return!1}}async createFile(e,t=f.VSBuffer.fromString(""),i){if(!(null==i?void 0:i.overwrite)&&await this.exists(e))throw new s.FileOperationError(l.localize(3,null,this.resourceForError(e)),3,i);const r=await this.writeFile(e,t);return this._onDidRunOperation.fire(new s.FileOperationEvent(e,0,r)),r}async writeFile(e,t,i){const r=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(e),e);try{await this.validateWriteFile(r,e,i)||await this.mkdirp(r,a.dirname(e)),!s.hasReadWriteCapability(r)||t instanceof f.VSBuffer||(t=g.isReadableStream(t)?await g.consumeStreamWithLimit(t,e=>f.VSBuffer.concat(e),3):g.consumeReadableWithLimit(t,e=>f.VSBuffer.concat(e),3)),
!s.hasOpenReadWriteCloseCapability(r)||s.hasReadWriteCapability(r)&&t instanceof f.VSBuffer?await this.doWriteUnbuffered(r,e,t):await this.doWriteBuffered(r,e,t instanceof f.VSBuffer?f.bufferToReadable(t):t)}catch(t){throw new s.FileOperationError(l.localize(4,null,this.resourceForError(e),s.ensureFileSystemProviderError(t).toString()),s.toFileOperationResult(t),i)}return this.resolve(e,{resolveMetadata:!0})}async validateWriteFile(e,t,i){let r=void 0;try{r=await e.stat(t)}catch(e){return}if(0!=(r.type&s.FileType.Directory))throw new s.FileOperationError(l.localize(5,null,this.resourceForError(t)),0,i);if(i&&"number"==typeof i.mtime&&"string"==typeof i.etag&&i.etag!==s.ETAG_DISABLED&&"number"==typeof r.mtime&&"number"==typeof r.size&&i.mtime<r.mtime&&i.etag!==s.etag({mtime:i.mtime,size:r.size}))throw new s.FileOperationError(l.localize(6,null),3,i);return r}async readFile(e,t){const i=await this.withReadProvider(e),r=await this.doReadAsFileStream(i,e,Object.assign(Object.assign({},t),{preferUnbuffered:!0}))
;return Object.assign(Object.assign({},r),{value:await f.streamToBuffer(r.value)})}async readFileStream(e,t){const i=await this.withReadProvider(e);return this.doReadAsFileStream(i,e,t)}async doReadAsFileStream(e,t,i){const r=new m.CancellationTokenSource,n=this.validateReadFile(t,i).then(e=>e,e=>{throw r.cancel(),e});try{let o;i&&"string"==typeof i.etag&&i.etag!==s.ETAG_DISABLED&&await n,o=!s.hasOpenReadWriteCloseCapability(e)&&!s.hasFileReadStreamCapability(e)||s.hasReadWriteCapability(e)&&(null==i?void 0:i.preferUnbuffered)?this.readFileUnbuffered(e,t,i):s.hasFileReadStreamCapability(e)?Promise.resolve(this.readFileStreamed(e,t,r.token,i)):Promise.resolve(this.readFileBuffered(e,t,r.token,i));const[a,l]=await Promise.all([n,o]);return Object.assign(Object.assign({},a),{value:l})}catch(e){throw new s.FileOperationError(l.localize(7,null,this.resourceForError(t),s.ensureFileSystemProviderError(e).toString()),s.toFileOperationResult(e),i)}}readFileStreamed(e,t,i,r=Object.create(null)){
const n=e.readFileStream(t,r,i);return this.transformFileReadStream(t,n,r)}readFileBuffered(e,t,i,r=Object.create(null)){const n=y.createReadStream(e,t,Object.assign(Object.assign({},r),{bufferSize:this.BUFFER_SIZE}),i);return this.transformFileReadStream(t,n,r)}transformFileReadStream(e,t,i){return g.transform(t,{data:e=>e instanceof f.VSBuffer?e:f.VSBuffer.wrap(e),error:t=>new s.FileOperationError(l.localize(8,null,this.resourceForError(e),s.ensureFileSystemProviderError(t).toString()),s.toFileOperationResult(t),i)},e=>f.VSBuffer.concat(e))}async readFileUnbuffered(e,t,i){let r=await e.readFile(t);return i&&"number"==typeof i.position&&(r=r.slice(i.position)),i&&"number"==typeof i.length&&(r=r.slice(0,i.length)),this.validateReadFileLimits(t,r.byteLength,i),f.bufferToStream(f.VSBuffer.wrap(r))}async validateReadFile(e,t){const i=await this.resolve(e,{resolveMetadata:!0});if(i.isDirectory)throw new s.FileOperationError(l.localize(9,null,this.resourceForError(e)),0,t)
;if(t&&"string"==typeof t.etag&&t.etag!==s.ETAG_DISABLED&&t.etag===i.etag)throw new s.FileOperationError(l.localize(10,null),2,t);return this.validateReadFileLimits(e,i.size,t),i}validateReadFileLimits(e,t,i){if(null==i?void 0:i.limits){let r=void 0;if("number"==typeof i.limits.memory&&t>i.limits.memory&&(r=9),"number"==typeof i.limits.size&&t>i.limits.size&&(r=7),"number"==typeof r)throw new s.FileOperationError(l.localize(11,null,this.resourceForError(e)),r)}}async move(e,t,i){const r=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(e),e),n=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t),o=await this.doMoveCopy(r,e,n,t,"move",!!i),a=await this.resolve(t,{resolveMetadata:!0});return this._onDidRunOperation.fire(new s.FileOperationEvent(e,"move"===o?2:3,a)),a}async copy(e,t,i){const r=await this.withReadProvider(e),n=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t),o=await this.doMoveCopy(r,e,n,t,"copy",!!i),a=await this.resolve(t,{resolveMetadata:!0})
;return this._onDidRunOperation.fire(new s.FileOperationEvent(e,"copy"===o?3:2,a)),a}async doMoveCopy(e,t,i,r,n,o){if(t.toString()===r.toString())return n;const{exists:l,isSameResourceWithDifferentPathCase:c}=await this.doValidateMoveCopy(e,t,i,r,n,o);if(l&&!c&&o&&await this.del(r,{recursive:!0}),await this.mkdirp(i,a.dirname(r)),"copy"===n){if(e===i&&s.hasFileFolderCopyCapability(e))await e.copy(t,r,{overwrite:o});else{const n=await this.resolve(t);n.isDirectory?await this.doCopyFolder(e,n,i,r):await this.doCopyFile(e,t,i,r)}return n}return e===i?(await e.rename(t,r,{overwrite:o}),n):(await this.doMoveCopy(e,t,i,r,"copy",o),await this.del(t,{recursive:!0}),"copy")}async doCopyFile(e,t,i,r){
return s.hasOpenReadWriteCloseCapability(e)&&s.hasOpenReadWriteCloseCapability(i)?this.doPipeBuffered(e,t,i,r):s.hasOpenReadWriteCloseCapability(e)&&s.hasReadWriteCapability(i)?this.doPipeBufferedToUnbuffered(e,t,i,r):s.hasReadWriteCapability(e)&&s.hasOpenReadWriteCloseCapability(i)?this.doPipeUnbufferedToBuffered(e,t,i,r):s.hasReadWriteCapability(e)&&s.hasReadWriteCapability(i)?this.doPipeUnbuffered(e,t,i,r):void 0}async doCopyFolder(e,t,i,r){await i.mkdir(r),Array.isArray(t.children)&&await Promise.all(t.children.map(async t=>{const n=a.joinPath(r,t.name);return t.isDirectory?this.doCopyFolder(e,await this.resolve(t.resource),i,n):this.doCopyFile(e,t.resource,i,n)}))}async doValidateMoveCopy(e,t,i,r,n,o){let c=!1;if(e===i){const i=!!(1024&e.capabilities);if(i||(c=a.isEqual(t,r,!0)),c&&"copy"===n)throw new Error(l.localize(12,null,this.resourceForError(t),this.resourceForError(r)));if(!c&&a.isEqualOrParent(r,t,!i))throw new Error(l.localize(13,null,this.resourceForError(t),this.resourceForError(r)))}
const u=await this.exists(r);if(u&&!c){if(!o)throw new s.FileOperationError(l.localize(14,null,this.resourceForError(t),this.resourceForError(r)),4);if(e===i){const i=!!(1024&e.capabilities);if(a.isEqualOrParent(t,r,!i))throw new Error(l.localize(15,null,this.resourceForError(t),this.resourceForError(r)))}}return{exists:u,isSameResourceWithDifferentPathCase:c}}async createFolder(e){const t=this.throwIfFileSystemIsReadonly(await this.withProvider(e),e);await this.mkdirp(t,e);const i=await this.resolve(e,{resolveMetadata:!0});return this._onDidRunOperation.fire(new s.FileOperationEvent(e,0,i)),i}async mkdirp(e,t){const i=[];for(;!a.isEqual(t,a.dirname(t));)try{if(0==((await e.stat(t)).type&s.FileType.Directory))throw new Error(l.localize(16,null,this.resourceForError(t)));break}catch(e){if(s.toFileSystemProviderErrorCode(e)!==s.FileSystemProviderErrorCode.FileNotFound)throw e;i.push(a.basename(t)),t=a.dirname(t)}for(let r=i.length-1;r>=0;r--){t=a.joinPath(t,i[r]);try{await e.mkdir(t)}catch(e){
if(s.toFileSystemProviderErrorCode(e)!==s.FileSystemProviderErrorCode.FileExists)throw e}}}async del(e,t){const i=this.throwIfFileSystemIsReadonly(await this.withProvider(e),e),r=!!(null==t?void 0:t.useTrash);if(r&&!(4096&i.capabilities))throw new Error(l.localize(17,null,this.resourceForError(e)));const n=await this.exists(e);if(!n)throw new s.FileOperationError(l.localize(18,null,this.resourceForError(e)),1);const o=!!(null==t?void 0:t.recursive);if(!o&&n){const t=await this.resolve(e);if(t.isDirectory&&Array.isArray(t.children)&&t.children.length>0)throw new Error(l.localize(19,null,this.resourceForError(e)))}await i.delete(e,{recursive:o,useTrash:r}),this._onDidRunOperation.fire(new s.FileOperationEvent(e,1))}watch(e,t={recursive:!1,excludes:[]}){let i=!1,r=n.toDisposable(()=>i=!0);return this.doWatch(e,t).then(e=>{i?n.dispose(e):r=e},e=>this.logService.error(e)),n.toDisposable(()=>n.dispose(r))}async doWatch(e,t){const i=await this.withProvider(e),r=this.toWatchKey(i,e,t),s=this.activeWatchers.get(r)||{
count:0,disposable:i.watch(e,t)};return this.activeWatchers.has(r)||this.activeWatchers.set(r,s),s.count+=1,n.toDisposable(()=>{s.count--,0===s.count&&(n.dispose(s.disposable),this.activeWatchers.delete(r))})}toWatchKey(e,t,i){return[this.toMapKey(e,t),String(i.recursive),i.excludes.join()].join()}dispose(){super.dispose(),this.activeWatchers.forEach(e=>n.dispose(e.disposable)),this.activeWatchers.clear()}ensureWriteQueue(e,t){const i=this.toMapKey(e,t);let r=this.writeQueues.get(i);if(!r){r=new p.Queue,this.writeQueues.set(i,r),o.Event.once(r.onFinished)(()=>{this.writeQueues.delete(i),n.dispose(r)})}return r}toMapKey(e,t){return!!(1024&e.capabilities)?t.toString():t.toString().toLowerCase()}async doWriteBuffered(e,t,i){return this.ensureWriteQueue(e,t).queue(async()=>{const r=await e.open(t,{create:!0});try{g.isReadableStream(i)?await this.doWriteStreamBufferedQueued(e,r,i):await this.doWriteReadableBufferedQueued(e,r,i)}catch(e){throw s.ensureFileSystemProviderError(e)}finally{await e.close(r)}})}
doWriteStreamBufferedQueued(e,t,i){return new Promise((r,n)=>{let s=0;i.on("data",async r=>{i.pause();try{await this.doWriteBuffer(e,t,r,r.byteLength,s,0)}catch(e){return n(e)}s+=r.byteLength,setTimeout(()=>i.resume())}),i.on("error",e=>n(e)),i.on("end",()=>r())})}async doWriteReadableBufferedQueued(e,t,i){let r,n=0;for(;null!==(r=i.read());)await this.doWriteBuffer(e,t,r,r.byteLength,n,0),n+=r.byteLength}async doWriteBuffer(e,t,i,r,n,s){let o=0;for(;o<r;){o+=await e.write(t,n+o,i.buffer,s+o,r-o)}}async doWriteUnbuffered(e,t,i){return this.ensureWriteQueue(e,t).queue(()=>this.doWriteUnbufferedQueued(e,t,i))}async doWriteUnbufferedQueued(e,t,i){let r;return r=i instanceof f.VSBuffer?i:g.isReadableStream(i)?await f.streamToBuffer(i):f.readableToBuffer(i),e.writeFile(t,r.buffer,{create:!0,overwrite:!0})}async doPipeBuffered(e,t,i,r){return this.ensureWriteQueue(i,r).queue(()=>this.doPipeBufferedQueued(e,t,i,r))}async doPipeBufferedQueued(e,t,i,r){let n=void 0,o=void 0;try{n=await e.open(t,{create:!1}),
o=await i.open(r,{create:!0});const s=f.VSBuffer.alloc(this.BUFFER_SIZE);let a=0,l=0,c=0;do{c=await e.read(n,a,s.buffer,l,s.byteLength-l),await this.doWriteBuffer(i,o,s,c,a,l),a+=c,(l+=c)===s.byteLength&&(l=0)}while(c>0)}catch(e){throw s.ensureFileSystemProviderError(e)}finally{await Promise.all(["number"==typeof n?e.close(n):Promise.resolve(),"number"==typeof o?i.close(o):Promise.resolve()])}}async doPipeUnbuffered(e,t,i,r){return this.ensureWriteQueue(i,r).queue(()=>this.doPipeUnbufferedQueued(e,t,i,r))}async doPipeUnbufferedQueued(e,t,i,r){return i.writeFile(r,await e.readFile(t),{create:!0,overwrite:!0})}async doPipeUnbufferedToBuffered(e,t,i,r){return this.ensureWriteQueue(i,r).queue(()=>this.doPipeUnbufferedToBufferedQueued(e,t,i,r))}async doPipeUnbufferedToBufferedQueued(e,t,i,r){const n=await i.open(r,{create:!0});try{const r=await e.readFile(t);await this.doWriteBuffer(i,n,f.VSBuffer.wrap(r),r.byteLength,0,0)}catch(e){throw s.ensureFileSystemProviderError(e)}finally{await i.close(n)}}
async doPipeBufferedToUnbuffered(e,t,i,r){const n=await f.streamToBuffer(this.readFileBuffered(e,t,m.CancellationToken.None));await this.doWriteUnbuffered(i,r,n)}throwIfFileSystemIsReadonly(e,t){if(2048&e.capabilities)throw new s.FileOperationError(l.localize(20,null,this.resourceForError(t)),6);return e}resourceForError(e){return e.scheme===v.Schemas.file?e.fsPath:e.toString(!0)}};return e=i([r(0,d.ILogService)],e)})();t.FileService=E})),define(e[99],t([0,1,24,45,3,20,9,15,8,2,18,33,12,10,80,50,89,91,87,94,16,32,49,17]),(function(e,t,i,r,n,s,o,a,l,c,u,h,d,f,g,p,m,v,y,E,S,w,b,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiskFileSystemProvider=void 0;class P extends n.Disposable{constructor(e,t){var i;super(),this.logService=e,this.options=t,this.BUFFER_SIZE=(null===(i=this.options)||void 0===i?void 0:i.bufferSize)||65536,this.onDidChangeCapabilities=o.Event.None,this.mapHandleToPos=new Map,this.writeHandles=new Set,this.canFlush=!0,
this._onDidWatchErrorOccur=this._register(new o.Emitter),this.onDidErrorOccur=this._onDidWatchErrorOccur.event,this._onDidChangeFile=this._register(new o.Emitter),this.onDidChangeFile=this._onDidChangeFile.event,this.recursiveFoldersToWatch=[],this.recursiveWatchRequestDelayer=this._register(new d.ThrottledDelayer(0))}get capabilities(){return this._capabilities||(this._capabilities=30,a.isLinux&&(this._capabilities|=1024)),this._capabilities}async stat(e){try{const{stat:t,symbolicLink:i}=await l.statLink(this.toFilePath(e));return{type:this.toType(t,i),ctime:t.birthtime.getTime(),mtime:t.mtime.getTime(),size:t.size}}catch(e){throw this.toFileSystemProviderError(e)}}async readdir(e){try{const t=await l.readdirWithFileTypes(this.toFilePath(e)),i=[];return await Promise.all(t.map(async t=>{try{let r;r=t.isSymbolicLink()?(await this.stat(u.joinPath(e,t.name))).type:this.toType(t),i.push([t.name,r])}catch(e){this.logService.trace(e)}})),i}catch(e){throw this.toFileSystemProviderError(e)}}toType(e,t){let i
;return i=(null==t?void 0:t.dangling)?s.FileType.Unknown:e.isFile()?s.FileType.File:e.isDirectory()?s.FileType.Directory:s.FileType.Unknown,t&&(i|=s.FileType.SymbolicLink),i}async readFile(e){try{const t=this.toFilePath(e);return await l.readFile(t)}catch(e){throw this.toFileSystemProviderError(e)}}readFileStream(e,t,i){const r=b.createReadStream(this,e,Object.assign(Object.assign({},t),{bufferSize:this.BUFFER_SIZE}),i);return w.transform(r,{data:e=>e.buffer},e=>S.VSBuffer.concat(e.map(e=>S.VSBuffer.wrap(e))).buffer)}async writeFile(e,t,i){let r=void 0;try{const n=this.toFilePath(e);if(!i.create||!i.overwrite){if(await l.exists(n)){if(!i.overwrite)throw s.createFileSystemProviderError(g.localize(0,null),s.FileSystemProviderErrorCode.FileExists)}else if(!i.create)throw s.createFileSystemProviderError(g.localize(1,null),s.FileSystemProviderErrorCode.FileNotFound)}r=await this.open(e,{create:!0}),await this.write(r,0,t,0,t.byteLength)}catch(e){throw this.toFileSystemProviderError(e)}finally{
"number"==typeof r&&await this.close(r)}}async open(e,t){try{const n=this.toFilePath(e);let s=void 0;if(t.create){if(a.isWindows&&await l.exists(n))try{await l.truncate(n,0),s="r+"}catch(e){this.logService.trace(e)}s||(s="w")}else s="r";const o=await r.promisify(i.open)(n,s);return this.mapHandleToPos.set(o,0),t.create&&this.writeHandles.add(o),o}catch(e){throw this.toFileSystemProviderError(e)}}async close(e){try{if(this.mapHandleToPos.delete(e),this.writeHandles.delete(e)&&this.canFlush)try{await r.promisify(i.fdatasync)(e)}catch(e){this.canFlush=!1,this.logService.error(e)}return await r.promisify(i.close)(e)}catch(e){throw this.toFileSystemProviderError(e)}}async read(e,t,n,s,o){const a=this.normalizePos(e,t);let l=null;try{const t=await r.promisify(i.read)(e,n,s,o,a);return l="number"==typeof t?t:t.bytesRead}catch(e){throw this.toFileSystemProviderError(e)}finally{this.updatePos(e,a,l)}}normalizePos(e,t){return t===this.mapHandleToPos.get(e)?null:t}updatePos(e,t,i){const r=this.mapHandleToPos.get(e)
;"number"==typeof r&&("number"==typeof t||("number"==typeof i?this.mapHandleToPos.set(e,r+i):this.mapHandleToPos.delete(e)))}async write(e,t,i,r,n){return d.retry(()=>this.doWrite(e,t,i,r,n),100,3)}async doWrite(e,t,n,s,o){const a=this.normalizePos(e,t);let l=null;try{const t=await r.promisify(i.write)(e,n,s,o,a);return l="number"==typeof t?t:t.bytesWritten}catch(e){throw this.toFileSystemProviderError(e)}finally{this.updatePos(e,a,l)}}async mkdir(e){try{await r.promisify(i.mkdir)(this.toFilePath(e))}catch(e){throw this.toFileSystemProviderError(e)}}async delete(e,t){try{const i=this.toFilePath(e);await this.doDelete(i,t)}catch(e){throw this.toFileSystemProviderError(e)}}async doDelete(e,t){t.recursive?await l.rimraf(e,l.RimRafMode.MOVE):await l.unlink(e)}async rename(e,t,i){const r=this.toFilePath(e),n=this.toFilePath(t);if(r!==n)try{await this.validateTargetDeleted(e,t,"move",i.overwrite),await l.move(r,n)}catch(e){
throw"EINVAL"!==e.code&&"EBUSY"!==e.code&&"ENAMETOOLONG"!==e.code||(e=new Error(g.localize(2,null,c.basename(r),c.basename(c.dirname(n)),e.toString()))),this.toFileSystemProviderError(e)}}async copy(e,t,i){const r=this.toFilePath(e),n=this.toFilePath(t);if(r!==n)try{await this.validateTargetDeleted(e,t,"copy",i.overwrite),await l.copy(r,n)}catch(e){throw"EINVAL"!==e.code&&"EBUSY"!==e.code&&"ENAMETOOLONG"!==e.code||(e=new Error(g.localize(3,null,c.basename(r),c.basename(c.dirname(n)),e.toString()))),this.toFileSystemProviderError(e)}}async validateTargetDeleted(e,t,i,r){const n=!!(1024&this.capabilities),o=this.toFilePath(e),a=this.toFilePath(t);let c=!1;if(n||(c=h.isEqual(o,a,!0)),c&&"copy"===i)throw s.createFileSystemProviderError(g.localize(4,null),s.FileSystemProviderErrorCode.FileExists);if(!c&&await l.exists(a)){if(!r)throw s.createFileSystemProviderError(g.localize(5,null),s.FileSystemProviderErrorCode.FileExists);await this.delete(t,{recursive:!0,useTrash:!1})}}watch(e,t){
return t.recursive?this.watchRecursive(e,t.excludes):this.watchNonRecursive(e)}watchRecursive(e,t){const i={path:this.toFilePath(e),excludes:t},r=C.insert(this.recursiveFoldersToWatch,i);return this.refreshRecursiveWatchers(),n.toDisposable(()=>{r(),this.refreshRecursiveWatchers()})}refreshRecursiveWatchers(){this.recursiveWatchRequestDelayer.trigger(async()=>{this.doRefreshRecursiveWatchers()})}doRefreshRecursiveWatchers(){var e,t,i;if(this.recursiveWatcher instanceof y.FileWatcher)this.recursiveWatcher.setFolders(this.recursiveFoldersToWatch);else if(n.dispose(this.recursiveWatcher),this.recursiveWatcher=void 0,this.recursiveFoldersToWatch.length>0){let r,n=void 0;(null===(t=null===(e=this.options)||void 0===e?void 0:e.watcher)||void 0===t?void 0:t.usePolling)?(r=m.FileWatcher,n=null===(i=this.options)||void 0===i?void 0:i.watcher):r=1===this.recursiveFoldersToWatch.length?a.isWindows?v.FileWatcher:m.FileWatcher:y.FileWatcher,
this.recursiveWatcher=new r(this.recursiveFoldersToWatch,e=>this._onDidChangeFile.fire(p.toFileChanges(e)),e=>{"error"===e.type&&this._onDidWatchErrorOccur.fire(e.message),this.logService[e.type](e.message)},this.logService.getLevel()===f.LogLevel.Trace,n),this.recursiveWatcherLogLevelListener||(this.recursiveWatcherLogLevelListener=this.logService.onDidChangeLogLevel(()=>{this.recursiveWatcher&&this.recursiveWatcher.setVerboseLogging(this.logService.getLevel()===f.LogLevel.Trace)}))}}watchNonRecursive(e){const t=new E.FileWatcher(this.toFilePath(e),e=>this._onDidChangeFile.fire(p.toFileChanges(e)),e=>{"error"===e.type&&this._onDidWatchErrorOccur.fire(e.message),this.logService[e.type](e.message)},this.logService.getLevel()===f.LogLevel.Trace),i=this.logService.onDidChangeLogLevel(()=>{t.setVerboseLogging(this.logService.getLevel()===f.LogLevel.Trace)});return n.combinedDisposable(t,i)}toFilePath(e){return c.normalize(e.fsPath)}toFileSystemProviderError(e){if(e instanceof s.FileSystemProviderError)return e
;let t;switch(e.code){case"ENOENT":t=s.FileSystemProviderErrorCode.FileNotFound;break;case"EISDIR":t=s.FileSystemProviderErrorCode.FileIsADirectory;break;case"ENOTDIR":t=s.FileSystemProviderErrorCode.FileNotADirectory;break;case"EEXIST":t=s.FileSystemProviderErrorCode.FileExists;break;case"EPERM":case"EACCES":t=s.FileSystemProviderErrorCode.NoPermissions;break;default:t=s.FileSystemProviderErrorCode.Unknown}return s.createFileSystemProviderError(e,t)}dispose(){super.dispose(),n.dispose(this.recursiveWatcher),this.recursiveWatcher=void 0,n.dispose(this.recursiveWatcherLogLevelListener),this.recursiveWatcherLogLevelListener=void 0}}t.DiskFileSystemProvider=P})),define(e[100],t([0,1,2,10]),(function(e,t,i,r){"use strict";function n(e,t,i){switch(t){case r.LogLevel.Trace:e.trace(i);break;case r.LogLevel.Debug:e.debug(i);break;case r.LogLevel.Info:e.info(i);break;case r.LogLevel.Warning:e.warn(i);break;case r.LogLevel.Error:e.error(i);break;case r.LogLevel.Critical:e.critical(i);break;default:
throw new Error("Invalid log level")}}Object.defineProperty(t,"__esModule",{value:!0}),t.SpdLogService=t.createRotatingLogger=void 0,t.createRotatingLogger=function(t,i,r,n){return e.__$__nodeRequire("spdlog").createRotatingLogger(t,i,r,n)};class s extends r.AbstractLogService{constructor(e,t,i){super(),this.name=e,this.logsFolder=t,this.buffer=[],this._loggerCreationPromise=void 0,this.setLevel(i),this._createSpdLogLogger(),this._register(this.onDidChangeLogLevel(e=>{this._logger&&this._logger.setLevel(e)}))}_createSpdLogLogger(){return this._loggerCreationPromise||(this._loggerCreationPromise=async function(t,r){try{const n=await new Promise((t,i)=>{e(["spdlog"],t,i)});n.setAsyncMode(8192,500);const s=i.join(r,`${t}.log`);return n.createRotatingLoggerAsync(t,s,5242880,6)}catch(e){console.error(e)}return null}(this.name,this.logsFolder).then(e=>{if(e){this._logger=e,this._logger.setLevel(this.getLevel());for(const{level:e,message:t}of this.buffer)n(this._logger,e,t);this.buffer=[]}})),
this._loggerCreationPromise}_log(e,t){this._logger?n(this._logger,e,t):this.getLevel()<=e&&this.buffer.push({level:e,message:t})}trace(e,...t){this.getLevel()<=r.LogLevel.Trace&&this._log(r.LogLevel.Trace,this.format([e,...t]))}debug(e,...t){this.getLevel()<=r.LogLevel.Debug&&this._log(r.LogLevel.Debug,this.format([e,...t]))}info(e,...t){this.getLevel()<=r.LogLevel.Info&&this._log(r.LogLevel.Info,this.format([e,...t]))}warn(e,...t){this.getLevel()<=r.LogLevel.Warning&&this._log(r.LogLevel.Warning,this.format([e,...t]))}error(e,...t){if(this.getLevel()<=r.LogLevel.Error)if(e instanceof Error){const t=Array.prototype.slice.call(arguments);t[0]=e.stack,this._log(r.LogLevel.Error,this.format(t))}else this._log(r.LogLevel.Error,this.format([e,...t]))}critical(e,...t){this.getLevel()<=r.LogLevel.Critical&&this._log(r.LogLevel.Critical,this.format([e,...t]))}flush(){this._logger?this._logger.flush():this._loggerCreationPromise&&this._loggerCreationPromise.then(()=>this.flush())}dispose(){
this._logger?this.disposeLogger():this._loggerCreationPromise&&this._loggerCreationPromise.then(()=>this.disposeLogger()),this._loggerCreationPromise=void 0}disposeLogger(){this._logger&&(this._logger.drop(),this._logger=void 0)}format(e){let t="";for(let i=0;i<e.length;i++){let r=e[i];if("object"==typeof r)try{r=JSON.stringify(r)}catch(e){}t+=(i>0?" ":"")+r}return t}}t.SpdLogService=s})),define(e[101],t([0,1,19,102,63,38,2,18,60,40,67,15,23,14]),(function(e,t,r,n,s,o,a,l,c,u,h,d,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUserDataDir=t.parsePathArg=t.parseSearchPort=t.parseExtensionHostPort=t.xdgRuntimeDir=t.EnvironmentService=void 0;let p=(()=>{class t{constructor(e,t){if(this._args=e,this._execPath=t,!process.env.VSCODE_LOGS){const e=h.toLocalISOString(new Date).replace(/-|:|\.\d+Z$/g,"");process.env.VSCODE_LOGS=a.join(this.userDataPath,"logs",e)}this.logsPath=process.env.VSCODE_LOGS}get args(){return this._args}get appRoot(){return a.dirname(f.getPathFromAmdModule(e,""))}
get execPath(){return this._execPath}get cliPath(){return function(e,t,i){if(d.isWindows)return i?a.join(a.dirname(e),"bin",`${u.default.applicationName}.cmd`):a.join(t,"scripts","code-cli.bat");if(d.isLinux)return i?a.join(a.dirname(e),"bin",`${u.default.applicationName}`):a.join(t,"scripts","code-cli.sh");if(i)return a.join(t,"bin","code");return a.join(t,"scripts","code-cli.sh")}(this.execPath,this.appRoot,this.isBuilt)}get userHome(){return g.URI.file(o.homedir())}get userDataPath(){const e=process.env.VSCODE_PORTABLE;return e?a.join(e,"user-data"):w(this._args,process)}get appSettingsHome(){return g.URI.file(a.join(this.userDataPath,"User"))}get userRoamingDataHome(){return this.appSettingsHome}get settingsResource(){return l.joinPath(this.userRoamingDataHome,"settings.json")}get userDataSyncHome(){return l.joinPath(this.userRoamingDataHome,"sync")}get userDataSyncLogResource(){return g.URI.file(a.join(this.logsPath,"userDataSync.log"))}get sync(){return this.args.sync}get enableSyncByDefault(){return!1}
get machineSettingsResource(){return l.joinPath(g.URI.file(a.join(this.userDataPath,"Machine")),"settings.json")}get globalStorageHome(){return a.join(this.appSettingsHome.fsPath,"globalStorage")}get workspaceStorageHome(){return a.join(this.appSettingsHome.fsPath,"workspaceStorage")}get keybindingsResource(){return l.joinPath(this.userRoamingDataHome,"keybindings.json")}get keyboardLayoutResource(){return l.joinPath(this.userRoamingDataHome,"keyboardLayout.json")}get argvResource(){const e=process.env.VSCODE_PORTABLE;return e?g.URI.file(a.join(e,"argv.json")):l.joinPath(this.userHome,u.default.dataFolderName,"argv.json")}get snippetsHome(){return l.joinPath(this.userRoamingDataHome,"snippets")}get isExtensionDevelopment(){return!!this._args.extensionDevelopmentPath}get backupHome(){return g.URI.file(a.join(this.userDataPath,r.BACKUPS))}get backupWorkspacesPath(){return a.join(this.backupHome.fsPath,"workspaces.json")}get untitledWorkspacesHome(){return g.URI.file(a.join(this.userDataPath,"Workspaces"))}
get installSourcePath(){return a.join(this.userDataPath,"installSource")}get builtinExtensionsPath(){const t=S(this._args["builtin-extensions-dir"],process);return t||a.normalize(a.join(f.getPathFromAmdModule(e,""),"..","extensions"))}get extensionsDownloadPath(){return S(this._args["extensions-download-dir"],process)}get extensionsPath(){const e=S(this._args["extensions-dir"],process);if(e)return e;const t=process.env.VSCODE_EXTENSIONS;if(t)return t;const i=process.env.VSCODE_PORTABLE;return i?a.join(i,"extensions"):l.joinPath(this.userHome,u.default.dataFolderName,"extensions").fsPath}get extensionDevelopmentLocationURI(){const e=this._args.extensionDevelopmentPath;if(Array.isArray(e))return e.map(e=>/^[^:/?#]+?:\/\//.test(e)?g.URI.parse(e):g.URI.file(a.normalize(e)))}get extensionTestsLocationURI(){const e=this._args.extensionTestsPath;if(e)return/^[^:/?#]+?:\/\//.test(e)?g.URI.parse(e):g.URI.file(a.normalize(e))}get disableExtensions(){if(this._args["disable-extensions"])return!0
;const e=this._args["disable-extension"];if(e){if("string"==typeof e)return[e];if(Array.isArray(e)&&e.length>0)return e}return!1}get extensionEnabledProposedApi(){return Array.isArray(this.args["enable-proposed-api"])?this.args["enable-proposed-api"]:"enable-proposed-api"in this.args?[]:void 0}get debugExtensionHost(){return y(this._args,this.isBuilt)}get logExtensionHostCommunication(){return!!this.args.logExtensionHostCommunication}get isBuilt(){return!process.env.VSCODE_DEV}get verbose(){return!!this._args.verbose}get logLevel(){return this._args.log}get mainIPCHandle(){return v(this.userDataPath,"main")}get sharedIPCHandle(){return v(this.userDataPath,"shared")}get nodeCachedDataDir(){return process.env.VSCODE_NODE_CACHED_DATA_DIR||void 0}get serviceMachineIdResource(){return l.joinPath(g.URI.file(this.userDataPath),"machineid")}get disableUpdates(){return!!this._args["disable-updates"]}get disableCrashReporter(){return!!this._args["disable-crash-reporter"]}get driverHandle(){return this._args.driver}
get driverVerbose(){return!!this._args["driver-verbose"]}get disableTelemetry(){return!!this._args["disable-telemetry"]}}return i([c.memoize],t.prototype,"appRoot",null),i([c.memoize],t.prototype,"cliPath",null),i([c.memoize],t.prototype,"userHome",null),i([c.memoize],t.prototype,"userDataPath",null),i([c.memoize],t.prototype,"appSettingsHome",null),i([c.memoize],t.prototype,"userRoamingDataHome",null),i([c.memoize],t.prototype,"settingsResource",null),i([c.memoize],t.prototype,"userDataSyncHome",null),i([c.memoize],t.prototype,"userDataSyncLogResource",null),i([c.memoize],t.prototype,"sync",null),i([c.memoize],t.prototype,"enableSyncByDefault",null),i([c.memoize],t.prototype,"machineSettingsResource",null),i([c.memoize],t.prototype,"globalStorageHome",null),i([c.memoize],t.prototype,"workspaceStorageHome",null),i([c.memoize],t.prototype,"keybindingsResource",null),i([c.memoize],t.prototype,"keyboardLayoutResource",null),i([c.memoize],t.prototype,"argvResource",null),
i([c.memoize],t.prototype,"snippetsHome",null),i([c.memoize],t.prototype,"isExtensionDevelopment",null),i([c.memoize],t.prototype,"backupHome",null),i([c.memoize],t.prototype,"backupWorkspacesPath",null),i([c.memoize],t.prototype,"untitledWorkspacesHome",null),i([c.memoize],t.prototype,"installSourcePath",null),i([c.memoize],t.prototype,"builtinExtensionsPath",null),i([c.memoize],t.prototype,"extensionsPath",null),i([c.memoize],t.prototype,"extensionDevelopmentLocationURI",null),i([c.memoize],t.prototype,"extensionTestsLocationURI",null),i([c.memoize],t.prototype,"debugExtensionHost",null),i([c.memoize],t.prototype,"logExtensionHostCommunication",null),i([c.memoize],t.prototype,"mainIPCHandle",null),i([c.memoize],t.prototype,"sharedIPCHandle",null),i([c.memoize],t.prototype,"nodeCachedDataDir",null),i([c.memoize],t.prototype,"serviceMachineIdResource",null),t})();t.EnvironmentService=p,t.xdgRuntimeDir=process.env.XDG_RUNTIME_DIR;const m={2:107,1:103};function v(e,i){return d.isWindows?function(e,t){
return`\\\\.\\pipe\\${n.createHash("md5").update(e).digest("hex")}-${u.default.version}-${t}-sock`}(e,i):function(e,i){const r=process.env.VSCODE_PORTABLE;let s;if(t.xdgRuntimeDir&&!r){const r=n.createHash("md5").update(e).digest("hex").substr(0,8);s=a.join(t.xdgRuntimeDir,`vscode-${r}-${u.default.version}-${i}.sock`)}else s=a.join(e,`${u.default.version}-${i}.sock`);const o=m[d.platform];return"number"==typeof o&&s.length>=o&&console.warn(`WARNING: IPC handle "${s}" is longer than ${o} chars, try a shorter --user-data-dir`),s}(e,i)}function y(e,t){return E(e["inspect-extensions"],e["inspect-brk-extensions"],5870,t,e.debugId)}function E(e,t,i,r,n){const s=Number(t||e)||(r?null:i);return{port:s,break:!!s&&Boolean(!!t),debugId:n}}function S(e,t){if(!e)return;const i=a.resolve(e);return a.normalize(e)===i?i:a.resolve(t.env.VSCODE_CWD||t.cwd(),e)}function w(e,t){return S(e["user-data-dir"],t)||a.resolve(s.getDefaultUserDataPath(t.platform))}t.parseExtensionHostPort=y,t.parseSearchPort=function(e,t){
return E(e["inspect-search"],e["inspect-brk-search"],5876,t)},t.parsePathArg=S,t.parseUserDataDir=w})),define(e[103],t([0,1,8,102,30,3,19,12,29,10,96,40,17,9,22,2]),(function(e,t,n,s,o,a,l,c,u,h,d,f,g,p,m,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalizationsService=void 0;const y=["de","en","en-US","es","fr","it","ja","ko","ru","zh-CN","zh-TW"];"stable"!==f.default.quality&&y.push("hu");let E=(()=>{let e=class extends a.Disposable{constructor(e,t,i){super(),this.extensionManagementService=e,this.logService=i,this._onDidLanguagesChange=this._register(new p.Emitter),this.onDidLanguagesChange=this._onDidLanguagesChange.event,this.cache=this._register(new S(t,i)),this._register(e.onDidInstallExtension(({local:e})=>this.onDidInstallExtension(e))),this._register(e.onDidUninstallExtension(({identifier:e})=>this.onDidUninstallExtension(e)))}getLanguageIds(e){return 1===e?Promise.resolve([...y]):this.cache.getLanguagePacks().then(t=>{const i=2===e?Object.keys(t):[...y,...Object.keys(t)]
;return g.distinct(i)})}onDidInstallExtension(e){e&&e.manifest&&e.manifest.contributes&&e.manifest.contributes.localizations&&e.manifest.contributes.localizations.length&&(this.logService.debug("Adding language packs from the extension",e.identifier.id),this.update().then(e=>{e&&this._onDidLanguagesChange.fire()}))}onDidUninstallExtension(e){this.cache.getLanguagePacks().then(t=>{Object.keys(t).some(i=>t[i]&&t[i].extensions.some(t=>u.areSameExtensions(t.extensionIdentifier,e)))&&(this.logService.debug("Removing language packs from the extension",e.id),this.update().then(e=>{e&&this._onDidLanguagesChange.fire()}))})}update(){return Promise.all([this.cache.getLanguagePacks(),this.extensionManagementService.getInstalled()]).then(([e,t])=>this.cache.update(t).then(t=>!g.equals(Object.keys(e),Object.keys(t))))}};return e=i([r(0,o.IExtensionManagementService),r(1,l.IEnvironmentService),r(2,h.ILogService)],e)})();t.LocalizationsService=E;let S=(()=>{let e=class extends a.Disposable{constructor(e,t){super(),
this.logService=t,this.languagePacks={},this.languagePacksFilePath=v.join(e.userDataPath,"languagepacks.json"),this.languagePacksFileLimiter=new c.Queue}getLanguagePacks(){return this.languagePacksFileLimiter.size||!this.initializedCache?this.withLanguagePacks().then(()=>this.languagePacks):Promise.resolve(this.languagePacks)}update(e){return this.withLanguagePacks(t=>{Object.keys(t).forEach(e=>delete t[e]),this.createLanguagePacksFromExtensions(t,...e)}).then(()=>this.languagePacks)}createLanguagePacksFromExtensions(e,...t){for(const i of t)i&&i.manifest&&i.manifest.contributes&&i.manifest.contributes.localizations&&i.manifest.contributes.localizations.length&&this.createLanguagePacksFromExtension(e,i);Object.keys(e).forEach(t=>this.updateHash(e[t]))}createLanguagePacksFromExtension(e,t){const i=t.identifier,r=t.manifest.contributes&&t.manifest.contributes.localizations?t.manifest.contributes.localizations:[];for(const n of r)if(t.location.scheme===m.Schemas.file&&d.isValidLocalization(n)){
let r=e[n.languageId];r||(r={hash:"",extensions:[],translations:{}},e[n.languageId]=r);let s=r.extensions.filter(e=>u.areSameExtensions(e.extensionIdentifier,i))[0];s?s.version=t.manifest.version:r.extensions.push({extensionIdentifier:i,version:t.manifest.version});for(const e of n.translations)r.translations[e.id]=v.join(t.location.fsPath,e.path)}}updateHash(e){if(e){const t=s.createHash("md5");for(const i of e.extensions)t.update(i.extensionIdentifier.uuid||i.extensionIdentifier.id).update(i.version);e.hash=t.digest("hex")}}withLanguagePacks(e=(()=>null)){return this.languagePacksFileLimiter.queue(()=>{let t=null;return n.readFile(this.languagePacksFilePath,"utf8").then(void 0,e=>"ENOENT"===e.code?Promise.resolve("{}"):Promise.reject(e)).then(e=>{try{return JSON.parse(e)}catch(e){return{}}}).then(i=>(t=e(i),i)).then(e=>{for(const t of Object.keys(e))e[t]||delete e[t];this.languagePacks=e,this.initializedCache=!0;const t=JSON.stringify(this.languagePacks)
;return this.logService.debug("Writing language packs",t),n.writeFile(this.languagePacksFilePath,t)}).then(()=>t,e=>this.logService.error(e))})}};return e=i([r(0,l.IEnvironmentService),r(1,h.ILogService)],e)})()})),define(e[53],t([0,1,4]),(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IProductService=void 0,t.IProductService=i.createDecorator("productService")})),define(e[21],t([0,1,6,58]),(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Registry=void 0;t.Registry=new class{constructor(){this.data=new Map}add(e,t){r.ok(i.isString(e)),r.ok(i.isObject(t)),r.ok(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}}})),define(e[104],t([0,1,21,9]),(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions=void 0,t.Extensions={JSONContribution:"base.contributions.json"};const n=new class{constructor(){
this._onDidChangeSchema=new r.Emitter,this.onDidChangeSchema=this._onDidChangeSchema.event,this.schemasById={}}registerSchema(e,t){var i;this.schemasById[(i=e,i.length>0&&"#"===i.charAt(i.length-1)?i.substring(0,i.length-1):i)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}};i.Registry.add(t.Extensions.JSONContribution,n)})),define(e[31],t([0,1,72,9,21,6,104,27]),(function(e,t,i,r,n,s,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScopes=t.validateProperty=t.getDefaultValue=t.OVERRIDE_PROPERTY_PATTERN=t.resourceLanguageSettingsSchemaId=t.resourceSettings=t.windowSettings=t.machineOverridableSettings=t.machineSettings=t.applicationSettings=t.allSettings=t.ConfigurationScope=t.Extensions=void 0,t.Extensions={Configuration:"base.contributions.configuration"},function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.WINDOW=3]="WINDOW",e[e.RESOURCE=4]="RESOURCE",
e[e.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"}(t.ConfigurationScope||(t.ConfigurationScope={})),t.allSettings={properties:{},patternProperties:{}},t.applicationSettings={properties:{},patternProperties:{}},t.machineSettings={properties:{},patternProperties:{}},t.machineOverridableSettings={properties:{},patternProperties:{}},t.windowSettings={properties:{},patternProperties:{}},t.resourceSettings={properties:{},patternProperties:{}},t.resourceLanguageSettingsSchemaId="vscode://schemas/settings/resourceLanguage";const l=n.Registry.as(o.Extensions.JSONContribution);function c(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}t.OVERRIDE_PROPERTY_PATTERN=new RegExp("\\[.*\\]$"),t.getDefaultValue=c;const u=new class{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new r.Emitter,
this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=new r.Emitter,this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.defaultOverridesConfigurationNode={id:"defaultOverrides",title:i.localize(0,null),properties:{}},this.configurationContributors=[this.defaultOverridesConfigurationNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},l.registerSchema(t.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,i=!0){const r=[];e.forEach(e=>{r.push(...this.validateAndRegisterProperties(e,i)),this.configurationContributors.push(e),this.registerJSONConfiguration(e)}),
l.registerSchema(t.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(r)}deregisterConfigurations(e){const i=[],r=e=>{if(e.properties)for(const r in e.properties)switch(i.push(r),delete this.configurationProperties[r],delete t.allSettings.properties[r],e.properties[r].scope){case 1:delete t.applicationSettings.properties[r];break;case 2:delete t.machineSettings.properties[r];break;case 6:delete t.machineOverridableSettings.properties[r];break;case 3:delete t.windowSettings.properties[r];break;case 4:case 5:delete t.resourceSettings.properties[r]}e.allOf&&e.allOf.forEach(e=>r(e))};for(const t of e){r(t);const e=this.configurationContributors.indexOf(t);-1!==e&&this.configurationContributors.splice(e,1)}l.registerSchema(t.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)}registerDefaultConfigurations(e){const r=[]
;for(const n of e)for(const e in n.defaults){const s=n.defaults[e];if(t.OVERRIDE_PROPERTY_PATTERN.test(e)&&"object"==typeof s){const n={type:"object",default:s,description:i.localize(1,null,e),$ref:t.resourceLanguageSettingsSchemaId};t.allSettings.properties[e]=n,this.defaultOverridesConfigurationNode.properties[e]=n,this.configurationProperties[e]=n,r.push(e)}}this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(r)}deregisterDefaultConfigurations(e){const i=[];for(const r of e)for(const e in r.defaults)i.push(e),delete t.allSettings.properties[e],delete this.defaultOverridesConfigurationNode.properties[e],delete this.configurationProperties[e];this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}validateAndRegisterProperties(e,i=!0,r=3){r=s.isUndefinedOrNull(e.scope)?r:e.scope
;let n=[],o=e.properties;if(o)for(let e in o){if(i&&h(e)){delete o[e];continue}let a=o[e],l=a.default;s.isUndefined(l)&&(a.default=c(a.type)),t.OVERRIDE_PROPERTY_PATTERN.test(e)?a.scope=void 0:a.scope=s.isUndefinedOrNull(a.scope)?r:a.scope,!o[e].hasOwnProperty("included")||o[e].included?(this.configurationProperties[e]=o[e],!o[e].deprecationMessage&&o[e].markdownDeprecationMessage&&(o[e].deprecationMessage=o[e].markdownDeprecationMessage),n.push(e)):(this.excludedConfigurationProperties[e]=o[e],delete o[e])}let a=e.allOf;if(a)for(let e of a)n.push(...this.validateAndRegisterProperties(e,i,r));return n}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}registerJSONConfiguration(e){const i=e=>{let r=e.properties;if(r)for(const e in r)switch(t.allSettings.properties[e]=r[e],r[e].scope){case 1:t.applicationSettings.properties[e]=r[e];break;case 2:
t.machineSettings.properties[e]=r[e];break;case 6:t.machineOverridableSettings.properties[e]=r[e];break;case 3:t.windowSettings.properties[e]=r[e];break;case 4:t.resourceSettings.properties[e]=r[e];break;case 5:t.resourceSettings.properties[e]=r[e],this.resourceLanguageSettingsSchema.properties[e]=r[e]}let n=e.allOf;n&&n.forEach(i)};i(e)}updateOverridePropertyPatternKey(){var e;for(const r of a.values(this.overrideIdentifiers)){const n=`[${r}]`,s={type:"object",description:i.localize(2,null),errorMessage:i.localize(3,null),$ref:t.resourceLanguageSettingsSchemaId,default:null===(e=this.defaultOverridesConfigurationNode.properties[n])||void 0===e?void 0:e.default};t.allSettings.properties[n]=s,t.applicationSettings.properties[n]=s,t.machineSettings.properties[n]=s,t.machineOverridableSettings.properties[n]=s,t.windowSettings.properties[n]=s,t.resourceSettings.properties[n]=s}this._onDidSchemaChange.fire()}};function h(e){
return t.OVERRIDE_PROPERTY_PATTERN.test(e)?i.localize(4,null,e):void 0!==u.getConfigurationProperties()[e]?i.localize(5,null,e):null}n.Registry.add(t.Extensions.Configuration,u),t.validateProperty=h,t.getScopes=function(){const e=[],t=u.getConfigurationProperties();for(const i of Object.keys(t))e.push([i,t[i].scope]);return e.push(["launch",4]),e.push(["task",4]),e}})),define(e[26],t([0,1,11,6,14,21,4,31]),(function(e,t,i,r,n,s,o,a){"use strict";function l(e,t){const i=Object.create(null);for(let r in e)c(i,r,e[r],t);return i}function c(e,t,i,r){const n=t.split("."),s=n.pop();let o=e;for(let e=0;e<n.length;e++){let i=n[e],s=o[i];switch(typeof s){case"undefined":s=o[i]=Object.create(null);break;case"object":break;default:return void r(`Ignoring ${t} as ${n.slice(0,e+1).join(".")} is ${JSON.stringify(s)}`)}o=s}if("object"==typeof o&&null!==o)try{o[s]=i}catch(e){r(`Ignoring ${t} as ${n.join(".")} is ${JSON.stringify(o)}`)}else r(`Ignoring ${t} as ${n.join(".")} is ${JSON.stringify(o)}`)}function u(e,t,i){
const r=function(e,t){let i=e;for(const e of t){if("object"!=typeof i||null===i)return;i=i[e]}return i}(e,t.split("."));return void 0===r?i:r}function h(e){return e.substring(1,e.length-1)}function d(e){return`[${e}]`}Object.defineProperty(t,"__esModule",{value:!0}),t.getMigratedSettingValue=t.keyFromOverrideIdentifier=t.overrideIdentifierFromKey=t.getDefaultValues=t.getConfigurationKeys=t.merge=t.getConfigurationValue=t.removeFromValueTree=t.addToValueTree=t.toValuesTree=t.toOverrides=t.compare=t.ConfigurationTargetToString=t.ConfigurationTarget=t.isConfigurationOverrides=t.IConfigurationService=void 0,t.IConfigurationService=o.createDecorator("configurationService"),t.isConfigurationOverrides=function(e){return e&&"object"==typeof e&&(!e.overrideIdentifier||"string"==typeof e.overrideIdentifier)&&(!e.resource||e.resource instanceof n.URI)},function(e){e[e.USER=1]="USER",e[e.USER_LOCAL=2]="USER_LOCAL",e[e.USER_REMOTE=3]="USER_REMOTE",e[e.WORKSPACE=4]="WORKSPACE",e[e.WORKSPACE_FOLDER=5]="WORKSPACE_FOLDER",
e[e.DEFAULT=6]="DEFAULT",e[e.MEMORY=7]="MEMORY"}(t.ConfigurationTarget||(t.ConfigurationTarget={})),t.ConfigurationTargetToString=function(e){switch(e){case 1:return"USER";case 2:return"USER_LOCAL";case 3:return"USER_REMOTE";case 4:return"WORKSPACE";case 5:return"WORKSPACE_FOLDER";case 6:return"DEFAULT";case 7:return"MEMORY"}},t.compare=function e(t,r){const n=r?t?r.keys.filter(e=>-1===t.keys.indexOf(e)):[...r.keys]:[],s=t?r?t.keys.filter(e=>-1===r.keys.indexOf(e)):[...t.keys]:[],o=[];if(r&&t)for(const e of t.keys)if(-1!==r.keys.indexOf(e)){const n=u(t.contents,e),s=u(r.contents,e);i.equals(n,s)||o.push(e)}const a=[],l=e=>{const t={};for(const i of e)for(const e of i.identifiers)t[d(e)]=i;return t},c=r?l(r.overrides):{},f=t?l(t.overrides):{};if(Object.keys(c).length)for(const e of n){const t=c[e];t&&a.push([h(e),t.keys])}if(Object.keys(f).length)for(const e of s){const t=f[e];t&&a.push([h(e),t.keys])}if(Object.keys(c).length&&Object.keys(f).length)for(const t of o){const i=f[t],r=c[t];if(i&&r){const n=e({
contents:i.contents,keys:i.keys,overrides:[]},{contents:r.contents,keys:r.keys,overrides:[]});a.push([h(t),[...n.added,...n.removed,...n.updated]])}}return{added:n,removed:s,updated:o,overrides:a}},t.toOverrides=function(e,t){const i=[];for(const r of Object.keys(e))if(a.OVERRIDE_PROPERTY_PATTERN.test(r)){const n={};for(const t in e[r])n[t]=e[r][t];i.push({identifiers:[h(r).trim()],keys:Object.keys(n),contents:l(n,t)})}return i},t.toValuesTree=l,t.addToValueTree=c,t.removeFromValueTree=function(e,t){!function e(t,i){const r=i.shift();if(0===i.length)return void delete t[r];if(-1!==Object.keys(t).indexOf(r)){const n=t[r];"object"!=typeof n||Array.isArray(n)||(e(n,i),0===Object.keys(n).length&&delete t[r])}}(e,t.split("."))},t.getConfigurationValue=u,t.merge=function e(t,i,n){Object.keys(i).forEach(s=>{s in t?r.isObject(t[s])&&r.isObject(i[s])?e(t[s],i[s],n):n&&(t[s]=i[s]):t[s]=i[s]})},t.getConfigurationKeys=function(){const e=s.Registry.as(a.Extensions.Configuration).getConfigurationProperties()
;return Object.keys(e)},t.getDefaultValues=function(){const e=Object.create(null),t=s.Registry.as(a.Extensions.Configuration).getConfigurationProperties();for(let i in t){c(e,i,t[i].default,e=>console.error(`Conflict in default settings: ${e}`))}return e},t.overrideIdentifierFromKey=h,t.keyFromOverrideIdentifier=d,t.getMigratedSettingValue=function(e,t,i){const r=e.inspect(t),n=e.inspect(i);return void 0!==r.userValue||void 0!==r.workspaceValue||void 0!==r.workspaceFolderValue?r.value:void 0!==n.userValue||void 0!==n.workspaceValue||void 0!==n.workspaceFolderValue?n.value:r.defaultValue}})),define(e[105],t([0,1,61,27,17,6,11,14,31,26,21,3,9,18]),(function(e,t,i,r,n,s,o,a,l,c,u,h,d,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllKeysConfigurationChangeEvent=t.ConfigurationChangeEvent=t.mergeChanges=t.Configuration=t.UserSettings=t.ConfigurationModelParser=t.DefaultConfigurationModel=t.ConfigurationModel=void 0;class g{constructor(e={},t=[],i=[]){this._contents=e,this._keys=t,
this._overrides=i,this.isFrozen=!1}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?c.getConfigurationValue(this.contents,e):this.contents}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?c.getConfigurationValue(i,e):i:void 0}getKeysForOverrideIdentifier(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.keys;return[]}override(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!=typeof t||!Object.keys(t).length)return this;let i={};for(const e of n.distinct([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[e],n=t[e];n&&("object"==typeof r&&"object"==typeof n?(r=o.deepClone(r),this.mergeContents(r,n)):r=n),i[e]=r}return new g(i,this.keys,this.overrides)}merge(...e){
const t=o.deepClone(this.contents),i=o.deepClone(this.overrides),r=[...this.keys];for(const s of e){this.mergeContents(t,s.contents);for(const e of s.overrides){const[t]=i.filter(t=>n.equals(t.identifiers,e.identifiers));t?this.mergeContents(t.contents,e.contents):i.push(o.deepClone(e))}for(const e of s.keys)-1===r.indexOf(e)&&r.push(e)}return new g(t,r,i)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const i of Object.keys(t))i in e&&s.isObject(e[i])&&s.isObject(t[i])?this.mergeContents(e[i],t[i]):e[i]=o.deepClone(t[i])}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?o.deepFreeze(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),c.addToValueTree(this.contents,e,t,e=>{throw new Error(e)})}removeValue(e){this.removeKey(e)&&c.removeFromValueTree(this.contents,e)}addKey(e){let t=this.keys.length
;for(let i=0;i<t;i++)0===e.indexOf(this.keys[i])&&(t=i);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return-1!==t&&(this.keys.splice(t,1),!0)}}t.ConfigurationModel=g;t.DefaultConfigurationModel=class extends g{constructor(){const e=c.getDefaultValues(),t=c.getConfigurationKeys(),i=[];for(const t of Object.keys(e))l.OVERRIDE_PROPERTY_PATTERN.test(t)&&i.push({identifiers:[c.overrideIdentifierFromKey(t).trim()],keys:Object.keys(e[t]),contents:c.toValuesTree(e[t],e=>console.error(`Conflict in default settings file: ${e}`))});super(e,t,i)}};class p{constructor(e,t){this._name=e,this._scopes=t,this._raw=null,this._configurationModel=null,this._parseErrors=[]}get configurationModel(){return this._configurationModel||new g}get errors(){return this._parseErrors}parseContent(e){if(e){const t=this.doParseContent(e);this.parseRaw(t)}}parseRaw(e){this._raw=e;const t=this.doParseRaw(e);this._configurationModel=new g(t.contents,t.keys,t.overrides)}parse(){this._raw&&this.parseRaw(this._raw)}
doParseContent(e){let t={},r=null,n=[],s=[],o=[];function a(e){Array.isArray(n)?n.push(e):r&&(n[r]=e)}let l={onObjectBegin:()=>{let e={};a(e),s.push(n),n=e,r=null},onObjectProperty:e=>{r=e},onObjectEnd:()=>{n=s.pop()},onArrayBegin:()=>{let e=[];a(e),s.push(n),n=e,r=null},onArrayEnd:()=>{n=s.pop()},onLiteralValue:a,onError:(e,t,i)=>{o.push({error:e,offset:t,length:i})}};if(e)try{i.visit(e,l),t=n[0]||{}}catch(e){console.error(`Error while parsing settings file ${this._name}: ${e}`),this._parseErrors=[e]}return t}doParseRaw(e){if(this._scopes){const t=u.Registry.as(l.Extensions.Configuration).getConfigurationProperties();e=this.filterByScope(e,t,!0,this._scopes)}return{contents:c.toValuesTree(e,e=>console.error(`Conflict in settings file ${this._name}: ${e}`)),keys:Object.keys(e),overrides:c.toOverrides(e,e=>console.error(`Conflict in settings file ${this._name}: ${e}`))}}filterByScope(e,t,i,r){const n={};for(let s in e)if(l.OVERRIDE_PROPERTY_PATTERN.test(s)&&i)n[s]=this.filterByScope(e[s],t,!1,r);else{
const i=this.getScope(s,t);-1!==r.indexOf(i)&&(n[s]=e[s])}return n}getScope(e,t){const i=t[e];return i&&void 0!==i.scope?i.scope:3}}t.ConfigurationModelParser=p;class m extends h.Disposable{constructor(e,t,i){super(),this.userSettingsResource=e,this.scopes=t,this.fileService=i,this._onDidChange=this._register(new d.Emitter),this.onDidChange=this._onDidChange.event,this.parser=new p(this.userSettingsResource.toString(),this.scopes),this._register(this.fileService.watch(f.dirname(this.userSettingsResource))),this._register(d.Event.filter(this.fileService.onDidFilesChange,e=>e.contains(this.userSettingsResource))(()=>this._onDidChange.fire()))}async loadConfiguration(){try{const e=await this.fileService.readFile(this.userSettingsResource);return this.parser.parseContent(e.value.toString()||"{}"),this.parser.configurationModel}catch(e){return new g}}reprocess(){return this.parser.parse(),this.parser.configurationModel}}t.UserSettings=m;class v{
constructor(e,t,i=new g,n=new g,s=new r.ResourceMap,o=new g,a=new r.ResourceMap,l=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=i,this._workspaceConfiguration=n,this._folderConfigurations=s,this._memoryConfiguration=o,this._memoryConfigurationByResource=a,this._freeze=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new r.ResourceMap,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidateConfigurationModel(t,i).getValue(e)}updateValue(e,t,i={}){let r;i.resource?(r=this._memoryConfigurationByResource.get(i.resource))||(r=new g,this._memoryConfigurationByResource.set(i.resource,r)):r=this._memoryConfiguration,void 0===t?r.removeValue(e):r.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){
const r=this.getConsolidateConfigurationModel(t,i),s=this.getFolderConfigurationModelForResource(t.resource,i),o=t.resource&&this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration,a=t.overrideIdentifier?this._defaultConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),l=t.overrideIdentifier?this.userConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.userConfiguration.freeze().getValue(e),c=t.overrideIdentifier?this.localUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.localUserConfiguration.freeze().getValue(e),u=t.overrideIdentifier?this.remoteUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.remoteUserConfiguration.freeze().getValue(e),h=i?t.overrideIdentifier?this._workspaceConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,d=s?t.overrideIdentifier?s.freeze().override(t.overrideIdentifier).getValue(e):s.freeze().getValue(e):void 0,f=t.overrideIdentifier?o.override(t.overrideIdentifier).getValue(e):o.getValue(e),g=r.getValue(e),p=n.distinct(n.flatten(r.overrides.map(e=>e.identifiers))).filter(t=>void 0!==r.getOverrideValue(e,t))
;return{defaultValue:a,userValue:l,userLocalValue:c,userRemoteValue:u,workspaceValue:h,workspaceFolderValue:d,memoryValue:f,value:g,default:void 0!==a?{value:this._defaultConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._defaultConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,user:void 0!==l?{value:this.userConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.userConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userLocal:void 0!==c?{value:this.localUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.localUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userRemote:void 0!==u?{value:this.remoteUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.remoteUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspace:void 0!==h?{value:this._workspaceConfiguration.freeze().getValue(e),
override:t.overrideIdentifier?this._workspaceConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspaceFolder:void 0!==d?{value:null==s?void 0:s.freeze().getValue(e),override:t.overrideIdentifier?null==s?void 0:s.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,memory:void 0!==f?{value:o.getValue(e),override:t.overrideIdentifier?o.getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,overrideIdentifiers:p.length?p:void 0}}keys(e){const t=this.getFolderConfigurationModelForResource(void 0,e);return{default:this._defaultConfiguration.freeze().keys,user:this.userConfiguration.freeze().keys,workspace:this._workspaceConfiguration.freeze().keys,workspaceFolder:t?t.freeze().keys:[]}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(e){this._localUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,
this._foldersConsolidatedConfigurations.clear()}updateRemoteUserConfiguration(e){this._remoteUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(e,t){this._folderConfigurations.set(e,t),this._foldersConsolidatedConfigurations.delete(e)}deleteFolderConfiguration(e){this.folderConfigurations.delete(e),this._foldersConsolidatedConfigurations.delete(e)}compareAndUpdateDefaultConfiguration(e,t){const i=t.filter(e=>l.OVERRIDE_PROPERTY_PATTERN.test(e)).map(t=>{
const i=c.overrideIdentifierFromKey(t),r=this._defaultConfiguration.getKeysForOverrideIdentifier(i),n=e.getKeysForOverrideIdentifier(i),s=[...n.filter(e=>-1===r.indexOf(e)),...r.filter(e=>-1===n.indexOf(e)),...r.filter(t=>!o.equals(this._defaultConfiguration.override(i).getValue(t),e.override(i).getValue(t)))];return[i,s]});return this.updateDefaultConfiguration(e),{keys:t,overrides:i}}compareAndUpdateLocalUserConfiguration(e){const{added:t,updated:i,removed:r,overrides:n}=c.compare(this.localUserConfiguration,e),s=[...t,...i,...r];return s.length&&this.updateLocalUserConfiguration(e),{keys:s,overrides:n}}compareAndUpdateRemoteUserConfiguration(e){const{added:t,updated:i,removed:r,overrides:n}=c.compare(this.remoteUserConfiguration,e);let s=[...t,...i,...r];return s.length&&this.updateRemoteUserConfiguration(e),{keys:s,overrides:n}}compareAndUpdateWorkspaceConfiguration(e){const{added:t,updated:i,removed:r,overrides:n}=c.compare(this.workspaceConfiguration,e);let s=[...t,...i,...r]
;return s.length&&this.updateWorkspaceConfiguration(e),{keys:s,overrides:n}}compareAndUpdateFolderConfiguration(e,t){const i=this.folderConfigurations.get(e),{added:r,updated:n,removed:s,overrides:o}=c.compare(i,t);let a=[...r,...n,...s];return!a.length&&i||this.updateFolderConfiguration(e,t),{keys:a,overrides:o}}compareAndDeleteFolderConfiguration(e){const t=this.folderConfigurations.get(e);if(!t)throw new Error("Unknown folder");this.deleteFolderConfiguration(e);const{added:i,updated:r,removed:n,overrides:s}=c.compare(t,void 0);return{keys:[...i,...r,...n],overrides:s}}get defaults(){return this._defaultConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){
return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidateConfigurationModel(e,t){let i=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?i.override(e.overrideIdentifier):i}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const r=t.getFolder(e);r&&(i=this.getFolderConsolidatedConfiguration(r.uri)||i);const n=this._memoryConfigurationByResource.get(e);n&&(i=i.merge(n))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){
let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(e);r?(t=i.merge(r),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:this._folderConfigurations.keys().reduce((e,t)=>{const{contents:i,overrides:r,keys:n}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:r,keys:n}]),e},[])}}allKeys(){const e=new Set
;return this._defaultConfiguration.freeze().keys.forEach(t=>e.add(t)),this.userConfiguration.freeze().keys.forEach(t=>e.add(t)),this._workspaceConfiguration.freeze().keys.forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.freeze().keys.forEach(t=>e.add(t))),r.values(e)}getAllKeysForOverrideIdentifier(e){const t=new Set;return this._defaultConfiguration.getKeysForOverrideIdentifier(e).forEach(e=>t.add(e)),this.userConfiguration.getKeysForOverrideIdentifier(e).forEach(e=>t.add(e)),this._workspaceConfiguration.getKeysForOverrideIdentifier(e).forEach(e=>t.add(e)),this._folderConfigurations.forEach(i=>i.getKeysForOverrideIdentifier(e).forEach(e=>t.add(e))),r.values(t)}static parse(e){const t=this.parseConfigurationModel(e.defaults),i=this.parseConfigurationModel(e.user),n=this.parseConfigurationModel(e.workspace),s=e.folders.reduce((e,t)=>(e.set(a.URI.revive(t[0]),this.parseConfigurationModel(t[1])),e),new r.ResourceMap);return new v(t,i,new g,n,s,new g,new r.ResourceMap,!1)}
static parseConfigurationModel(e){return new g(e.contents,e.keys,e.overrides).freeze()}}t.Configuration=v,t.mergeChanges=function(...e){if(0===e.length)return{keys:[],overrides:[]};if(1===e.length)return e[0];const t=new Set,i=new Map;for(const n of e)n.keys.forEach(e=>t.add(e)),n.overrides.forEach(([e,t])=>{const n=r.getOrSet(i,e,new Set);t.forEach(e=>n.add(e))});const n=[];return i.forEach((e,t)=>n.push([t,r.values(e)])),{keys:r.values(t),overrides:n}};class y{constructor(e,t,i,n){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this._previousConfiguration=void 0;const s=new Set;e.keys.forEach(e=>s.add(e)),e.overrides.forEach(([,e])=>e.forEach(e=>s.add(e))),this.affectedKeys=r.values(s);const o=new g;this.affectedKeys.forEach(e=>o.setValue(e,{})),this.affectedKeysTree=o.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=v.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var i
;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const r=this.previousConfiguration?this.previousConfiguration.getValue(e,t,null===(i=this.previous)||void 0===i?void 0:i.workspace):void 0,n=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!o.equals(r,n)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let i,r=c.toValuesTree({[t]:!0},()=>{});for(;"object"==typeof r&&(i=Object.keys(r)[0]);){if(!(e=e[i]))return!1;r=r[i]}return!0}}t.ConfigurationChangeEvent=y;t.AllKeysConfigurationChangeEvent=class extends y{constructor(e,t,i,r){super({keys:e.allKeys(),overrides:[]},void 0,e,t),this.source=i,this.sourceConfig=r}}})),define(e[106],t([0,1,21,31,3,26,105,9,12]),(function(e,t,i,r,n,s,o,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationService=void 0;class c extends n.Disposable{constructor(e,t){super(),this.settingsResource=e,this._onDidChangeConfiguration=this._register(new a.Emitter),
this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this.userConfiguration=this._register(new o.UserSettings(this.settingsResource,void 0,t)),this.configuration=new o.Configuration(new o.DefaultConfigurationModel,new o.ConfigurationModel),this.reloadConfigurationScheduler=this._register(new l.RunOnceScheduler(()=>this.reloadConfiguration(),50)),this._register(i.Registry.as(r.Extensions.Configuration).onDidUpdateConfiguration(e=>this.onDidDefaultConfigurationChange(e))),this._register(this.userConfiguration.onDidChange(()=>this.reloadConfigurationScheduler.schedule()))}async initialize(){const e=await this.userConfiguration.loadConfiguration();this.configuration=new o.Configuration(new o.DefaultConfigurationModel,e)}getConfigurationData(){return this.configuration.toData()}getValue(e,t){const i="string"==typeof e?e:void 0,r=s.isConfigurationOverrides(e)?e:s.isConfigurationOverrides(t)?t:{};return this.configuration.getValue(i,r,void 0)}updateValue(e,t,i,r){
return Promise.reject(new Error("not supported"))}inspect(e){return this.configuration.inspect(e,{},void 0)}keys(){return this.configuration.keys(void 0)}async reloadConfiguration(){const e=await this.userConfiguration.loadConfiguration();this.onDidChangeUserConfiguration(e)}onDidChangeUserConfiguration(e){const t=this.configuration.toData(),i=this.configuration.compareAndUpdateLocalUserConfiguration(e);this.trigger(i,t,1)}onDidDefaultConfigurationChange(e){const t=this.configuration.toData(),i=this.configuration.compareAndUpdateDefaultConfiguration(new o.DefaultConfigurationModel,e);this.trigger(i,t,6)}trigger(e,t,i){const r=new o.ConfigurationChangeEvent(e,{data:t},this.configuration);r.source=i,r.sourceConfig=this.getTargetConfiguration(i),this._onDidChangeConfiguration.fire(r)}getTargetConfiguration(e){switch(e){case 6:return this.configuration.defaults.contents;case 1:return this.configuration.localUserConfiguration.contents}return{}}}t.ConfigurationService=c})),
define(e[54],t([0,1,81,4,31,21,16]),(function(e,t,i,r,n,s,o){"use strict";function a(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||1223===e.res.statusCode}function l(e){return 204===e.res.statusCode}Object.defineProperty(t,"__esModule",{value:!0}),t.asJson=t.asText=t.isSuccess=t.IRequestService=void 0,t.IRequestService=r.createDecorator("requestService"),t.isSuccess=a,t.asText=async function(e){if(!a(e))throw new Error("Server returned "+e.res.statusCode);return l(e)?null:(await o.streamToBuffer(e.stream)).toString()},t.asJson=async function(e){if(!a(e))throw new Error("Server returned "+e.res.statusCode);if(l(e))return null;const t=(await o.streamToBuffer(e.stream)).toString();try{return JSON.parse(t)}catch(e){throw e.message+=":\n"+t,e}},s.Registry.as(n.Extensions.Configuration).registerConfiguration({id:"http",order:15,title:i.localize(0,null),type:"object",properties:{"http.proxy":{type:"string",pattern:"^https?://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",
markdownDescription:i.localize(1,null)},"http.proxyStrictSSL":{type:"boolean",default:!0,description:i.localize(2,null)},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:i.localize(3,null)},"http.proxySupport":{type:"string",enum:["off","on","override"],enumDescriptions:[i.localize(4,null),i.localize(5,null),i.localize(6,null)],default:"override",description:i.localize(7,null)},"http.systemCertificates":{type:"boolean",default:!0,description:i.localize(8,null)}}})})),define(e[107],t([0,1,108,6]),(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProxyAgent=void 0,t.getProxyAgent=async function(t,n={}){const s=i.parse(t),o=n.proxyUrl||function(e){return"http:"===e.protocol?process.env.HTTP_PROXY||process.env.http_proxy||null:"https:"===e.protocol&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}(s);if(!o)return null;const a=i.parse(o);if(!/^https?:$/.test(a.protocol||""))return null
;const l={host:a.hostname||"",port:a.port||("https"===a.protocol?"443":"80"),auth:a.auth,rejectUnauthorized:!r.isBoolean(n.strictSSL)||n.strictSSL};return"http:"===s.protocol?new(await new Promise((t,i)=>{e(["http-proxy-agent"],t,i)}))(l):new(await new Promise((t,i)=>{e(["https-proxy-agent"],t,i)}))(l)}})),define(e[109],t([0,1,39,16]),(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getServiceMachineId=void 0,t.getServiceMachineId=async function(e,t,n){let s=n&&n.get("storage.serviceMachineId",0)||null;if(s)return s;try{const r=(await t.readFile(e.serviceMachineIdResource)).value.toString();s=i.isUUID(r)?r:null}catch(e){s=null}if(!s){s=i.generateUuid();try{await t.writeFile(e.serviceMachineIdResource,r.VSBuffer.fromString(s))}catch(e){}}return n&&n.store("storage.serviceMachineId",s,0),s}})),define(e[110],t([0,1,4]),(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IStateService=void 0,t.IStateService=i.createDecorator("stateService")})),
define(e[111],t([0,1,2,24,19,8,6,10]),(function(e,t,n,s,o,a,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateService=t.FileStorage=void 0;class u{constructor(e,t){this.dbPath=e,this.onError=t,this._database=null,this.lastFlushedSerializedDatabase=null}get database(){return this._database||(this._database=this.loadSync()),this._database}async init(){if(this._database)return;const e=await this.loadAsync();this._database||(this._database=e)}loadSync(){try{return this.lastFlushedSerializedDatabase=s.readFileSync(this.dbPath).toString(),JSON.parse(this.lastFlushedSerializedDatabase)}catch(e){return"ENOENT"!==e.code&&this.onError(e),{}}}async loadAsync(){try{return this.lastFlushedSerializedDatabase=(await a.readFile(this.dbPath)).toString(),JSON.parse(this.lastFlushedSerializedDatabase)}catch(e){return"ENOENT"!==e.code&&this.onError(e),{}}}getItem(e,t){const i=this.database[e];return l.isUndefinedOrNull(i)?t:i}setItem(e,t){if(l.isUndefinedOrNull(t))return this.removeItem(e)
;("string"!=typeof t&&"number"!=typeof t&&"boolean"!=typeof t||this.database[e]!==t)&&(this.database[e]=t,this.saveSync())}removeItem(e){l.isUndefined(this.database[e])||(this.database[e]=void 0,this.saveSync())}saveSync(){const e=JSON.stringify(this.database,null,4);if(e!==this.lastFlushedSerializedDatabase)try{a.writeFileSync(this.dbPath,e),this.lastFlushedSerializedDatabase=e}catch(e){this.onError(e)}}}t.FileStorage=u;let h=(()=>{let e=class e{constructor(t,i){this.fileStorage=new u(n.join(t.userDataPath,e.STATE_FILE),e=>i.error(e))}init(){return this.fileStorage.init()}getItem(e,t){return this.fileStorage.getItem(e,t)}setItem(e,t){this.fileStorage.setItem(e,t)}removeItem(e){this.fileStorage.removeItem(e)}};return e.STATE_FILE="storage.json",e=i([r(0,o.IEnvironmentService),r(1,c.ILogService)],e)})();t.StateService=h})),define(e[112],t([0,1,4,9,3,6]),(function(e,t,i,r,n,s){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),
t.logStorage=t.InMemoryStorageService=t.StorageScope=t.WillSaveStateReason=t.IStorageService=void 0,t.IStorageService=i.createDecorator("storageService"),function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"}(o=t.WillSaveStateReason||(t.WillSaveStateReason={})),function(e){e[e.GLOBAL=0]="GLOBAL",e[e.WORKSPACE=1]="WORKSPACE"}(t.StorageScope||(t.StorageScope={}));class a extends n.Disposable{constructor(){super(...arguments),this._onDidChangeStorage=this._register(new r.Emitter),this.onDidChangeStorage=this._onDidChangeStorage.event,this._onWillSaveState=this._register(new r.Emitter),this.onWillSaveState=this._onWillSaveState.event,this.globalCache=new Map,this.workspaceCache=new Map}getCache(e){return 0===e?this.globalCache:this.workspaceCache}get(e,t,i){const r=this.getCache(t).get(e);return s.isUndefinedOrNull(r)?i:r}getBoolean(e,t,i){const r=this.getCache(t).get(e);return s.isUndefinedOrNull(r)?i:"true"===r}getNumber(e,t,i){const r=this.getCache(t).get(e);return s.isUndefinedOrNull(r)?i:parseInt(r,10)}
store(e,t,i){if(s.isUndefinedOrNull(t))return this.remove(e,i);const r=String(t);return this.getCache(i).get(e)===r?Promise.resolve():(this.getCache(i).set(e,r),this._onDidChangeStorage.fire({scope:i,key:e}),Promise.resolve())}remove(e,t){return this.getCache(t).delete(e)?(this._onDidChangeStorage.fire({scope:t,key:e}),Promise.resolve()):Promise.resolve()}logStorage(){l(this.globalCache,this.workspaceCache,"inMemory","inMemory")}async migrate(e){}flush(){this._onWillSaveState.fire({reason:o.NONE})}}async function l(e,t,i,r){const n=e=>{try{return JSON.parse(e)}catch(t){return e}},s=new Map,o=new Map;e.forEach((e,t)=>{s.set(t,e),o.set(t,n(e))});const a=new Map,l=new Map;t.forEach((e,t)=>{a.set(t,e),l.set(t,n(e))}),console.group(`Storage: Global (path: ${i})`);let c=[];s.forEach((e,t)=>{c.push({key:t,value:e})}),console.table(c),console.groupEnd(),console.log(o),console.group(`Storage: Workspace (path: ${r})`);let u=[];a.forEach((e,t)=>{u.push({key:t,value:e})}),console.table(u),console.groupEnd(),
console.log(l)}t.InMemoryStorageService=a,t.logStorage=l})),define(e[41],t([0,1,4]),(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crashReporterIdStorageKey=t.trueMachineIdKey=t.machineIdKey=t.lastSessionDateStorageKey=t.firstSessionDateStorageKey=t.currentSessionDateStorageKey=t.instanceStorageKey=t.ITelemetryService=void 0,t.ITelemetryService=i.createDecorator("telemetryService"),t.instanceStorageKey="telemetry.instanceId",t.currentSessionDateStorageKey="telemetry.currentSessionDate",t.firstSessionDateStorageKey="telemetry.firstSessionDate",t.lastSessionDateStorageKey="telemetry.lastSessionDate",t.machineIdKey="telemetry.machineId",t.trueMachineIdKey="telemetry.trueMachineId",t.crashReporterIdStorageKey="crashReporter.guid"})),define(e[113],t([0,1,25,30,29,11,41,54,47,19,27,28,10,20,53,112,109,4]),(function(e,t,n,s,o,a,l,c,u,h,d,f,g,p,m,v,y,E){"use strict";var S,w;function b(...e){return String(e.reduce((e,t)=>e|t,0))}Object.defineProperty(t,"__esModule",{value:!0}),
t.resolveMarketplaceHeaders=t.ExtensionGalleryService=void 0,function(e){e[e.None=0]="None",e[e.IncludeVersions=1]="IncludeVersions",e[e.IncludeFiles=2]="IncludeFiles",e[e.IncludeCategoryAndTags=4]="IncludeCategoryAndTags",e[e.IncludeSharedAccounts=8]="IncludeSharedAccounts",e[e.IncludeVersionProperties=16]="IncludeVersionProperties",e[e.ExcludeNonValidated=32]="ExcludeNonValidated",e[e.IncludeInstallationTargets=64]="IncludeInstallationTargets",e[e.IncludeAssetUri=128]="IncludeAssetUri",e[e.IncludeStatistics=256]="IncludeStatistics",e[e.IncludeLatestVersionOnly=512]="IncludeLatestVersionOnly",e[e.Unpublished=4096]="Unpublished"}(S||(S={})),function(e){e[e.Tag=1]="Tag",e[e.ExtensionId=4]="ExtensionId",e[e.Category=5]="Category",e[e.ExtensionName=7]="ExtensionName",e[e.Target=8]="Target",e[e.Featured=9]="Featured",e[e.SearchText=10]="SearchText",e[e.ExcludeWithFlags=12]="ExcludeWithFlags"}(w||(w={}));const C={Icon:"Microsoft.VisualStudio.Services.Icons.Default",
Details:"Microsoft.VisualStudio.Services.Content.Details",Changelog:"Microsoft.VisualStudio.Services.Content.Changelog",Manifest:"Microsoft.VisualStudio.Code.Manifest",VSIX:"Microsoft.VisualStudio.Services.VSIXPackage",License:"Microsoft.VisualStudio.Services.Content.License",Repository:"Microsoft.VisualStudio.Services.Links.Source"},P={Dependency:"Microsoft.VisualStudio.Code.ExtensionDependencies",ExtensionPack:"Microsoft.VisualStudio.Code.ExtensionPack",Engine:"Microsoft.VisualStudio.Code.Engine",LocalizedLanguages:"Microsoft.VisualStudio.Code.LocalizedLanguages"},x={pageNumber:1,pageSize:10,sortBy:0,sortOrder:0,flags:S.None,criteria:[],assetTypes:[]};class _{constructor(e=x){this.state=e}get pageNumber(){return this.state.pageNumber}get pageSize(){return this.state.pageSize}get sortBy(){return this.state.sortBy}get sortOrder(){return this.state.sortOrder}get flags(){return this.state.flags}withPage(e,t=this.state.pageSize){return new _(a.assign({},this.state,{pageNumber:e,pageSize:t}))}withFilter(e,...t){
const i=[...this.state.criteria,...t.map(t=>({filterType:e,value:t}))];return new _(a.assign({},this.state,{criteria:i}))}withSortBy(e){return new _(a.assign({},this.state,{sortBy:e}))}withSortOrder(e){return new _(a.assign({},this.state,{sortOrder:e}))}withFlags(...e){return new _(a.assign({},this.state,{flags:e.reduce((e,t)=>e|t,0)}))}withAssetTypes(...e){return new _(a.assign({},this.state,{assetTypes:e}))}get raw(){const{criteria:e,pageNumber:t,pageSize:i,sortBy:r,sortOrder:n,flags:s,assetTypes:o}=this.state;return{filters:[{criteria:e,pageNumber:t,pageSize:i,sortBy:r,sortOrder:n}],assetTypes:o,flags:s}}get searchText(){const e=this.state.criteria.filter(e=>e.filterType===w.SearchText)[0];return e&&e.value?e.value:""}}function I(e,t){const i=(e||[]).filter(e=>e.statisticName===t)[0];return i?i.value:0}function D(e){return e.files.filter(e=>0===e.assetType.indexOf("Microsoft.VisualStudio.Code.Translation.")).reduce((t,i)=>{const r=R(e,i.assetType)
;return r&&t.push([i.assetType.substring("Microsoft.VisualStudio.Code.Translation.".length),r]),t},[])}function L(e){if(e.properties){const t=e.properties.filter(e=>e.key===C.Repository),i=new RegExp("((git|ssh|http(s)?)|(git@[w.]+))(:(//)?)([w.@:/-~]+)(.git)(/)?"),r=t.filter(e=>i.test(e.value))[0];return r?{uri:r.value,fallbackUri:r.value}:null}return R(e,C.Repository)}function O(e){return{uri:`${e.fallbackAssetUri}/${C.VSIX}?redirect=true`,fallbackUri:`${e.fallbackAssetUri}/${C.VSIX}`}}function F(e){const t=R(e,C.Icon);if(t)return t;const i=s.DefaultIconPath;return{uri:i,fallbackUri:i}}function R(e,t){return e.files.filter(e=>e.assetType===t)[0]?{uri:`${e.assetUri}/${t}`,fallbackUri:`${e.fallbackAssetUri}/${t}`}:null}function T(e,t){const i=e.properties?e.properties.filter(e=>e.key===t):[],r=i.length>0&&i[0].value;return r?r.split(",").map(e=>o.adoptToGalleryExtensionId(e)):[]}function k(e){const t=e.properties?e.properties.filter(e=>e.key===P.Engine):[];return t.length>0&&t[0].value||""}function A(e){
const t=e.properties?e.properties.filter(e=>e.key===P.LocalizedLanguages):[],i=t.length>0&&t[0].value||"";return i?i.split(","):[]}function M(e,t,i,r,n){const s={manifest:R(t,C.Manifest),readme:R(t,C.Details),changelog:R(t,C.Changelog),license:R(t,C.License),repository:L(t),download:O(t),icon:F(t),coreTranslations:D(t)};return{identifier:{id:o.getGalleryExtensionId(e.publisher.publisherName,e.extensionName),uuid:e.extensionId},name:e.extensionName,version:t.version,date:t.lastUpdated,displayName:e.displayName,publisherId:e.publisher.publisherId,publisher:e.publisher.publisherName,publisherDisplayName:e.publisher.displayName,description:e.shortDescription||"",installCount:I(e.statistics,"install"),rating:I(e.statistics,"averagerating"),ratingCount:I(e.statistics,"ratingcount"),assets:s,properties:{dependencies:T(t,P.Dependency),extensionPack:T(t,P.ExtensionPack),engine:k(t),localizedLanguages:A(t)},telemetryData:{index:(r.pageNumber-1)*r.pageSize+i,searchText:r.searchText,querySource:n},preview:(a=e.flags,
-1!==a.indexOf("preview"))};var a}let j=(()=>{let e=class{constructor(e,t,i,r,n,s,o){this.requestService=e,this.logService=t,this.environmentService=i,this.telemetryService=r,this.fileService=n,this.productService=s;const a=s.extensionsGallery;this.extensionsGalleryUrl=a&&a.serviceUrl,this.extensionsControlUrl=a&&a.controlUrl,this.commonHeadersPromise=N(s.version,this.environmentService,this.fileService,o)}api(e=""){return`${this.extensionsGalleryUrl}${e}`}isEnabled(){return!!this.extensionsGalleryUrl}getCompatibleExtension(e,t){const i=s.isIExtensionIdentifier(e)?null:e;if(i&&i.properties.engine&&u.isEngineValid(i.properties.engine,this.productService.version))return Promise.resolve(i);const{id:r,uuid:n}=i?i.identifier:e;let o=(new _).withFlags(S.IncludeAssetUri,S.IncludeStatistics,S.IncludeFiles,S.IncludeVersionProperties,S.ExcludeNonValidated).withPage(1,1).withFilter(w.Target,"Microsoft.VisualStudio.Code").withFilter(w.ExcludeWithFlags,b(S.Unpublished))
;return o=n?o.withFilter(w.ExtensionId,n):o.withFilter(w.ExtensionName,r),this.queryGallery(o,f.CancellationToken.None).then(({galleryExtensions:e})=>{const[i]=e;if(!i||!i.versions.length)return null;if(t){const e=i.versions.filter(e=>e.version===t)[0];if(e){const t=M(i,e,0,o);if(t.properties.engine&&u.isEngineValid(t.properties.engine,this.productService.version))return t}return null}return this.getLastValidExtensionVersion(i,i.versions).then(e=>e?M(i,e,0,o):null)})}query(e,t){const i=f.CancellationToken.isCancellationToken(e)?{}:e,r=f.CancellationToken.isCancellationToken(e)?e:t;if(!this.isEnabled())return Promise.reject(new Error("No extension gallery service configured."));const s=i.names?"ids":i.text?"text":"all";let o=i.text||"";const l=a.getOrDefault(i,e=>e.pageSize,50);this.telemetryService.publicLog2("galleryService:query",{type:s,text:o})
;let c=(new _).withFlags(S.IncludeLatestVersionOnly,S.IncludeAssetUri,S.IncludeStatistics,S.IncludeFiles,S.IncludeVersionProperties).withPage(1,l).withFilter(w.Target,"Microsoft.VisualStudio.Code").withFilter(w.ExcludeWithFlags,b(S.Unpublished));return o?((o=(o=(o=o.replace(/\bcategory:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(e,t,i)=>(c=c.withFilter(w.Category,i||t),""))).replace(/\btag:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(e,t,i)=>(c=c.withFilter(w.Tag,i||t),""))).trim())&&(o=o.length<200?o:o.substring(0,200),c=c.withFilter(w.SearchText,o)),c=c.withSortBy(0)):c=i.ids?c.withFilter(w.ExtensionId,...i.ids):i.names?c.withFilter(w.ExtensionName,...i.names):c.withSortBy(4),"number"==typeof i.sortBy&&(c=c.withSortBy(i.sortBy)),"number"==typeof i.sortOrder&&(c=c.withSortOrder(i.sortOrder)),this.queryGallery(c,r).then(({galleryExtensions:e,total:t})=>{return{firstPage:e.map((e,t)=>M(e,e.versions[0],t,c,i.source)),total:t,pageSize:c.pageSize,getPage:(e,t)=>{if(t.isCancellationRequested)return Promise.reject(n.canceled())
;const r=c.withPage(e+1);return this.queryGallery(r,t).then(({galleryExtensions:e})=>e.map((e,t)=>M(e,e.versions[0],t,r,i.source)))}}})}queryGallery(e,t){return this.isEnabled()?this.commonHeadersPromise.then(i=>{const r=JSON.stringify(e.raw),n=a.assign({},i,{"Content-Type":"application/json",Accept:"application/json;api-version=3.0-preview.1","Accept-Encoding":"gzip","Content-Length":r.length});return this.requestService.request({type:"POST",url:this.api("/extensionquery"),data:r,headers:n},t).then(e=>e.res.statusCode&&e.res.statusCode>=400&&e.res.statusCode<500?{galleryExtensions:[],total:0}:c.asJson(e).then(e=>{if(e){const t=e.results[0],i=t.extensions,r=t.resultMetadata&&t.resultMetadata.filter(e=>"ResultCount"===e.metadataType)[0];return{galleryExtensions:i,total:r&&r.metadataItems.filter(e=>"TotalCount"===e.name)[0].count||0}}return{galleryExtensions:[],total:0}}))}):Promise.reject(new Error("No extension gallery service configured."))}reportStatistic(e,t,i,r){
return this.isEnabled()?this.commonHeadersPromise.then(n=>{const s=Object.assign(Object.assign({},n),{Accept:"*/*;api-version=4.0-preview.1"});return this.requestService.request({type:"POST",url:this.api(`/publishers/${e}/extensions/${t}/${i}/stats?statType=${r}`),headers:s},f.CancellationToken.None).then(void 0,()=>void 0)}):Promise.resolve(void 0)}download(e,t,i){this.logService.trace("ExtensionGalleryService#download",e.identifier.id);const r=o.getGalleryExtensionTelemetryData(e),n=(new Date).getTime(),s=e=>this.telemetryService.publicLog("galleryService:downloadVSIX",a.assign(r,{duration:e})),l=1===i?"install":2===i?"update":"",c=l?{uri:`${e.assets.download.uri}&${l}=true`,fallbackUri:`${e.assets.download.fallbackUri}?${l}=true`}:e.assets.download;return this.getAsset(c).then(e=>this.fileService.writeFile(t,e.stream)).then(()=>s((new Date).getTime()-n))}getReadme(e,t){return e.assets.readme?this.getAsset(e.assets.readme,{},t).then(e=>c.asText(e)).then(e=>e||""):Promise.resolve("")}getManifest(e,t){
return e.assets.manifest?this.getAsset(e.assets.manifest,{},t).then(c.asText).then(e=>e?JSON.parse(e):null):Promise.resolve(null)}getCoreTranslation(e,t){const i=e.assets.coreTranslations.filter(e=>e[0]===t.toUpperCase())[0];return i?this.getAsset(i[1]).then(c.asText).then(e=>e?JSON.parse(e):null):Promise.resolve(null)}getChangelog(e,t){return e.assets.changelog?this.getAsset(e.assets.changelog,{},t).then(e=>c.asText(e)).then(e=>e||""):Promise.resolve("")}getAllVersions(e,t){let i=(new _).withFlags(S.IncludeVersions,S.IncludeFiles,S.IncludeVersionProperties,S.ExcludeNonValidated).withPage(1,1).withFilter(w.Target,"Microsoft.VisualStudio.Code").withFilter(w.ExcludeWithFlags,b(S.Unpublished));return i=e.identifier.uuid?i.withFilter(w.ExtensionId,e.identifier.uuid):i.withFilter(w.ExtensionName,e.identifier.id),
this.queryGallery(i,f.CancellationToken.None).then(({galleryExtensions:e})=>e.length?t?Promise.all(e[0].versions.map(e=>this.getEngine(e).then(t=>u.isEngineValid(t,this.productService.version)?e:null))).then(e=>e.filter(e=>!!e).map(e=>({version:e.version,date:e.lastUpdated}))):e[0].versions.map(e=>({version:e.version,date:e.lastUpdated})):[])}getAsset(e,t={},i=f.CancellationToken.None){return this.commonHeadersPromise.then(r=>{const s=a.assign({},r,t.headers||{});t=a.assign({},t,{type:"GET"},{headers:s});const o=e.uri,l=e.fallbackUri,u=a.assign({},t,{url:o});return this.requestService.request(u,i).then(e=>200===e.res.statusCode?Promise.resolve(e):c.asText(e).then(t=>Promise.reject(new Error(`Expected 200, got back ${e.res.statusCode} instead.\n\n${t}`)))).then(void 0,e=>{if(n.isPromiseCanceledError(e))return Promise.reject(e);const r=n.getErrorMessage(e);this.telemetryService.publicLog2("galleryService:cdnFallback",{url:o,message:r});const s=a.assign({},t,{url:l});return this.requestService.request(s,i)})})}
getLastValidExtensionVersion(e,t){const i=this.getLastValidExtensionVersionFromProperties(e,t);return i||this.getLastValidExtensionVersionRecursively(e,t)}getLastValidExtensionVersionFromProperties(e,t){for(const e of t){const t=k(e);if(!t)return null;if(u.isEngineValid(t,this.productService.version))return Promise.resolve(e)}return null}getEngine(e){const t=k(e);if(t)return Promise.resolve(t);const i=R(e,C.Manifest);if(!i)return Promise.reject("Manifest was not found");return this.getAsset(i,{headers:{"Accept-Encoding":"gzip"}}).then(e=>c.asJson(e)).then(e=>e?e.engines.vscode:Promise.reject("Error while reading manifest"))}getLastValidExtensionVersionRecursively(e,t){if(!t.length)return Promise.resolve(null);const i=t[0];return this.getEngine(i).then(r=>u.isEngineValid(r,this.productService.version)?(i.properties=i.properties||[],i.properties.push({key:P.Engine,value:r}),i):this.getLastValidExtensionVersionRecursively(e,t.slice(1)))}getExtensionsReport(){
return this.isEnabled()?this.extensionsControlUrl?this.requestService.request({type:"GET",url:this.extensionsControlUrl},f.CancellationToken.None).then(e=>200!==e.res.statusCode?Promise.reject(new Error("Could not get extensions report.")):c.asJson(e).then(e=>{const t=new Map;if(e)for(const i of e.malicious){const e=t.get(i)||{id:{id:i},malicious:!0,slow:!1};e.malicious=!0,t.set(i,e)}return Promise.resolve(d.values(t))})):Promise.resolve([]):Promise.reject(new Error("No extension gallery service configured."))}};return e=i([r(0,c.IRequestService),r(1,g.ILogService),r(2,h.IEnvironmentService),r(3,l.ITelemetryService),r(4,p.IFileService),r(5,m.IProductService),r(6,E.optional(v.IStorageService))],e)})();async function N(e,t,i,r){const n={"X-Market-Client-Id":`VSCode ${e}`,"User-Agent":`VSCode ${e}`},s=await y.getServiceMachineId(t,i,r);return n["X-Market-User-Id"]=s,n}t.ExtensionGalleryService=j,t.resolveMarketplaceHeaders=N})),define(e[114],t([0,1,82,13,4,26,31,3,11,21]),(function(e,t,n,s,o,a,l,c,u,h){
"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryService=void 0;let d=(()=>{let e=class{constructor(e,t){this._configurationService=t,this._disposables=new c.DisposableStore,this._cleanupPatterns=[],this._appender=e.appender,this._commonProperties=e.commonProperties||Promise.resolve({}),this._piiPaths=e.piiPaths||[],this._userOptIn=!0,this._enabled=!0,this._sendErrorTelemetry=!!e.sendErrorTelemetry,this._cleanupPatterns=[/file:\/\/\/.*?\/resources\/app\//gi];for(let e of this._piiPaths)this._cleanupPatterns.push(new RegExp(s.escapeRegExpCharacters(e),"gi"));this._configurationService&&(this._updateUserOptIn(),this._configurationService.onDidChangeConfiguration(this._updateUserOptIn,this,this._disposables),this.publicLog2("optInStatus",{optIn:this._userOptIn}),this._commonProperties.then(t=>{const i=/^[a-f0-9]+$/i.test(t["common.machineId"]);this.publicLog2("machineIdFallback",{usingFallbackGuid:!i}),e.trueMachineId&&this.publicLog2("machineIdDisambiguation",{
correctedMachineId:e.trueMachineId})}))}setEnabled(e){this._enabled=e}_updateUserOptIn(){const e=this._configurationService.getValue(f);this._userOptIn=e?e.enableTelemetry:this._userOptIn}get isOptedIn(){return this._userOptIn&&this._enabled}async getTelemetryInfo(){const e=await this._commonProperties;return{sessionId:e.sessionID,instanceId:e["common.instanceId"],machineId:e["common.machineId"],msftInternal:e["common.msftInternal"]}}dispose(){this._disposables.dispose()}publicLog(e,t,i){return this.isOptedIn?this._commonProperties.then(r=>{t=u.mixin(t,r),t=u.cloneAndChange(t,e=>{if("string"==typeof e)return this._cleanupInfo(e,i)}),this._appender.log(e,t)},e=>{console.error(e)}):Promise.resolve(void 0)}publicLog2(e,t,i){return this.publicLog(e,t,i)}publicLogError(e,t){return this._sendErrorTelemetry?this.publicLog(e,t,!0):Promise.resolve(void 0)}publicLogError2(e,t){return this.publicLogError(e,t)}_cleanupInfo(e,t){let i=e;if(t){const t=[];for(let i of this._cleanupPatterns)for(;;){const r=i.exec(e)
;if(!r)break;t.push([r.index,i.lastIndex])}const r=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let s=0;for(i="";;){const o=n.exec(e);if(!o)break;!r.test(o[0])&&t.every(([e,t])=>o.index<e||o.index>=t)&&(i+=e.substring(s,o.index)+"<REDACTED: user-file-path>",s=n.lastIndex)}s<e.length&&(i+=e.substr(s))}for(let e of this._cleanupPatterns)i=i.replace(e,"");return i}};return e.IDLE_START_EVENT_NAME="UserIdleStart",e.IDLE_STOP_EVENT_NAME="UserIdleStop",e=i([r(1,o.optional(a.IConfigurationService))],e)})();t.TelemetryService=d;const f="telemetry";h.Registry.as(l.Extensions.Configuration).registerConfiguration({id:f,order:110,type:"object",title:n.localize(0,null),properties:{"telemetry.enableTelemetry":{type:"boolean",description:n.localize(1,null),default:!0,tags:["usesOnlineServices"]}}})})),define(e[55],t([0,1,26,10,11,6]),(function(e,t,n,s,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),
t.cleanRemoteAuthority=t.validateTelemetryData=t.configurationTelemetry=t.LogAppender=t.NullAppender=t.combinedAppender=t.NullTelemetryService=void 0,t.NullTelemetryService=new class{constructor(){this.isOptedIn=!0}publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}publicLogError(e,t){return Promise.resolve(void 0)}publicLogError2(e,t){return this.publicLogError(e,t)}setEnabled(){}getTelemetryInfo(){return Promise.resolve({instanceId:"someValue.instanceId",sessionId:"someValue.sessionId",machineId:"someValue.machineId"})}},t.combinedAppender=function(...e){return{log:(t,i)=>e.forEach(e=>e.log(t,i)),flush:()=>Promise.all(e.map(e=>e.flush()))}},t.NullAppender={log:()=>null,flush:()=>Promise.resolve(null)};let l=(()=>{let e=class{constructor(e){this._logService=e,this.commonPropertiesRegex=/^sessionID$|^version$|^timestamp$|^commitHash$|^common\./}flush(){return Promise.resolve(void 0)}log(e,t){const i={};Object.keys(t).forEach(e=>{
this.commonPropertiesRegex.test(e)||(i[e]=t[e])}),this._logService.trace(`telemetry/${e}`,i)}};return e=i([r(0,s.ILogService)],e)})();function c(e){if(!e)return[];const t=[];return function e(t,i,r){r&&"object"==typeof r&&!Array.isArray(r)?Object.keys(r).forEach(n=>e(t,i?`${i}.${n}`:n,r[n])):t.push(i)}(t,"",e),t}t.LogAppender=l,t.configurationTelemetry=function(e,t){return t.onDidChangeConfiguration(t=>{6!==t.source&&e.publicLog2("updateConfiguration",{configurationSource:n.ConfigurationTargetToString(t.source),configurationKeys:c(t.sourceConfig)})})},t.validateTelemetryData=function(e){const t=Object.create(null),i=Object.create(null),r=Object.create(null);!function e(t,i,r=0,n){if(!t)return;for(let s of Object.getOwnPropertyNames(t)){const l=t[s],c=n?n+s:s;Array.isArray(l)?i[c]=o.safeStringify(l):l instanceof Date?i[c]=l.toISOString():a.isObject(l)?r<2?e(l,i,r+1,c+"."):i[c]=o.safeStringify(l):i[c]=l}}(e,r);for(let e in r){const n=r[e=e.length>150?e.substr(e.length-149):e]
;"number"==typeof n?i[e]=n:"boolean"==typeof n?i[e]=n?1:0:"string"==typeof n?t[e]=n.substring(0,1023):null!=n&&(t[e]=n)}return{properties:t,measurements:i}},t.cleanRemoteAuthority=function(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(i=>{0===e.indexOf(`${i}+`)&&(t=i)}),t}})),define(e[115],t([0,1,122,11,55,10]),(function(e,t,n,s,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppInsightsAppender=void 0;let l=(()=>{let e=class{constructor(e,t,i,r){this._eventPrefix=e,this._defaultData=t,this._logService=r,this._defaultData||(this._defaultData=Object.create(null)),"string"==typeof i?this._aiClient=function(e){let t
;return n.defaultClient?(t=new n.TelemetryClient(e)).channel.setUseDiskRetryCaching(!0):(n.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setInternalLogging(!1,!1).setUseDiskRetryCaching(!0).start(),t=n.defaultClient),0===e.indexOf("AIF-")&&(t.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1"),t}(i):"function"==typeof i&&(this._aiClient=i())}log(e,t){this._aiClient&&(t=s.mixin(t,this._defaultData),t=o.validateTelemetryData(t),this._logService&&this._logService.trace(`telemetry/${e}`,t),this._aiClient.trackEvent({name:this._eventPrefix+"/"+e,properties:t.properties,measurements:t.measurements}))}flush(){return this._aiClient?new Promise(e=>{this._aiClient.flush({callback:()=>{this._aiClient=void 0,e(void 0)}})}):Promise.resolve(void 0)}};return e=i([r(3,a.ILogService)],e)})();t.AppInsightsAppender=l})),define(e[116],t([0,1,15,38,39,8]),(function(e,t,i,r,n,s){
"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveCommonProperties=void 0,t.resolveCommonProperties=async function(e,t,o,a,l,c){const u=Object.create(null);u["common.machineId"]=o,u.sessionID=n.generateUuid()+Date.now(),u.commitHash=e,u.version=t,u["common.platformVersion"]=(r.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),u["common.platform"]=i.PlatformToString(i.platform),u["common.nodePlatform"]=process.platform,u["common.nodeArch"]=process.arch,u["common.product"]=c||"desktop";const h=function(e){if(!process||!process.env||!process.env.USERDNSDOMAIN)return!1;const t=process.env.USERDNSDOMAIN.toLowerCase();return e.some(e=>t===e)}(a||[]);h&&(u["common.msftInternal"]=h);let d=0;const f=Date.now();Object.defineProperties(u,{timestamp:{get:()=>new Date,enumerable:!0},"common.timesincesessionstart":{get:()=>Date.now()-f,enumerable:!0},"common.sequence":{get:()=>d++,enumerable:!0}}),
"linux"===process.platform&&process.env.SNAP&&process.env.SNAP_REVISION&&(u["common.snap"]="true");try{const e=await s.readFile(l,"utf8");u["common.source"]=e.slice(0,30)}catch(e){}return u}})),define(e[117],t([0,1,8,24,2]),(function(e,t,i,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildTelemetryMessage=void 0,t.buildTelemetryMessage=function(e,t){const s=Object.create(null),o=(e,t)=>{const i=JSON.parse(e);s[t]=i};if(t){const e=i.readdirSync(t).filter(e=>{try{return r.statSync(n.join(t,e)).isDirectory()}catch(e){return!1}}),s=[];e.forEach(e=>{1===i.readdirSync(n.join(t,e)).filter(e=>"telemetry.json"===e).length&&s.push(e)}),s.forEach(e=>{const i=r.readFileSync(n.join(t,e,"telemetry.json")).toString();o(i,e)})}let a=r.readFileSync(n.join(e,"telemetry-core.json")).toString();return o(a,"vscode-core"),a=r.readFileSync(n.join(e,"telemetry-extensions.json")).toString(),o(a,"vscode-extensions"),JSON.stringify(s,null,4)}})),
define(e[56],t([0,1,71,2,24,12,8,123,124]),(function(e,t,i,r,n,s,o,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buffer=t.extract=t.zip=t.ExtractError=void 0;class c extends Error{constructor(e,t){let i=t.message;switch(e){case"CorruptZip":i=`Corrupt ZIP: ${i}`}super(i),this.type=e,this.cause=t}}function u(e){if(e instanceof c)return e;let t=void 0;return/end of central directory record signature not found/.test(e.message)&&(t="CorruptZip"),new c(t,e)}function h(e,t,a,l){let u=s.createCancelablePromise(()=>Promise.resolve()),h=0;return l.onCancellationRequested(()=>{u.cancel(),e.close()}),new Promise((d,g)=>{const p=new s.Sequencer,m=t=>{t.isCancellationRequested||(h++,e.readEntry())};e.once("error",g),e.once("close",()=>u.then(()=>{l.isCancellationRequested||e.entryCount===h?d():g(new c("Incomplete",new Error(i.localize(1,null,h,e.entryCount))))},g)),e.readEntry(),e.on("entry",c=>{if(l.isCancellationRequested)return;if(!a.sourcePathRegex.test(c.fileName))return void m(l)
;const h=c.fileName.replace(a.sourcePathRegex,"");if(/\/$/.test(h)){const e=r.join(t,h);return void(u=s.createCancelablePromise(t=>o.mkdirp(e).then(()=>m(t)).then(void 0,g)))}const d=f(e,c),v=function(e){const t=e.externalFileAttributes>>16||33188;return[448,56,7].map(e=>t&e).reduce((e,t)=>e+t,61440&t)}(c);u=s.createCancelablePromise(e=>p.queue(()=>d.then(s=>(function(e,t,s,a,l,c){const u=r.dirname(t),h=r.join(a,u);if(0!==h.indexOf(a))return Promise.reject(new Error(i.localize(0,null,t)));const d=r.join(a,t);let f;return c.onCancellationRequested(()=>{f&&f.destroy()}),Promise.resolve(o.mkdirp(h)).then(()=>new Promise((t,i)=>{if(!c.isCancellationRequested)try{(f=n.createWriteStream(d,{mode:s})).once("close",()=>t()),f.once("error",i),e.once("error",i),e.pipe(f)}catch(e){i(e)}}))})(s,h,v,t,0,e).then(()=>m(e)))).then(null,g))})})}function d(e,t=!1){return new Promise((i,r)=>{a.open(e,t?{lazyEntries:!0}:void 0,(e,t)=>{e?r(u(e)):i(t)})})}function f(e,t){return new Promise((i,r)=>{e.openReadStream(t,(e,t)=>{
e?r(u(e)):i(t)})})}t.ExtractError=c,t.zip=function(e,t){return new Promise((i,r)=>{const s=new l.ZipFile;t.forEach(e=>{e.contents?s.addBuffer("string"==typeof e.contents?Buffer.from(e.contents,"utf8"):e.contents,e.path):e.localPath&&s.addFile(e.localPath,e.path)}),s.end();const o=n.createWriteStream(e);s.outputStream.pipe(o),s.outputStream.once("error",r),o.once("error",r),o.once("finish",()=>i(e))})},t.extract=function(e,t,i={},r){const n=new RegExp(i.sourcePath?`^${i.sourcePath}`:"");let s=d(e,!0);return i.overwrite&&(s=s.then(e=>o.rimraf(t).then(()=>e))),s.then(e=>h(e,t,{sourcePathRegex:n},r))},t.buffer=function(e,t){return function(e,t){return d(e).then(e=>new Promise((r,n)=>{e.on("entry",i=>{i.fileName===t&&f(e,i).then(e=>r(e),e=>n(e))}),e.once("close",()=>n(new Error(i.localize(2,null,t))))}))}(e,t).then(e=>new Promise((t,i)=>{const r=[];e.once("error",i),e.on("data",e=>r.push(e)),e.on("end",()=>t(Buffer.concat(r)))}))}})),define(e[57],t([0,1,56,75]),(function(e,t,i,r){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0}),t.getManifest=void 0,t.getManifest=function(e){return i.buffer(e,"extension/package.json").then(e=>{try{return JSON.parse(e.toString("utf8"))}catch(e){throw new Error(r.localize(0,null))}})}})),define(e[118],t([0,1,74,2,8,11,3,17,56,30,29,83,19,12,9,52,14,40,15,10,85,84,35,41,47,38,39,93,4,22,28,23,57,97]),(function(e,t,n,s,o,a,l,c,u,h,d,f,g,p,m,v,y,E,S,w,b,C,P,x,_,I,D,L,O,F,R,T,k,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionManagementService=t.ExtensionManagementError=void 0;class M extends Error{constructor(e,t){super(e),this.code=t}}function j(e){return new Promise((t,i)=>{try{const i=JSON.parse(e),r=i.__metadata||null;delete i.__metadata,t({manifest:i,metadata:r})}catch(e){i(new Error(n.localize(0,null)))}})}t.ExtensionManagementError=M;let N=(()=>{let t=class extends l.Disposable{constructor(e,t,i,r,n,o){super(),this.environmentService=e,this.galleryService=t,this.logService=i,this.downloadService=r,this.telemetryService=n,
this.lastReportTimestamp=0,this.installingExtensions=new Map,this.uninstallingExtensions=new Map,this._onInstallExtension=this._register(new m.Emitter),this.onInstallExtension=this._onInstallExtension.event,this._onDidInstallExtension=this._register(new m.Emitter),this.onDidInstallExtension=this._onDidInstallExtension.event,this._onUninstallExtension=this._register(new m.Emitter),this.onUninstallExtension=this._onUninstallExtension.event,this._onDidUninstallExtension=this._register(new m.Emitter),this.onDidUninstallExtension=this._onDidUninstallExtension.event,this._devSystemExtensionsPath=null,this.systemExtensionsPath=e.builtinExtensionsPath,this.extensionsPath=e.extensionsPath,this.uninstalledPath=s.join(this.extensionsPath,".obsolete"),this.uninstalledFileLimiter=new p.Queue,this.manifestCache=this._register(new b.ExtensionsManifestCache(e,this)),this.extensionsDownloader=this._register(o.createInstance(A.ExtensionsDownloader)),
this.extensionLifecycle=this._register(new C.ExtensionsLifecycle(e,this.logService)),this._register(l.toDisposable(()=>{this.installingExtensions.forEach(e=>e.cancel()),this.uninstallingExtensions.forEach(e=>e.cancel()),this.installingExtensions.clear(),this.uninstallingExtensions.clear()}))}zip(e){return this.logService.trace("ExtensionManagementService#zip",e.identifier.id),this.collectFiles(e).then(e=>u.zip(s.join(I.tmpdir(),D.generateUuid()),e)).then(e=>y.URI.file(e))}unzip(e,t){return this.logService.trace("ExtensionManagementService#unzip",e.toString()),this.install(e,t).then(e=>e.identifier)}async getManifest(e){const t=await this.downloadVsix(e),i=s.resolve(t.fsPath);return k.getManifest(i)}collectFiles(e){const t=async e=>{let i=await o.readdir(e);i=i.map(t=>s.join(e,t));const r=await Promise.all(i.map(e=>o.stat(e)));let n=Promise.resolve([]);return r.forEach((e,r)=>{const s=i[r];e.isFile()&&(n=n.then(e=>[...e,s])),e.isDirectory()&&(n=n.then(e=>t(s).then(t=>[...e,...t])))}),n}
;return t(e.location.fsPath).then(t=>t.map(t=>({path:`extension/${s.relative(e.location.fsPath,t)}`,localPath:t})))}install(e,t=1){return this.logService.trace("ExtensionManagementService#install",e.toString()),p.createCancelablePromise(i=>this.downloadVsix(e).then(e=>{const r=s.resolve(e.fsPath);return k.getManifest(r).then(e=>{const s={id:d.getGalleryExtensionId(e.publisher,e.name)};let o=1;if(e.engines&&e.engines.vscode&&!_.isEngineValid(e.engines.vscode,E.default.version))return Promise.reject(new Error(n.localize(1,null,s.id,E.default.version)));const a=new d.ExtensionIdentifierWithVersion(s,e.version);return this.getInstalled(1).then(t=>{const i=t.filter(e=>d.areSameExtensions(s,e.identifier))[0];return i?(o=2,
a.equals(new d.ExtensionIdentifierWithVersion(i.identifier,i.manifest.version))?this.removeExtension(i,"existing").then(null,t=>Promise.reject(new Error(n.localize(2,null,e.displayName||e.name)))):v.gt(i.manifest.version,e.version)?this.uninstall(i,!0):void 0):this.unsetUninstalledAndGetLocal(a).then(t=>{if(t)return this.removeExtension(t,"existing").then(null,t=>Promise.reject(new Error(n.localize(3,null,e.displayName||e.name))))})}).then(()=>(this.logService.info("Installing the extension:",s.id),this._onInstallExtension.fire({identifier:s,zipPath:r}),this.getMetadata(d.getGalleryExtensionId(e.publisher,e.name)).then(e=>this.installFromZipPath(a,r,e,t,o,i),()=>this.installFromZipPath(a,r,null,t,o,i)).then(e=>(this.logService.info("Successfully installed the extension:",s.id),e),e=>(this.logService.error("Failed to install the extension:",s.id,e.message),Promise.reject(e)))))})}))}downloadVsix(e){if(e.scheme===F.Schemas.file)return Promise.resolve(e)
;if(!this.downloadService)throw new Error("Download service is not available");const t=s.join(I.tmpdir(),D.generateUuid());return this.downloadService.download(e,y.URI.file(t)).then(()=>y.URI.file(t))}installFromZipPath(e,t,i,r,n,s){return this.toNonCancellablePromise(this.installExtension({zipPath:t,identifierWithVersion:e,metadata:i},r,s).then(e=>this.installDependenciesAndPackExtensions(e,null).then(()=>e,t=>(c.isNonEmptyArray(e.manifest.extensionDependencies)&&this.logService.warn("Cannot install dependencies of extension:",e.identifier.id,t.message),c.isNonEmptyArray(e.manifest.extensionPack)&&this.logService.warn("Cannot install packed extensions of extension:",e.identifier.id,t.message),e))).then(i=>(this._onDidInstallExtension.fire({identifier:e.identifier,zipPath:t,local:i,operation:n}),i),i=>(this._onDidInstallExtension.fire({identifier:e.identifier,zipPath:t,operation:n,error:i}),Promise.reject(i))))}async installFromGallery(e){
if(!this.galleryService.isEnabled())return Promise.reject(new Error(n.localize(4,null)));const t=(new Date).getTime(),i=(e,i,r)=>{this.logService.info("Extensions installed successfully:",e.identifier.id),this._onDidInstallExtension.fire({identifier:e.identifier,gallery:e,local:r,operation:i}),this.reportTelemetry(this.getTelemetryEvent(i),d.getGalleryExtensionTelemetryData(e),(new Date).getTime()-t,void 0)},r=(e,i,r)=>{const n=r&&r.code?r.code:"unknown";this.logService.error("Failed to install extension:",e.identifier.id,r?r.message:n),this._onDidInstallExtension.fire({identifier:e.identifier,gallery:e,operation:i,error:n}),this.reportTelemetry(this.getTelemetryEvent(i),d.getGalleryExtensionTelemetryData(e),(new Date).getTime()-t,r),r instanceof Error&&(r.name=n)};try{e=await this.checkAndGetCompatibleVersion(e)}catch(t){return r(e,1,t),Promise.reject(t)}const s=new d.ExtensionIdentifierWithVersion(e.identifier,e.version).key();let o=this.installingExtensions.get(s);if(!o){
this.logService.info("Installing extension:",e.identifier.id),this._onInstallExtension.fire({identifier:e.identifier,gallery:e});let t,n,a,l=1;o=p.createCancelablePromise(e=>(t=e,new Promise((e,t)=>{n=e,a=t}))),this.installingExtensions.set(s,o);try{const o=(await this.getInstalled(1)).filter(t=>d.areSameExtensions(t.identifier,e.identifier))[0];o&&(l=2),this.downloadInstallableExtension(e,l).then(e=>this.installExtension(e,1,t).then(t=>this.extensionsDownloader.delete(y.URI.file(e.zipPath)).finally(()=>{}).then(()=>t))).then(e=>this.installDependenciesAndPackExtensions(e,o).then(()=>e,t=>this.uninstall(e,!0).then(()=>Promise.reject(t),()=>Promise.reject(t)))).then(async t=>{o&&v.neq(o.manifest.version,e.version)&&await this.setUninstalled(o),this.installingExtensions.delete(s),i(e,l,t),n(t)},t=>{this.installingExtensions.delete(s),r(e,l,t),a(t)})}catch(t){return this.installingExtensions.delete(s),r(e,l,t),Promise.reject(t)}}return o}async checkAndGetCompatibleVersion(e){
if(await this.isMalicious(e))return Promise.reject(new M(n.localize(5,null),h.INSTALL_ERROR_MALICIOUS));const t=await this.galleryService.getCompatibleExtension(e);return t||Promise.reject(new M(n.localize(6,null,e.identifier.id,E.default.version),h.INSTALL_ERROR_INCOMPATIBLE))}reinstallFromGallery(e){return this.logService.trace("ExtensionManagementService#reinstallFromGallery",e.identifier.id),this.galleryService.isEnabled()?this.findGalleryExtension(e).then(t=>t?this.setUninstalled(e).then(()=>this.removeUninstalledExtension(e).then(()=>this.installFromGallery(t).then(),e=>Promise.reject(new Error(n.localize(8,null,P.toErrorMessage(e)))))):Promise.reject(new Error(n.localize(9,null)))):Promise.reject(new Error(n.localize(7,null)))}getTelemetryEvent(e){return 2===e?"extensionGallery:update":"extensionGallery:install"}isMalicious(e){return this.getExtensionsReport().then(t=>d.getMaliciousExtensionsSet(t).has(e.identifier.id))}downloadInstallableExtension(e,t){const i={id:e.identifier.uuid,
publisherId:e.publisherId,publisherDisplayName:e.publisherDisplayName};return this.logService.trace("Started downloading extension:",e.identifier.id),this.extensionsDownloader.downloadExtension(e,t).then(t=>{const r=t.fsPath;return this.logService.info("Downloaded extension:",e.identifier.id,r),k.getManifest(r).then(t=>({zipPath:r,identifierWithVersion:new d.ExtensionIdentifierWithVersion(e.identifier,t.version),metadata:i}),e=>Promise.reject(new M(this.joinErrors(e).message,"validating")))},e=>Promise.reject(new M(this.joinErrors(e).message,"downloading")))}installExtension(e,t,i){return this.unsetUninstalledAndGetLocal(e.identifierWithVersion).then(r=>r||this.extractAndInstall(e,t,i),e=>S.isMacintosh?Promise.reject(new M(n.localize(10,null),"unsetUninstalled")):Promise.reject(new M(n.localize(11,null),"unsetUninstalled")))}unsetUninstalledAndGetLocal(e){return this.isUninstalled(e).then(t=>t?(this.logService.trace("Removing the extension from uninstalled list:",e.identifier.id),
this.unsetUninstalled(e).then(()=>(this.logService.info("Removed the extension from uninstalled list:",e.identifier.id),this.getInstalled(1))).then(t=>t.filter(t=>new d.ExtensionIdentifierWithVersion(t.identifier,t.manifest.version).equals(e))[0])):null)}extractAndInstall({zipPath:e,identifierWithVersion:t,metadata:i},r,a){const{identifier:l}=t,c=1===r?this.extensionsPath:this.systemExtensionsPath,u=t.key(),h=s.join(c,`.${u}`),d=s.join(c,u);return o.rimraf(d).then(()=>this.extractAndRename(l,e,h,d,a),e=>Promise.reject(new M(n.localize(12,null,d,l.id),"deleting"))).then(()=>this.scanExtension(u,c,r)).then(e=>e?(this.logService.info("Installation completed.",l.id),i?(this.setMetadata(e,i),this.saveMetadataForLocalExtension(e)):e):Promise.reject(n.localize(13,null,c)),e=>o.rimraf(d).then(()=>Promise.reject(e),()=>Promise.reject(e)))}extractAndRename(e,t,i,r,n){
return this.extract(e,t,i,n).then(()=>this.rename(e,i,r,Date.now()+12e4).then(()=>this.logService.info("Renamed to",r),e=>(this.logService.info("Rename failed. Deleting from extracted location",i),o.rimraf(i).finally(()=>{}).then(()=>Promise.reject(e)))))}extract(e,t,i,r){return this.logService.trace(`Started extracting the extension from ${t} to ${i}`),o.rimraf(i).then(()=>u.extract(t,i,{sourcePath:"extension",overwrite:!0},r).then(()=>this.logService.info(`Extracted extension to ${i}:`,e.id),e=>o.rimraf(i).finally(()=>{}).then(()=>Promise.reject(new M(e.message,e instanceof u.ExtractError&&e.type?e.type:"extracting")))),e=>Promise.reject(new M(this.joinErrors(e).message,"deleting")))}rename(e,t,i,r){return o.rename(t,i).then(void 0,s=>S.isWindows&&s&&"EPERM"===s.code&&Date.now()<r?(this.logService.info(`Failed renaming ${t} to ${i} with 'EPERM' error. Trying again...`,e.id),this.rename(e,t,i,r)):Promise.reject(new M(s.message||n.localize(14,null,t,i),s.code||"renaming")))}
async installDependenciesAndPackExtensions(e,t){if(this.galleryService.isEnabled()){const i=e.manifest.extensionDependencies||[];if(e.manifest.extensionPack)for(const r of e.manifest.extensionPack)t&&t.manifest.extensionPack&&t.manifest.extensionPack.some(e=>d.areSameExtensions({id:e},{id:r}))||i.every(e=>!d.areSameExtensions({id:e},{id:r}))&&i.push(r);if(i.length)return this.getInstalled().then(e=>{const t=i.filter(t=>e.every(({identifier:e})=>!d.areSameExtensions(e,{id:t})));if(t.length)return this.galleryService.query({names:t,pageSize:i.length},R.CancellationToken.None).then(e=>{const t=e.firstPage;return Promise.all(t.map(e=>this.installFromGallery(e))).then(void 0,e=>this.rollback(t).then(()=>Promise.reject(e),()=>Promise.reject(e)))})})}return Promise.resolve(void 0)}rollback(e){
return this.getInstalled(1).then(t=>Promise.all(t.filter(t=>e.some(e=>new d.ExtensionIdentifierWithVersion(t.identifier,t.manifest.version).equals(new d.ExtensionIdentifierWithVersion(e.identifier,e.version)))).map(e=>this.uninstall(e,!0)))).then(()=>void 0,()=>void 0)}uninstall(e,t=!1){return this.logService.trace("ExtensionManagementService#uninstall",e.identifier.id),this.toNonCancellablePromise(this.getInstalled(1).then(t=>{const i=t.filter(t=>d.areSameExtensions(t.identifier,e.identifier))[0];return i?this.checkForDependenciesAndUninstall(i,t).then(void 0,e=>Promise.reject(this.joinErrors(e))):Promise.reject(new Error(n.localize(15,null,e.manifest.displayName||e.manifest.name)))}))}updateMetadata(e,t){return this.logService.trace("ExtensionManagementService#updateMetadata",e.identifier.id),e.metadata=t,this.saveMetadataForLocalExtension(e).then(e=>(this.manifestCache.invalidate(),e))}saveMetadataForLocalExtension(e){if(!e.metadata)return Promise.resolve(e);const t=s.join(e.location.fsPath,"package.json")
;return o.readFile(t,"utf8").then(e=>j(e)).then(({manifest:t})=>a.assign(t,{__metadata:e.metadata})).then(e=>o.writeFile(t,JSON.stringify(e,null,"\t"))).then(()=>e)}getMetadata(e){return this.findGalleryExtensionByName(e).then(e=>e?{id:e.identifier.uuid,publisherDisplayName:e.publisherDisplayName,publisherId:e.publisherId}:null)}findGalleryExtension(e){return e.identifier.uuid?this.findGalleryExtensionById(e.identifier.uuid).then(t=>t||this.findGalleryExtensionByName(e.identifier.id)):this.findGalleryExtensionByName(e.identifier.id)}findGalleryExtensionById(e){return this.galleryService.query({ids:[e],pageSize:1},R.CancellationToken.None).then(e=>e.firstPage[0])}findGalleryExtensionByName(e){return this.galleryService.query({names:[e],pageSize:1},R.CancellationToken.None).then(e=>e.firstPage[0])}joinErrors(e){const t=Array.isArray(e)?e:[e];return 1===t.length?t[0]instanceof Error?t[0]:new Error(t[0]):t.reduce((e,t)=>new Error(`${e.message}${e.message?",":""}${t instanceof Error?t.message:t}`),new Error(""))}
checkForDependenciesAndUninstall(e,t){return this.preUninstallExtension(e).then(()=>{const i=this.getAllPackExtensionsToUninstall(e,t);return i.length?this.uninstallExtensions(e,i,t):this.uninstallExtensions(e,[],t)}).then(()=>this.postUninstallExtension(e),t=>(this.postUninstallExtension(e,new M(t instanceof Error?t.message:t,"local")),Promise.reject(t)))}uninstallExtensions(e,t,i){const r=this.getDependents(e,i);if(r.length){const i=r.filter(i=>e!==i&&-1===t.indexOf(i));if(i.length)return Promise.reject(new Error(this.getDependentsErrorMessage(e,i)))}return Promise.all([this.uninstallExtension(e),...t.map(e=>this.doUninstall(e))]).then(()=>void 0)}getDependentsErrorMessage(e,t){
return 1===t.length?n.localize(16,null,e.manifest.displayName||e.manifest.name,t[0].manifest.displayName||t[0].manifest.name):2===t.length?n.localize(17,null,e.manifest.displayName||e.manifest.name,t[0].manifest.displayName||t[0].manifest.name,t[1].manifest.displayName||t[1].manifest.name):n.localize(18,null,e.manifest.displayName||e.manifest.name,t[0].manifest.displayName||t[0].manifest.name,t[1].manifest.displayName||t[1].manifest.name)}getAllPackExtensionsToUninstall(e,t,i=[]){if(-1!==i.indexOf(e))return[];i.push(e);const r=e.manifest.extensionPack?e.manifest.extensionPack:[];if(r.length){const e=t.filter(e=>r.some(t=>d.areSameExtensions({id:t},e.identifier))),n=[];for(const r of e)n.push(...this.getAllPackExtensionsToUninstall(r,t,i));return[...e,...n]}return[]}getDependents(e,t){return t.filter(t=>t.manifest.extensionDependencies&&t.manifest.extensionDependencies.some(t=>d.areSameExtensions({id:t},e.identifier)))}doUninstall(e){
return this.preUninstallExtension(e).then(()=>this.uninstallExtension(e)).then(()=>this.postUninstallExtension(e),t=>(this.postUninstallExtension(e,new M(t instanceof Error?t.message:t,"local")),Promise.reject(t)))}preUninstallExtension(e){return Promise.resolve(o.exists(e.location.fsPath)).then(e=>e?null:Promise.reject(new Error(n.localize(19,null)))).then(()=>{this.logService.info("Uninstalling extension:",e.identifier.id),this._onUninstallExtension.fire(e.identifier)})}uninstallExtension(e){let t=this.uninstallingExtensions.get(e.identifier.id);return t||(t=p.createCancelablePromise(t=>this.scanUserExtensions(!1).then(t=>this.setUninstalled(...t.filter(t=>d.areSameExtensions(t.identifier,e.identifier)))).then(()=>{this.uninstallingExtensions.delete(e.identifier.id)})),this.uninstallingExtensions.set(e.identifier.id,t)),t}async postUninstallExtension(e,t){
t?this.logService.error("Failed to uninstall extension:",e.identifier.id,t.message):(this.logService.info("Successfully uninstalled extension:",e.identifier.id),e.identifier.uuid&&await this.galleryService.reportStatistic(e.manifest.publisher,e.manifest.name,e.manifest.version,"uninstall")),this.reportTelemetry("extensionGallery:uninstall",d.getLocalExtensionTelemetryData(e),void 0,t);const i=t?t instanceof M?t.code:"unknown":void 0;this._onDidUninstallExtension.fire({identifier:e.identifier,error:i})}getInstalled(e=null){const t=[];return null!==e&&0!==e||t.push(this.scanSystemExtensions().then(null,e=>Promise.reject(new M(this.joinErrors(e).message,"scanningSystem")))),null!==e&&1!==e||t.push(this.scanUserExtensions(!0).then(null,e=>Promise.reject(new M(this.joinErrors(e).message,"scanningUser")))),Promise.all(t).then(c.flatten,e=>Promise.reject(this.joinErrors(e)))}scanSystemExtensions(){this.logService.trace("Started scanning system extensions")
;const e=this.scanExtensions(this.systemExtensionsPath,0).then(e=>(this.logService.trace("Scanned system extensions:",e.length),e));if(this.environmentService.isBuilt)return e;const t=this.getDevSystemExtensionsList().then(e=>e.length?this.scanExtensions(this.devSystemExtensionsPath,0).then(t=>(this.logService.trace("Scanned dev system extensions:",t.length),t.filter(t=>e.some(e=>d.areSameExtensions(t.identifier,{id:e}))))):[]);return Promise.all([e,t]).then(([e,t])=>[...e,...t])}scanUserExtensions(e){return this.logService.trace("Started scanning user extensions"),Promise.all([this.getUninstalledExtensions(),this.scanExtensions(this.extensionsPath,1)]).then(([t,i])=>{if(i=i.filter(e=>!t[new d.ExtensionIdentifierWithVersion(e.identifier,e.manifest.version).key()]),e){i=d.groupByExtension(i,e=>e.identifier).map(e=>e.sort((e,t)=>v.rcompare(e.manifest.version,t.manifest.version))[0])}return this.logService.trace("Scanned user extensions:",i.length),i})}scanExtensions(e,t){const i=new p.Limiter(10)
;return o.readdir(e).then(r=>Promise.all(r.map(r=>i.queue(()=>this.scanExtension(r,e,t))))).then(e=>e.filter(e=>e&&e.identifier))}scanExtension(e,t,i){if(1===i&&0===e.indexOf("."))return Promise.resolve(null);const r=s.join(t,e);return o.readdir(r).then(e=>(function(e){const t=[o.readFile(s.join(e,"package.json"),"utf8").then(e=>j(e)),o.readFile(s.join(e,"package.nls.json"),"utf8").then(void 0,e=>"ENOENT"!==e.code?Promise.reject(e):"{}").then(e=>JSON.parse(e))];return Promise.all(t).then(([{manifest:e,metadata:t},i])=>({manifest:f.localizeManifest(e,i),metadata:t}))})(r).then(({manifest:t,metadata:n})=>{const o=e.filter(e=>/^readme(\.txt|\.md|)$/i.test(e))[0],a=o?y.URI.file(s.join(r,o)):null,l=e.filter(e=>/^changelog(\.txt|\.md|)$/i.test(e))[0],c=l?y.URI.file(s.join(r,l)):null,u={id:d.getGalleryExtensionId(t.publisher,t.name)},h={type:i,identifier:u,manifest:t,metadata:n,location:y.URI.file(r),readmeUrl:a,changelogUrl:c};return n&&this.setMetadata(h,n),h})).then(void 0,()=>null)}setMetadata(e,t){e.metadata=t,
e.identifier.uuid=t.id}async removeDeprecatedExtensions(){await this.removeUninstalledExtensions(),await this.removeOutdatedExtensions()}async removeUninstalledExtensions(){const e=await this.getUninstalledExtensions(),t=await this.scanExtensions(this.extensionsPath,1),i=new Set;for(const r of t)e[new d.ExtensionIdentifierWithVersion(r.identifier,r.manifest.version).key()]||i.add(r.identifier.id.toLowerCase());const r=d.groupByExtension(t,e=>e.identifier);await Promise.all(r.map(async e=>{const t=e.sort((e,t)=>v.rcompare(e.manifest.version,t.manifest.version))[0];i.has(t.identifier.id.toLowerCase())||await this.extensionLifecycle.postUninstall(t)}));const n=t.filter(t=>e[new d.ExtensionIdentifierWithVersion(t.identifier,t.manifest.version).key()]);await Promise.all(n.map(e=>this.removeUninstalledExtension(e)))}removeOutdatedExtensions(){return this.scanExtensions(this.extensionsPath,1).then(e=>{const t=[],i=d.groupByExtension(e,e=>e.identifier)
;return t.push(...c.flatten(i.map(e=>e.sort((e,t)=>v.rcompare(e.manifest.version,t.manifest.version)).slice(1)))),Promise.all(t.map(e=>this.removeExtension(e,"outdated")))}).then(()=>void 0)}removeUninstalledExtension(e){return this.removeExtension(e,"uninstalled").then(()=>this.withUninstalledExtensions(t=>delete t[new d.ExtensionIdentifierWithVersion(e.identifier,e.manifest.version).key()])).then(()=>void 0)}removeExtension(e,t){return this.logService.trace(`Deleting ${t} extension from disk`,e.identifier.id,e.location.fsPath),o.rimraf(e.location.fsPath).then(()=>this.logService.info("Deleted from disk",e.identifier.id,e.location.fsPath))}isUninstalled(e){return this.filterUninstalled(e).then(e=>1===e.length)}filterUninstalled(...e){return this.withUninstalledExtensions(t=>{const i=[];for(const r of e)t[r.key()]&&i.push(r.key());return i})}setUninstalled(...e){const t=e.map(e=>new d.ExtensionIdentifierWithVersion(e.identifier,e.manifest.version))
;return this.withUninstalledExtensions(e=>a.assign(e,t.reduce((e,t)=>(e[t.key()]=!0,e),{})))}unsetUninstalled(e){return this.withUninstalledExtensions(t=>delete t[e.key()])}getUninstalledExtensions(){return this.withUninstalledExtensions(e=>e)}async withUninstalledExtensions(e){return await this.uninstalledFileLimiter.queue(()=>{let t=null;return o.readFile(this.uninstalledPath,"utf8").then(void 0,e=>"ENOENT"===e.code?Promise.resolve("{}"):Promise.reject(e)).then(e=>{try{return JSON.parse(e)}catch(e){return{}}}).then(i=>(t=e(i),i)).then(e=>{if(0===Object.keys(e).length)return o.rimraf(this.uninstalledPath);{const t=JSON.stringify(e);return o.writeFile(this.uninstalledPath,t)}}).then(()=>t)})}getExtensionsReport(){const e=(new Date).getTime();return(!this.reportedExtensions||e-this.lastReportTimestamp>3e5)&&(this.reportedExtensions=this.updateReportCache(),this.lastReportTimestamp=e),this.reportedExtensions}updateReportCache(){return this.logService.trace("ExtensionManagementService.refreshReportedCache"),
this.galleryService.getExtensionsReport().then(e=>(this.logService.trace(`ExtensionManagementService.refreshReportedCache - got ${e.length} reported extensions from service`),e),e=>(this.logService.trace("ExtensionManagementService.refreshReportedCache - failed to get extension report"),[]))}get devSystemExtensionsPath(){return this._devSystemExtensionsPath||(this._devSystemExtensionsPath=s.normalize(s.join(T.getPathFromAmdModule(e,""),"..",".build","builtInExtensions"))),this._devSystemExtensionsPath}getDevSystemExtensionsList(){return Promise.resolve(E.default.builtInExtensions?E.default.builtInExtensions.map(e=>e.name):[])}toNonCancellablePromise(e){return new Promise((t,i)=>e.then(e=>t(e),e=>i(e)))}reportTelemetry(e,t,i,r){const n=r?r instanceof M?r.code:"unknown":void 0;this.telemetryService.publicLogError(e,a.assign(t,{success:!r,duration:i,errorcode:n}))}}
;return t=i([r(0,g.IEnvironmentService),r(1,h.IExtensionGalleryService),r(2,w.ILogService),r(3,O.optional(L.IDownloadService)),r(4,x.ITelemetryService),r(5,O.IInstantiationService)],t)})();t.ExtensionManagementService=N})),define(e[119],t([0,1,125,108,3,11,6,25,107,26,10,16]),(function(e,t,n,s,o,a,l,c,u,h,d,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestService=void 0;let g=(()=>{let t=class extends o.Disposable{constructor(e,t){super(),this.logService=t,this.configure(e.getValue()),this._register(e.onDidChangeConfiguration(()=>this.configure(e.getValue()),this))}configure(e){this.proxyUrl=e.http&&e.http.proxy,this.strictSSL=!(!e.http||!e.http.proxyStrictSSL),this.authorization=e.http&&e.http.proxyAuthorization}async request(e,t){this.logService.trace("RequestService#request",e.url);const{proxyUrl:i,strictSSL:r}=this,n=e.agent?e.agent:await u.getProxyAgent(e.url||"",{proxyUrl:i,strictSSL:r});return e.agent=n,e.strictSSL=r,this.authorization&&(e.headers=a.assign(e.headers||{},{
"Proxy-Authorization":this.authorization})),this._request(e,t)}async getNodeRequest(t){return("https:"===s.parse(t.url).protocol?await new Promise((t,i)=>{e(["https"],t,i)}):await new Promise((t,i)=>{e(["http"],t,i)})).request}_request(e,t){return new Promise(async(i,r)=>{let o;const u=s.parse(e.url),h=e.getRawRequest?e.getRawRequest(e):await this.getNodeRequest(e),d={hostname:u.hostname,port:u.port?parseInt(u.port):"https:"===u.protocol?443:80,protocol:u.protocol,path:u.path,method:e.type||"GET",headers:e.headers,agent:e.agent,rejectUnauthorized:!l.isBoolean(e.strictSSL)||e.strictSSL};e.user&&e.password&&(d.auth=e.user+":"+e.password),(o=h(d,s=>{const o=l.isNumber(e.followRedirects)?e.followRedirects:3;if(s.statusCode&&s.statusCode>=300&&s.statusCode<400&&o>0&&s.headers.location)this._request(a.assign({},e,{url:s.headers.location,followRedirects:o-1}),t).then(i,r);else{let e=s;"gzip"===s.headers["content-encoding"]&&(e=s.pipe(n.createGunzip())),i({res:s,stream:f.streamToBufferReadableStream(e)})}
})).on("error",r),e.timeout&&o.setTimeout(e.timeout),e.data&&"string"==typeof e.data&&o.write(e.data),o.end(),t.onCancellationRequested(()=>{o.abort(),r(c.canceled())})})}async resolveProxy(e){}};return t=i([r(0,h.IConfigurationService),r(1,d.ILogService)],t)})();t.RequestService=g})),define(e[126],t([0,1,5,40,2,52,51,48,4,95,19,101,30,118,113,41,55,114,116,54,119,26,106,115,8,43,110,111,10,25,29,14,57,37,28,103,22,100,117,98,20,99,3,53]),(function(e,t,n,s,o,a,l,c,u,h,d,f,g,p,m,v,y,E,S,w,b,C,P,x,_,I,D,L,O,F,R,T,k,A,M,j,N,U,z,V,B,W,$,q){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.main=t.Main=t.getIdAndVersion=void 0;const G=e=>n.localize(1,null,e),H=n.localize(2,null,"ms-dotnettools.csharp");function K(e,t){return t?`${e.publisher}.${e.name}@${e.version}`:`${e.publisher}.${e.name}`}const X=/^([^.]+\..+)@(\d+\.\d+\.\d+(-.*)?)$/;function Q(e){const t=X.exec(e);return t&&t[1]?[R.adoptToGalleryExtensionId(t[1]),t[2]]:[R.adoptToGalleryExtensionId(e),void 0]}t.getIdAndVersion=Q;let J=(()=>{
let e=class{constructor(e,t,i,r){this.instantiationService=e,this.environmentService=t,this.extensionManagementService=i,this.extensionGalleryService=r}async run(e){e["install-source"]?await this.setInstallSource(e["install-source"]):e["list-extensions"]?await this.listExtensions(!!e["show-versions"],e.category):e["install-extension"]?await this.installExtensions(e["install-extension"],!!e.force):e["uninstall-extension"]?await this.uninstallExtension(e["uninstall-extension"]):e["locate-extension"]?await this.locateExtension(e["locate-extension"]):e.telemetry&&console.log(z.buildTelemetryMessage(this.environmentService.appRoot,this.environmentService.extensionsPath?this.environmentService.extensionsPath:void 0))}setInstallSource(e){return _.writeFile(this.environmentService.installSourcePath,e.slice(0,30))}async listExtensions(e,t){let i=await this.extensionManagementService.getInstalled(1)
;const r=['"programming languages"',"snippets","linters","themes","debuggers","formatters","keymaps",'"scm providers"',"other",'"extension packs"','"language packs"'];if(t&&""!==t){if(r.indexOf(t.toLowerCase())<0)return void console.log("Invalid category please enter a valid category. To list valid categories run --category without a category specified");i=i.filter(e=>{if(e.manifest.categories){return e.manifest.categories.map(e=>e.toLowerCase()).indexOf(t.toLowerCase())>-1}return!1})}else if(""===t)return console.log("Possible Categories: "),void r.forEach(e=>{console.log(e)});i.forEach(t=>console.log(K(t.manifest,e)))}async installExtensions(e,t){const i=[],r=[];e.length&&console.log(n.localize(3,null));for(const n of e)try{const e=await this.installExtension(n,t);e&&r.push(e)}catch(e){console.error(e.message||e.stack||e),i.push(n)}return r.some(e=>A.isLanguagePackExtension(e))&&await this.updateLocalizationsCache(),i.length?Promise.reject(n.localize(4,null,i.join(", "))):Promise.resolve()}
async installExtension(e,t){if(/\.vsix$/i.test(e)){e=o.isAbsolute(e)?e:o.join(process.cwd(),e);const i=await k.getManifest(e);return await this.validate(i,t)?this.extensionManagementService.install(T.URI.file(e)).then(t=>(console.log(n.localize(5,null,I.getBaseLabel(e))),i),t=>F.isPromiseCanceledError(t)?(console.log(n.localize(6,null,I.getBaseLabel(e))),null):Promise.reject(t)):null}const[i,r]=Q(e);return this.extensionManagementService.getInstalled(1).then(e=>this.extensionGalleryService.getCompatibleExtension({id:i},r).then(null,e=>{if(e.responseText)try{const t=JSON.parse(e.responseText);return Promise.reject(t.message)}catch(e){}return Promise.reject(e)}).then(async s=>{if(!s)return Promise.reject(new Error(`${(e=>n.localize(0,null,e))(r?`${i}@${r}`:i)}\n${H}`));const o=await this.extensionGalleryService.getManifest(s,M.CancellationToken.None),[a]=e.filter(e=>R.areSameExtensions(e.identifier,{id:i}));if(a){if(s.version===a.manifest.version)return console.log(n.localize(7,null,r?`${i}@${r}`:i)),
Promise.resolve(null);if(!r&&!t)return console.log(n.localize(8,null,i,a.manifest.version,s.version)),Promise.resolve(null);console.log(n.localize(9,null,i,s.version))}return await this.installFromGallery(i,s),o}))}async validate(e,t){if(!e)throw new Error("Invalid vsix");const i={id:R.getGalleryExtensionId(e.publisher,e.name)},r=(await this.extensionManagementService.getInstalled(1)).filter(t=>R.areSameExtensions(i,t.identifier)&&a.gt(t.manifest.version,e.version))[0];return!(r&&!t)||(console.log(n.localize(10,null,r.identifier.id,r.manifest.version,e.version)),!1)}async installFromGallery(e,t){console.log(n.localize(11,null,e,t.version));try{await this.extensionManagementService.installFromGallery(t),console.log(n.localize(12,null,e,t.version))}catch(t){if(!F.isPromiseCanceledError(t))throw t;console.log(n.localize(13,null,e))}}async uninstallExtension(e){async function t(e){if(!/\.vsix$/i.test(e))return e;const t=o.isAbsolute(e)?e:o.join(process.cwd(),e);return K(await k.getManifest(t))}const i=[]
;for(const r of e){const e=await t(r),s=await this.extensionManagementService.getInstalled(1),[o]=s.filter(t=>R.areSameExtensions(t.identifier,{id:e}));if(!o)return Promise.reject(new Error(`${G(e)}\n${H}`));console.log(n.localize(14,null,e)),await this.extensionManagementService.uninstall(o,!0),i.push(o),console.log(n.localize(15,null,e))}i.some(e=>A.isLanguagePackExtension(e.manifest))&&await this.updateLocalizationsCache()}async locateExtension(e){const t=await this.extensionManagementService.getInstalled();e.forEach(e=>{t.forEach(t=>{t.identifier.id!==e||t.location.scheme!==N.Schemas.file||console.log(t.location.fsPath)})})}async updateLocalizationsCache(){const e=this.instantiationService.createInstance(j.LocalizationsService);await e.update(),e.dispose()}};return e=i([r(0,u.IInstantiationService),r(1,d.IEnvironmentService),r(2,g.IExtensionManagementService),r(3,g.IExtensionGalleryService)],e)})();t.Main=J;const Y="monacoworkbench";t.main=async function(e){
const t=new l.ServiceCollection,i=new $.DisposableStore,r=new f.EnvironmentService(e,process.execPath),n=new U.SpdLogService("cli",r.logsPath,O.getLogLevel(r));process.once("exit",()=>n.dispose()),n.info("main",e),await Promise.all([r.appSettingsHome.fsPath,r.extensionsPath].map(e=>e?_.mkdirp(e):void 0));const o=new V.FileService(n);i.add(o),t.set(B.IFileService,o);const a=new W.DiskFileSystemProvider(n);i.add(a),o.registerProvider(N.Schemas.file,a);const u=new P.ConfigurationService(r.settingsResource,o);i.add(u),await u.initialize(),t.set(d.IEnvironmentService,r),t.set(O.ILogService,n),t.set(C.IConfigurationService,u),t.set(D.IStateService,new c.SyncDescriptor(L.StateService)),t.set(q.IProductService,Object.assign({_serviceBrand:void 0},s.default));const I=new h.InstantiationService(t);return I.invokeFunction(async t=>{const o=t.get(D.IStateService),{appRoot:a,extensionsPath:u,extensionDevelopmentLocationURI:h,isBuilt:d,installSourcePath:f}=r,C=new l.ServiceCollection
;C.set(w.IRequestService,new c.SyncDescriptor(b.RequestService)),C.set(g.IExtensionManagementService,new c.SyncDescriptor(p.ExtensionManagementService)),C.set(g.IExtensionGalleryService,new c.SyncDescriptor(m.ExtensionGalleryService));const P=[];if(d&&!h&&!r.disableTelemetry&&s.default.enableTelemetry){s.default.aiConfig&&s.default.aiConfig.asimovKey&&P.push(new x.AppInsightsAppender(Y,null,s.default.aiConfig.asimovKey,n));const e={appender:y.combinedAppender(...P),sendErrorTelemetry:!1,commonProperties:S.resolveCommonProperties(s.default.commit,s.default.version,o.getItem("telemetry.machineId"),s.default.msftInternalDomains,f),piiPaths:u?[a,u]:[a]};C.set(v.ITelemetryService,new c.SyncDescriptor(E.TelemetryService,[e]))}else C.set(v.ITelemetryService,y.NullTelemetryService);const _=I.createChild(C).createInstance(J);try{await _.run(e),await y.combinedAppender(...P).flush()}finally{i.dispose()}})}}))}).call(this);
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/5763d909d5f12fe19f215cbfdd29a91c0fa9208a/core/vs/code/node/cliProcessMain.js.map
